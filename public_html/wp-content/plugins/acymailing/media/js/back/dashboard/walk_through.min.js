jQuery(function(_){function e(){_(".acym__walkthrough__list__receivers__remove").off("click").on("click",function(){_(this).closest("tr").remove()})}_("#acym__walk_through_license__button__license").on("click",function(){let e=jQuery("#acym__walkthrough__step_license__wait_attach_license_icon");e.removeClass("is-hidden");const a={ctrl:"dashboard",task:"stepLicenseAttachLicense",licenseKey:jQuery("#acym__configuration__license-key").val()};acym_helper.post(ACYM_AJAX_URL,a).then(a=>{let t=document.getElementById("acym__walk_through_license__licenseStatus");a.error?(t.innerHTML=a.message,t.classList.remove("acym__color__green"),t.classList.add("acym__color__red")):(_("#acym__walk_through_license__button__cron").removeAttr("disabled"),_(".acym__tooltip_button__cron").css("display","none"),t.innerHTML=ACYM_JS_TXT.ACYM_LICENSE_ACTIVATED,t.classList.add("acym__color__green"),t.classList.remove("acym__color__red")),e.addClass("is-hidden")})}),_("#acym__walk_through_license__button__cron").on("click",function(){if("disabled"===jQuery("#acym__walk_through_license__button__cron").attr("disabled"))return;let _=jQuery("#acym__walkthrough__step_license__wait_active_cron_icon");_.removeClass("is-hidden");const e={ctrl:"dashboard",task:"stepLicenseActivateCron",licenseKey:jQuery("#acym__configuration__license-key").val()};acym_helper.post(ACYM_AJAX_URL,e).then(e=>{let a=document.getElementById("acym__walk_through_license__cron_label");e.error?(a.innerHTML=e.message,a.classList.remove("acym__color__green"),a.classList.add("acym__color__red")):(a.innerHTML=ACYM_JS_TXT.ACYM_ACTIVATED,a.classList.add("acym__color__green"),a.classList.remove("acym__color__red")),_.addClass("is-hidden")})}),function(){let e=_('input[name="config[mailer_method]"]');e.on("change",function(){_(".send_settings").hide();let e=_('input[name="config[mailer_method]"]:checked').val();const a=_(`#${e}_settings`);a.length>0&&(a.show(),jQuery("#acym__selection__button-select").removeAttr("disabled"))}),e.trigger("change")}(),_("#acym__walk-through-1__content__toggle-reply-to__checkbox").off("change").on("change",function(){_(".acym__walk-through-1__content__reply-to").toggle()}),_("#acym__subscribe__news").on("click",function(){let e=_('input[type="email"]').val();if(!acym_helper.emailValid(e))return alert(ACYM_JS_TXT.email),!1;_(this).attr("disabled","true");let a=AJAX_URL_UPDATEME+"subscription&task=subscribe&email="+e+"&cms="+ACYM_CMS;_.get(a),_(".acy_button_submit").trigger("click")}),e(),_("#acym__walkthrough__list__new").on("click",function(){_(this).hide(),_("#acym__walkthrough__list__add-zone").show(),_("#acym__walkthrough__list__new-address").focus()}),_("#acym__walkthrough__list__add").on("click",function(){let a=_("#acym__walkthrough__list__new-address"),t=a.val();if(!acym_helper.emailValid(t))return alert(ACYM_JS_TXT.email),!1;{let c='<input type="hidden" name="addresses[]" value="'+t+'"/>'+t,i='<i class="acymicon-remove acym__walkthrough__list__receivers__remove"></i>';_("#acym__walkthrough__list__receivers").append("<tr><td>"+c+"</td><td>"+i+"</td></tr>"),a.val(""),_("#acym__walkthrough__list__add-zone").hide(),_("#acym__walkthrough__list__new").show(),e()}}),_("#acym__walkthrough__list__new-address").on("keypress",function(e){if("Enter"===e.key)return _("#acym__walkthrough__list__add").trigger("click"),!1}),_("#acym__walkthrough__skip__fail").off("click").on("click",function(){_("[required]").removeAttr("required"),_('[type="email"]').attr("type","text"),_("#acym__walkthrough__skip").trigger("click")}),_(".acym__walkthrough__result__choice__one").off("click").on("click",function(){if(_(this).hasClass("selected"))return!0;_(".acym__walkthrough__result__choice__one").removeClass("selected"),_(this).addClass("selected"),"acym__walkthrough__result__choice__no"===_(this).attr("id")?_("#acym__walkthrough__result__spam").addClass("visible"):_("#acym__walkthrough__result__spam").removeClass("visible"),_('input[name="result"]').val(_(this).attr("data-value")),_('[data-task="saveStepResult"]').attr("disabled",!1)}),function(){const _=jQuery("#acym__walkthrough__acymailer__domain__cname");if(0===_.find(".acym__listing__row .acymicon-circle-o-notch").length)return;const e=jQuery("#acym__walkthrough__acymailer__domain").val();if(acym_helper.empty(e))return;const a=jQuery("#acym__configuration__acymailer__add__error");a.hide();const t={oneDomain:e,ctrl:"dynamics",task:"trigger",plugin:"plgAcymAcymailer",trigger:"ajaxAddDomain"};acym_helper.post(ACYM_AJAX_URL,t).then(e=>{if(e.error)return _.hide(),jQuery("#acym__configuration__acymailer__add__error__message").text(e.message),void a.css("display","flex");jQuery(".acym__listing__row").hide(),e.data.cnameRecords.forEach(function(e){_.append(`\n                    <div class="grid-x cell acym__listing__row">\n                        <div class="grid-x medium-6 cell">\n                            ${e.name}\n                        </div>\n                        <div class="grid-x medium-6 cell">\n                            ${e.value}\n                        </div>\n                    </div>`)})})}(),jQuery("#acym__walkthrough__acymailer__domain_status_reload").off("click").on("click",function(){const _=jQuery("#acym__walkthrough__acymailer__domain").val();if(acym_helper.empty(_))return;const e=jQuery("#acym__walkthrough__acymailer__domain_status");e.html('<i class="acymicon-circle-o-notch acymicon-spin"></i>'),acym_helper.get(ACYM_AJAX_URL,{sendingMethod:"acymailer",ctrl:"dynamics",task:"trigger",plugin:"plgAcymAcymailer",trigger:"ajaxCheckDomain"}).then(a=>{a.error?e.text(a.message):(Object.entries(a.data.domains).forEach(([a,t])=>{if(a!==_)return;let c,i;"SUCCESS"===t.status?(c="acymicon-check-circle acym__color__green",i=ACYM_JS_TXT.ACYM_WALK_ACYMAILER_STATUS_SUCCESS,jQuery("#acym__walkthrough__acymailer__domain_status_reload").parent().hide(),jQuery("#acym__selection__button-select").removeAttr("disabled")):"FAILED"===t.status?(c="acymicon-remove acym__color__red",i=ACYM_JS_TXT.ACYM_WALK_ACYMAILER_STATUS_FAIL,jQuery("#acym__walkthrough__acymailer__domain_status_reload").hide()):(c="acymicon-access_time acym__color__orange",i=ACYM_JS_TXT.ACYM_WALK_ACYMAILER_STATUS_WAIT),e.html(`<i class="${c} padding-right-1"></i>${i}`)}),e.find(".acymicon-circle-o-notch").length>0&&e.html(ACYM_JS_TXT.ACYM_ERROR))})}),acym_helperEditorWysid.initEditor(),acym_helperMailer.setTestCredentialsSendingMethods(),acym_helperMailer.setButtonCopyFromPlugin(),acym_helperMailer.setSynchroExistingUsers(),acym_helperSelectionPage.setSelectionElement(!0,!1,void 0,"#acym__selection__button-select"),acym_helperMailer.dislayAuth2Params(),acym_helperMailer.acymailerAddDomains(),acym_helperMailer.displayCnameRecord(),acym_helperMailer.deleteDomain(),_.walkthroughList=function(){return 0!==_(".acym__walkthrough__list__receivers__remove").length||(alert(ACYM_JS_TXT.ACYM_AT_LEAST_ONE_USER),!1)}});