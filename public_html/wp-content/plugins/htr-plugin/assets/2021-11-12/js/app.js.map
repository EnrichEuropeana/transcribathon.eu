{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/DetailView/DetailImageEditViewer.vue?cabe","webpack:///./src/utils/openseadragon-svg-overlay.js","webpack:///./src/components/Editor/RegionNode.vue?5e30","webpack:///./src/App.vue?9448","webpack:///./src/views/Editor.vue?bb31","webpack:///./src/components/DetailView/TranscriptionInterfaceLocal.vue?a8ef","webpack:///./src/components/DetailView/DetailEditLayout.vue?6cb6","webpack:///src/components/DetailView/DetailEditLayout.vue","webpack:///./src/components/DetailView/DetailEditLayout.vue?dd19","webpack:///./src/components/DetailView/DetailEditLayout.vue?0c91","webpack:///./src/components/DetailView/DetailContentEdit.vue?426e","webpack:///./src/components/DetailView/DetailContentLayout.vue?63e3","webpack:///./src/components/DetailView/DetailContentLayout.vue","webpack:///./src/components/DetailView/DetailContentTextEdit.vue?52bb","webpack:///./src/components/Editor/RegionNode.vue?9f6f","webpack:///src/components/Editor/RegionNode.vue","webpack:///./src/components/Editor/RegionNode.vue?05ea","webpack:///./src/components/Editor/RegionNode.vue?c8c0","webpack:///./src/components/Editor/RegionExtension.js","webpack:///./src/components/Editor/LineNode.vue?c0b0","webpack:///src/components/Editor/LineNode.vue","webpack:///./src/components/Editor/LineNode.vue?3fc7","webpack:///./src/components/Editor/LineNode.vue?25ff","webpack:///./src/components/Editor/LineExtension.js","webpack:///./src/components/Editor/TagExtension.js","webpack:///./src/components/Editor/SubscriptExtension.js","webpack:///./src/components/Editor/SuperscriptExtension.js","webpack:///./src/config/index.js","webpack:///./src/utils/xml.js","webpack:///./src/utils/api.js","webpack:///src/components/DetailView/DetailContentTextEdit.vue","webpack:///./src/components/DetailView/DetailContentTextEdit.vue?7c02","webpack:///./src/components/DetailView/DetailContentTextEdit.vue?80c0","webpack:///src/components/DetailView/DetailContentEdit.vue","webpack:///./src/components/DetailView/DetailContentEdit.vue?389d","webpack:///./src/components/DetailView/DetailContentEdit.vue","webpack:///./src/components/DetailView/DetailImageEditViewer.vue?b1a6","webpack:///./src/mixins/image.js","webpack:///./src/components/vue-openseadragon.vue?afb9","webpack:///src/components/vue-openseadragon.vue","webpack:///./src/components/vue-openseadragon.vue?f2f4","webpack:///./src/components/vue-openseadragon.vue","webpack:///src/components/DetailView/DetailImageEditViewer.vue","webpack:///./src/components/DetailView/DetailImageEditViewer.vue?0808","webpack:///./src/components/DetailView/DetailImageEditViewer.vue?666a","webpack:///src/components/DetailView/TranscriptionInterfaceLocal.vue","webpack:///./src/components/DetailView/TranscriptionInterfaceLocal.vue?8f55","webpack:///./src/components/DetailView/TranscriptionInterfaceLocal.vue","webpack:///src/views/Editor.vue","webpack:///./src/views/Editor.vue?115f","webpack:///./src/views/Editor.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue?180a","webpack:///./src/plugins/fontawesome.js","webpack:///./src/store/detail/index.js","webpack:///./src/store/browse/index.js","webpack:///./src/store/content/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/App.vue?df62","webpack:///./src/components/DetailView/DetailEditLayout.vue?7b2d","webpack:///./src/components/DetailView/DetailContentTextEdit.vue?66d3","webpack:///./src/components/DetailView/DetailContentTextEdit.vue?143e","webpack:///./src/components/Editor/LineNode.vue?b80b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","$","OpenSeadragon","require","Error","svgNS","Viewer","svgOverlay","this","_svgOverlayInfo","Overlay","viewer","self","_viewer","_containerWidth","_containerHeight","_svg","document","createElementNS","style","position","left","top","width","height","canvas","appendChild","_node","addHandler","resize","evt","node","container","clientWidth","setAttribute","clientHeight","viewport","pixelFromPoint","Point","zoom","getZoom","rotation","getRotation","scale","_containerInnerSize","x","y","onClick","handler","MouseTracker","element","clickHandler","setTracking","render","_vm","_h","$createElement","_c","_self","attrs","iiifUrl","toJsonObject","xmlJson","staticRenderFns","staticClass","view","scopedSlots","_u","fn","ref","imageInfo","parsedJson","results","_e","proxy","staticStyle","_t","components","computed","props","type","String","validator","includes","component","script","isLoading","model","callback","$$v","expression","isAnnotation","_v","layoutIcon","on","setEditLayout","$event","editor","chain","focus","undo","run","redo","saveContent","tagDefs","class","isActive","toggleStrike","toggleUnderline","toggleSub","toggleSuper","_l","definitions","tag","index","color","setAttributes","_s","label","selectedTag","tempTag","findTagAttributes","attribute","changeContinued","attributes","$set","selectParentNode","unsetMark","NodeViewWrapper","NodeViewContent","selectable","Node","group","content","addAttributes","lines","default","parseHTML","renderHTML","HTMLAttributes","mergeAttributes","addNodeView","VueNodeViewRenderer","Component","line","onMouseClick","id","onMouseOut","onMouseOver","methods","highlight","$store","dispatch","target","origin","select","addProseMirrorPlugins","Plugin","handleKeyDown","event","which","state","deleting","filterTransaction","transaction","mapping","maps","forEach","map","oldStart","oldEnd","newStart","newEnd","doc","nodesBetween","number","pos","parent","addKeyboardShortcuts","Enter","selectNodeForward","selection","lineId","el","getElementById","scrollIntoView","behavior","tagExtensions","tagIndex","tagExtensionArr","tempExtension","Highlight","extend","commands","toggleBulletList","addCommands","setTag","setMark","toggleTag","tr","toggleMark","unsetTag","annotationId","getAttribute","backgroundColor","options","Subscript","Mark","defaultOptions","consuming","getAttrs","setSub","unsetSub","Superscript","setSuper","unsetSuper","urls","image","xml","hashidsSecret","token","transcriptionURL","searchApiBaseUrl","apiBaseUrl","contactEmail","bugEmail","bugtrackerUrl","repo","consentCookie","recordSession","xml2js","json2xml","jp","XML2JS","DEFAULT","compact","trim","alwaysArray","alwaysChildren","attributeValueFn","parseAttributeValue","TEST","parsePointsAttribute","string","split","parseInt","reverseParsePointsAttribute","values","pointString","point","points","temp","replace","parseCustomAttribute","reduce","indexOf","concat","decodeURIComponent","JSON","parse","Boolean","reverseParseparseCustomAttribute","customString","custom","stringify","replaceAll","reverseParseAttributeValue","imgUrl","getObjects","obj","val","objects","lastIndexOf","replaceLine","textString","customObjArr","elementArr","elements","text","parseEditorOutput","editorJson","globalJson","editorLineArr","lineIndex","contentIndex","undefined","lineContent","marks","markIndex","mark","offset","strikethrough","underlined","subscript","superscript","parseToXML","json","ignoreComment","spaces","sanitize","attributesFn","parseJsonContent","search","PcGts","Page","parsePageContent","js","xmlModel","fetch","logOut","$auth","loginWith","fetchSearchResults","term","documents","titles","page","fuzziness","limit","$nuxt","$axios","method","body","collections","collection","headers","CONTENT_TYPE","Accept","res","status","fetchTagDef","collId","fetchDocumentsMeta","docId","params","nrOfTranscripts","fetchPageContentXML","fetchPageInfo","pageNr","groupBy","filters","item","clean","watch","selected","newValue","oldValue","nodes","docView","descendants","deep","TextAlign","EditorContent","BubbleMenu","required","editorContentJson","annotationCounter","lastTag","hasContent","contentData","linetemp","hasTag","tags","getTags","editLayoutHorizontal","continued","continuedTags","findMarkByUid","from","to","found","filter","annotations","find","contentObj","getNodeAttributes","tagObj","openToast","$buefy","toast","open","duration","message","groupByRow","table","getTagDef","beforeDestroy","destroy","setEditorContentJSON","tagContent","setTagContent","editorContent","groupedRows","rowContent","row","cellContent","rowtemp","cell","celltemp","lineObjects","lineObj","regionObj","setContent","arrText","stringOffset","findTags","tagTemp","textStyles","setTextStyles","textStyle","tagDef","tagMark","bold","textStyleArr","indexes","sort","unshift","str","substring","lineText","tagtext","substr","textStyleClass","classString","$refs","Layout","ContentTextEdit","onOpen","imageBaseUrl","config","getPaddedRect","padding","getImageInfo","getImageSource","getScaledSource","getThumbnailSource","getContextImageSource","toRect","getRoundedRect","rect","round","getIntersectionRatio","r1","r2","dx","Math","min","max","dy","getScaledRect","rounded","w","getScaledPoints","console","log","test","i18n","messages","mounted","$nextTick","setup","translate","_options","tileSources","addOnceHandler","resolve","_cursor","setString","panTo","fitBoundsWithConstraints","addOverlay","mixins","source","Number","Array","selectLayoutElement","fitBounds","highlighted","zoomPerClick","prefixUrl","maxZoomLevel","showZoomControl","showHomeControl","showFullPageControl","visibilityRatio","destroyed","openseadragon","svgNode","innerHTML","setHome","layoutElements","renderLayout","overlays","selectedOverlayIndex","gestureSettingsMouse","clickToZoom","newBounds","viewportAspect","isAnimated","delta","zoomBy","applyConstraints","activeNode","classList","add","selectWithPan","overlay","svg","attr","geometry","pointsTemp","coords","elementGroup","className","assign","highlightLayoutElement","highlightedLayoutElement","contains","renderPolygon","createOverlays","d3","d3Rect","clear","remove","sanitizeScore","score","DetailEditLayout","Content","ImageViewer","TranscriptionInterfaceLocal","xmlJsonString","escapeSpecialChars","Editor","cleanedString","install","Vue","library","faSearch","faAngleRight","faAngleLeft","faAngleUp","faAngleDown","faMinusSquare","faPlusSquare","faChevronLeft","faChevronRight","faChevronUp","faChevronDown","faFileAlt","faTimes","faArrowUp","faArrowDown","faPlus","faMinus","faTrash","faDesktop","faColumns","faImage","faCode","faEye","faPaperPlane","faCheck","faShoppingCart","faDownload","faEyeSlash","faTags","faCaretDown","faCaretUp","faAlignLeft","faImages","faObjectGroup","faQuestion","faQuestionCircle","faExternalLinkAlt","faUndo","faRedo","faBars","faSave","faStrikethrough","faUnderline","faSubscript","faSuperscript","faTag","FontAwesomeIcon","title","colTitle","maxPage","NaN","documentInfo","isDocumentReady","isDocumentNotFoundError","pageId","pageNum","pageInfo","pageContentId","tsList","tsKey","isPageReady","isPageContentReady","isPageNotFoundError","isPageContentNotFoundError","requestCount","tagMode","changed","getters","rootState","hasResults","mutations","update","beginRequest","endRequest","actions","commit","routeParams","docid","collectionid","pageid","fetchDocumentInfo","collectionList","colList","colId","nrOfPages","transcripts","fetchPageContent","freeze","namespaced","colRole","deepEqual","setCollections","setTagDefs","setDocuments","setColTitle","setColRole","isError","isReady","wasSaved","wasEdited","reset","isready","setSelectedTag","setXmlModel","findElementById","stack","pop","use","Vuex","Store","browse","detail","strict","process","productionTip","fontawesome","Buefy","defaultIconComponent","defaultIconPack","root_element","AppRoot","App","store","propsData","dataset","$root","$on","save","output","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,IAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,0oHCvJT,W,+CCEA,WAEI,IAAIyC,EAAIH,OAAOI,cAEf,IAAKD,IACDA,EAAIE,EAAQ,SACPF,GACD,MAAM,IAAIG,MAAM,6BAIxB,IAAIC,EAAQ,6BAGZJ,EAAEK,OAAOxD,UAAUyD,WAAa,WAC5B,OAAIC,KAAKC,kBAITD,KAAKC,gBAAkB,IAAIC,EAAQF,OAHxBA,KAAKC,iBAQpB,IAAIC,EAAU,SAASC,GACnB,IAAIC,EAAOJ,KAEXA,KAAKK,QAAUF,EACfH,KAAKM,gBAAkB,EACvBN,KAAKO,iBAAmB,EAExBP,KAAKQ,KAAOC,SAASC,gBAAgBb,EAAO,OAC5CG,KAAKQ,KAAKG,MAAMC,SAAW,WAC3BZ,KAAKQ,KAAKG,MAAME,KAAO,EACvBb,KAAKQ,KAAKG,MAAMG,IAAM,EACtBd,KAAKQ,KAAKG,MAAMI,MAAQ,OACxBf,KAAKQ,KAAKG,MAAMK,OAAS,OACzBhB,KAAKK,QAAQY,OAAOC,YAAYlB,KAAKQ,MAErCR,KAAKmB,MAAQV,SAASC,gBAAgBb,EAAO,KAC7CG,KAAKQ,KAAKU,YAAYlB,KAAKmB,OAE3BnB,KAAKK,QAAQe,WAAW,aAAa,WACjChB,EAAKiB,YAGTrB,KAAKK,QAAQe,WAAW,QAAQ,WAC5BhB,EAAKiB,YAGTrB,KAAKK,QAAQe,WAAW,UAAU,SAASE,GACvClB,EAAKiB,YAGTrB,KAAKK,QAAQe,WAAW,UAAU,WAC9BhB,EAAKiB,YAGTrB,KAAKqB,UAITnB,EAAQ5D,UAAY,CAEhBiF,KAAM,WACF,OAAOvB,KAAKmB,OAIhBE,OAAQ,WACArB,KAAKM,kBAAoBN,KAAKK,QAAQmB,UAAUC,cAChDzB,KAAKM,gBAAkBN,KAAKK,QAAQmB,UAAUC,YAC9CzB,KAAKQ,KAAKkB,aAAa,QAAS1B,KAAKM,kBAGrCN,KAAKO,mBAAqBP,KAAKK,QAAQmB,UAAUG,eACjD3B,KAAKO,iBAAmBP,KAAKK,QAAQmB,UAAUG,aAC/C3B,KAAKQ,KAAKkB,aAAa,SAAU1B,KAAKO,mBAG1C,IAAInB,EAAIY,KAAKK,QAAQuB,SAASC,eAAe,IAAIpC,EAAEqC,MAAM,EAAG,IAAI,GAC5DC,EAAO/B,KAAKK,QAAQuB,SAASI,SAAQ,GACrCC,EAAWjC,KAAKK,QAAQuB,SAASM,cAEjCC,EAAQnC,KAAKK,QAAQuB,SAASQ,oBAAoBC,EAAIN,EAC1D/B,KAAKmB,MAAMO,aAAa,YACpB,aAAetC,EAAEiD,EAAI,IAAMjD,EAAEkD,EAAI,WAAaH,EAAQ,YAAcF,EAAW,MAIvFM,QAAS,SAAShB,EAAMiB,GAGpB,IAAI/C,EAAEgD,aAAa,CACfC,QAASnB,EACToB,aAAcH,IACfI,aAAY,MAhG3B,I,oCCFA,W,yJCAIC,EAAS,WAAa,IAAIC,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAAEL,EAAiB,cAAEG,EAAG,SAAS,CAACE,MAAM,CAAC,QAAUL,EAAIM,QAAQ,QAAUN,EAAIO,gBAAgBJ,EAAG,SAAS,CAACE,MAAM,CAAC,QAAUL,EAAIM,QAAQ,QAAUN,EAAIQ,YAAY,IAC3RC,EAAkB,GCDlB,EAAS,WAAa,IAAIT,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACO,YAAY,kCAAkC,CAACP,EAAG,8BAA8B,CAACE,MAAM,CAAC,QAAUL,EAAIM,QAAQ,QAAUN,EAAIQ,YAAY,IAClP,EAAkB,GCDlB,EAAS,WAAa,IAAIR,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACO,YAAY,kCAAkC,CAACP,EAAG,mBAAmB,CAACE,MAAM,CAAC,KAAOL,EAAIW,MAAMC,YAAYZ,EAAIa,GAAG,CAAC,CAAC5E,IAAI,QAAQ6E,GAAG,WAAW,MAAO,CAAEd,EAAa,UAAEG,EAAG,cAAc,CAACY,IAAI,SAASV,MAAM,CAAC,OAASL,EAAIM,QAAQ,MAAQN,EAAIgB,UAAU/C,MAAM,OAAS+B,EAAIgB,UAAU9C,OAAO,QAAU8B,EAAIiB,WAAW,QAAUjB,EAAIkB,WAAWlB,EAAImB,OAAOC,OAAM,GAAM,CAACnF,IAAI,UAAU6E,GAAG,WAAW,MAAO,CAACX,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,aAAa,QAAUL,EAAIiB,gBAAgBG,OAAM,QAAW,IACxkB,EAAkB,G,wBCDlB,EAAS,WAAa,IAAIpB,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACO,YAAY,eAAe,CAAEV,EAAwB,qBAAEG,EAAG,aAAa,CAACO,YAAY,gBAAgBL,MAAM,CAAC,WAAa,KAAK,CAACF,EAAG,OAAO,CAACkB,YAAY,CAAC,WAAa,OAAO,OAAS,OAAO,SAAW,WAAW,UAAU,MAAMhB,MAAM,CAAC,KAAO,OAAO,CAACL,EAAIsB,GAAG,UAAU,GAAGnB,EAAG,OAAO,CAACkB,YAAY,CAAC,WAAa,OAAO,SAAW,aAAa,CAACrB,EAAIsB,GAAG,YAAY,IAAI,GAAGnB,EAAG,aAAa,CAACO,YAAY,iBAAiB,CAACP,EAAG,OAAO,CAACkB,YAAY,CAAC,WAAa,OAAO,SAAW,WAAW,UAAU,MAAMhB,MAAM,CAAC,KAAO,OAAO,CAACL,EAAIsB,GAAG,UAAU,GAAGnB,EAAG,OAAO,CAACkB,YAAY,CAAC,WAAa,OAAO,SAAW,aAAa,CAACrB,EAAIsB,GAAG,YAAY,IAAI,IAAI,IAC1tB,EAAkB,G,soBCyEtB,OACEC,WAAY,CAAd,2CACEC,SAAU,EAAZ,GACA,oDAEEC,MAAO,CACLvG,KAAM,CACJwG,KAAMC,OACNC,UAAW,SAAjB,GACQ,MAAO,CAAC,OAAQ,QAAS,UAAW,QAAQC,SAASlG,OCnF4S,I,wBCQrWmG,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCnBX,EAAS,WAAa,IAAI9B,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACS,YAAYZ,EAAIa,GAAG,CAAC,CAAC5E,IAAI,SAAS6E,GAAG,aAA6BM,OAAM,GAAM,CAACnF,IAAI,SAAS6E,GAAG,aAA6BM,OAAM,MAAS,CAAC,CAACjB,EAAG,kBAAkB,CAACE,MAAM,CAAC,QAAUL,EAAIQ,aAAa,IAC9S,EAAkB,GCDlB,EAAS,WAAa,IAAIR,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACkB,YAAY,CAAC,QAAU,OAAO,YAAY,gBAAgB,OAAS,OAAO,SAAW,SAAS,MAAQ,SAAS,CAAClB,EAAG,MAAM,CAACH,EAAIsB,GAAG,WAAW,GAAGtB,EAAIsB,GAAG,WAAWtB,EAAIsB,GAAG,WAAW,IACzR,EAAkB,GCAlBS,EAAS,GAKT,EAAY,eACdA,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QCjBX,EAAS,WAAa,IAAI/B,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAQD,EAAU,OAAEG,EAAG,MAAM,CAACO,YAAY,SAASW,YAAY,CAAC,OAAS,OAAO,MAAQ,OAAO,KAAO,IAAI,SAAW,SAAS,CAAClB,EAAG,YAAY,CAACE,MAAM,CAAC,OAASL,EAAIgC,UAAU,gBAAe,GAAOC,MAAM,CAACtG,MAAOqE,EAAa,UAAEkC,SAAS,SAAUC,GAAMnC,EAAIgC,UAAUG,GAAKC,WAAW,eAAgBpC,EAAU,OAAEG,EAAG,MAAM,CAACO,YAAY,kBAAkB,CAACP,EAAG,WAAW,CAACkB,YAAY,CAAC,eAAe,SAAS,CAAClB,EAAG,WAAW,CAAC8B,MAAM,CAACtG,MAAOqE,EAAgB,aAAEkC,SAAS,SAAUC,GAAMnC,EAAIqC,aAAaF,GAAKC,WAAW,iBAAiB,CAACpC,EAAIsC,GAAG,mBAAmB,GAAGnC,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,cAAc,YAAYL,EAAIuC,cAAcC,GAAG,CAAC,MAAQxC,EAAIyC,iBAAiBtC,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,OAAO,YAAY,QAAQmC,GAAG,CAAC,MAAQ,SAASE,GAAQ1C,EAAI2C,OAAOC,QAAQC,QAAQC,OAAOC,UAAU5C,EAAG,WAAW,CAACkB,YAAY,CAAC,eAAe,QAAQhB,MAAM,CAAC,MAAQ,OAAO,YAAY,QAAQmC,GAAG,CAAC,MAAQ,SAASE,GAAQ1C,EAAI2C,OAAOC,QAAQC,QAAQG,OAAOD,UAAU5C,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,OAAO,KAAO,cAAcmC,GAAG,CAAC,MAAQxC,EAAIiD,cAAc,CAACjD,EAAIsC,GAAG,wBAAyBtC,EAAI2C,QAAU3C,EAAIqC,cAAgBrC,EAAIkD,QAAS/C,EAAG,KAAK,CAACO,YAAY,cAAcV,EAAImB,KAAMnB,EAAI2C,QAAU3C,EAAIqC,cAAgBrC,EAAIkD,QAAS/C,EAAG,MAAM,CAACO,YAAY,eAAe,CAACP,EAAG,WAAW,CAACgD,MAAM,CAAE,YAAanD,EAAI2C,OAAOS,SAAS,WAAY/C,MAAM,CAAC,MAAQ,SAAS,KAAO,aAAa,YAAY,iBAAiBmC,GAAG,CAAC,MAAQ,SAASE,GAAQ1C,EAAI2C,OAAOC,QAAQC,QAAQQ,eAAeN,UAAU5C,EAAG,WAAW,CAACgD,MAAM,CAAE,YAAanD,EAAI2C,OAAOS,SAAS,cAAe/C,MAAM,CAAC,MAAQ,YAAY,KAAO,aAAa,YAAY,aAAamC,GAAG,CAAC,MAAQ,SAASE,GAAQ1C,EAAI2C,OAAOC,QAAQC,QAAQS,kBAAkBP,UAAU5C,EAAG,WAAW,CAACgD,MAAM,CAAE,YAAanD,EAAI2C,OAAOS,SAAS,cAAe/C,MAAM,CAAC,MAAQ,YAAY,KAAO,aAAa,YAAY,aAAamC,GAAG,CAAC,MAAQ,SAASE,GAAQ1C,EAAI2C,OAAOC,QAAQC,QAAQU,YAAYR,UAAU5C,EAAG,WAAW,CAACgD,MAAM,CAAE,YAAanD,EAAI2C,OAAOS,SAAS,gBAAiB/C,MAAM,CAAC,MAAQ,cAAc,KAAO,aAAa,YAAY,eAAemC,GAAG,CAAC,MAAQ,SAASE,GAAQ1C,EAAI2C,OAAOC,QAAQC,QAAQW,cAAcT,UAAU/C,EAAIyD,GAAIzD,EAAIkD,QAAQQ,YAAuB,aAAE,SAASC,EAAIC,GAAO,OAAOzD,EAAG,WAAW,CAAClE,IAAI2H,EAAMT,MAAM,CACnyE,YAAanD,EAAI2C,OAAOS,SAASO,EAAIzI,KAAM,CACzC2I,MAAOF,EAAIE,SAEbhG,MAAO,oBAAsB8F,EAAIE,MAAOxD,MAAM,CAAC,YAAY,OAAOmC,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAO1C,EAAI8D,cAAcH,MAAQ,CAAC3D,EAAIsC,GAAG,aAAatC,EAAI+D,GAAGJ,EAAIK,OAAO,kBAAiB,GAAGhE,EAAImB,MAAM,GAAGnB,EAAImB,KAAKhB,EAAG,KAAK,CAACO,YAAY,cAAeV,EAAe,YAAEG,EAAG,MAAM,CAACA,EAAG,MAAM,CAACO,YAAY,iBAAiBW,YAAY,CAAC,aAAa,WAAWrB,EAAIyD,GAAIzD,EAAIiE,YAAiB,OAAE,SAASC,EAAQN,GAAO,OAAOzD,EAAG,MAAM,CAAClE,IAAI2H,EAAMlD,YAAY,WAAW,CAAEwD,EAAQ7D,MAAS,IAAEF,EAAG,MAAM,CAACO,YAAY,UAAU,CAACP,EAAG,QAAQ,CAACtC,MAAQ,kBAAqBqG,EAAQ7D,MAAW,MAAI,4CAA+C6D,EAAQ7D,MAAW,MAAI,oDAAsDA,MAAM,CAAC,YAAY,QAAQ,CAACL,EAAIsC,GAAG,iBAAiBtC,EAAI+D,GAAGG,EAAQ7D,MAAMsD,IAAIzI,MAAM,mBAAmB,GAAG8E,EAAImB,KAAKnB,EAAIyD,GAAIzD,EAAImE,kBAAkBD,IAAU,SAASE,EAAUhL,GAAG,OAAO+G,EAAG,MAAM,CAAClE,IAAI7C,EAAEsH,YAAY,UAAU,CAAEwD,EAAQ7D,MAAS,IAAEF,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQ+D,EAAU,iBAAiB,cAAc,CAACjE,EAAG,UAAU,CAACqC,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAO1C,EAAIqE,gBAC9hCH,EACAA,EAAQ7D,MAAMsD,IAAIW,WAAWF,GAC7BA,KACEnC,MAAM,CAACtG,MAAOuI,EAAQ7D,MAAMsD,IAAIW,WAAWF,GAAYlC,SAAS,SAAUC,GAAMnC,EAAIuE,KAAKL,EAAQ7D,MAAMsD,IAAIW,WAAYF,EAAWjC,IAAMC,WAAW,8CAA8C,GAAGpC,EAAImB,MAAM,MAAM+C,EAAQ7D,MAAS,IAAEF,EAAG,MAAM,CAACO,YAAY,UAAU,CAACP,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,SAAS,YAAY,SAASmC,GAAG,CAAC,MAAQ,SAASE,GAAQ1C,EAAI2C,OACvWC,QACAC,QACA2B,mBACAC,UAAUP,EAAQxC,MAClBqB,SAAS,CAAC/C,EAAIsC,GAAG,uCAAuC,GAAGtC,EAAImB,MAAM,MAAK,KAAKnB,EAAImB,KAAKhB,EAAG,iBAAiB,CAACO,YAAY,kBAAkBW,YAAY,CAAC,aAAa,UAAUhB,MAAM,CAAC,OAASL,EAAI2C,WAAW,GAAG3C,EAAImB,MAClO,EAAkB,G,oJCdlB,EAAS,WAAa,IAAInB,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,oBAAoB,CAACO,YAAY,UAAU,CAACP,EAAG,oBAAoB,CAACO,YAAY,aAAa,IAC5L,EAAkB,GCStB,GACEa,WAAY,CACVmD,gBAAJ,OACIC,gBAAJ,QAGElD,MAAO,EAAT,KAEEmD,YAAY,GClBqV,ICQ/V,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCfAC,SAAK7I,OAAO,CACzBd,KAAM,SAEN4J,MAAO,QAEPC,QAAS,mBAETC,cAPyB,WAQvB,MAAO,CACLC,MAAO,CACLC,QAAS,MAKfC,UAfyB,WAgBvB,MAAO,CACL,CACExB,IAAK,SAKXyB,WAvByB,YAuBM,IAAlBC,EAAkB,EAAlBA,eACX,MAAO,CAAC,MAAOC,eAAgBD,KAGjCE,YA3ByB,WA4BvB,OAAOC,eAAoBC,MChC3B,EAAS,WAAa,IAAIzF,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAQ/C,KAAKuB,KAAK4B,MAAMqF,KAAe,WAAEvF,EAAG,oBAAoB,CAACO,YAAY,QAAQ,CAACP,EAAG,MAAM,CAACqC,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAO1C,EAAI2F,aAAa3F,EAAIvB,KAAK4B,MAAMqF,KAAKpB,WAAWsB,KAAK,SAAW,SAASlD,GAAQ,OAAO1C,EAAI6F,WAAW7F,EAAIvB,KAAK4B,MAAMqF,KAAKpB,WAAWsB,KAAK,UAAY,SAASlD,GAAQ,OAAO1C,EAAI8F,YAAY9F,EAAIvB,KAAK4B,MAAMqF,KAAKpB,WAAWsB,OAAO,CAACzF,EAAG,oBAAoB,CAACE,MAAM,CAAC,GAAKnD,KAAKuB,KAAK4B,MAAMqF,KAAKpB,WAAWsB,OAAO,KAAK5F,EAAImB,MACnhB,EAAkB,GCuBtB,GACEI,WAAY,CACVmD,gBAAJ,OACIC,gBAAJ,QAEEoB,QAAS,CACPC,UADJ,SACA,GACM9I,KAAK+I,OAAOC,SAAS,oBAAqB,CACxCC,OAAQP,EACRQ,OAAQ,aAGZC,OAPJ,SAOA,GACMnJ,KAAK+I,OAAOC,SAAS,iBAAkB,CACrCC,OAAQP,EACRQ,OAAQ,aAGZN,YAbJ,SAaA,GACM5I,KAAK8I,UAAUJ,IAEjBC,WAhBJ,SAgBA,GACM3I,KAAK8I,UAAUJ,IAEjBD,aAnBJ,SAmBA,GACMzI,KAAKmJ,OAAOT,KAIhBnE,MAAO,EAAT,MCrDiW,ICQ7V,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,oBCbAoD,UAAK7I,OAAO,CACzBd,KAAM,OAEN4J,MAAO,SAGPC,QAAS,WACTC,cAPyB,WAQvB,MAAO,CACLU,KAAM,CACJR,QAAS,MAIfoB,sBAdyB,WAevB,MAAO,CACL,IAAIC,OAAO,CACT9E,MAAO,CACL+E,cAAe,SAAC7F,EAAM8F,GAKpB,OAJoB,IAAhBA,EAAMC,OAA+B,KAAhBD,EAAMC,QAC7B/F,EAAKgG,MAAMC,UAAW,IAGjB,IAIXC,kBAAmB,SAACC,EAAaH,GACdA,EAAMC,SAEvB,IAAKD,EAAMC,SACT,OAAO,EAGT,IAAIzM,GAAS,EAgBb,OAdA2M,EAAYC,QAAQC,KAAKC,SAAQ,SAACC,GAChCA,EAAID,SAAQ,SAACE,EAAUC,EAAQC,EAAUC,GACvCX,EAAMY,IAAIC,aACRL,EACAC,GACA,SAAC3I,EAAMgJ,EAAQC,EAAKC,EAAQ/D,GACH,SAAnBnF,EAAKiD,KAAKxG,OACZf,GAAS,YAOZA,OAKfyN,qBAvDyB,WAuDF,WACrB,MAAO,CACLC,MAAO,SAAClB,EAAOT,EAAUvF,GAGvB,GAFA,EAAKgC,OAAOC,QAAQC,QAAQiF,oBAAoB/E,MAE5C,EAAKJ,OAAOgE,MAAMoB,UAAUtJ,KAAM,CACpC,IAAIuJ,EACF,EAAKrF,OAAOgE,MAAMoB,UAAUtJ,KAAK4B,MAAMqF,KAAKpB,WAAWsB,GACnDqC,EAAKtK,SAASuK,eAAeF,GACnCC,EAAGE,eAAe,CAAEC,SAAU,WAGhC,OAAO,KAKbjD,UAxEyB,WAyEvB,MAAO,CACL,CACExB,IAAK,SAKXyB,WAhFyB,YAgFM,IAAlBC,EAAkB,EAAlBA,eACX,MAAO,CAAC,MAAOC,eAAgBD,KAGjCE,YApFyB,WAqFvB,OAAOC,eAAoBC,M,8ECvFxB,SAAe4C,GAAtB,mC,gEAAO,WAA6BnF,GAA7B,6FAEL,IAASoF,KADLC,EAAkB,GACDrF,EACfS,EAAMT,EAAQoF,GACdE,EAAgBC,QAAUC,OAAO,CACnCxN,KAAMyI,EAAIzI,KACV0M,qBAFmC,WAEZ,WACrB,MAAO,CACL,QAAS,kBAAM,EAAKjF,OAAOgG,SAASC,sBAGxCC,YAPmC,WAQjC,MAAO,CACLC,OACE,kBACA,YAAkB,IAAfH,EAAe,EAAfA,SACD,OAAOA,EAASI,QAAQpF,EAAIzI,QAEhC8N,UACE,SAAC1E,GAAD,OACA,YAAuC,IAApCqE,EAAoC,EAApCA,SAAoC,EAA1BM,GAA0B,EAAtBtC,MAAsB,EAAfT,SACtB,OAAOyC,EAASO,WAAW5E,EAAWpJ,KAAMoJ,KAEhD6E,SACE,kBACA,YAAkB,IAAfR,EAAe,EAAfA,SACD,OAAOA,EAASlE,UAAUd,EAAIzI,UAItC8J,cA1BmC,WA4BjC,MAAO,CACLrB,IAAK,CACHuB,QAAS,IAEXkE,aAAc,CACZlE,QAAS,MAEXrB,MAAO,CACLqB,QAASvB,EAAIE,MACbsB,UAAW,SAACvF,GACV,MAAO,CACL,CACEiE,MACEjE,EAAQyJ,aAAa,eACrBzJ,EAAQ/B,MAAMyL,iBAElB,CACE3F,IAAKA,EAAIzI,QAIfkK,WAAY,SAACd,GACX,OAAKA,EAAWT,MAIT,CACL,aAAcS,EAAWT,MACzBhG,MAAO,kBAAF,OAAoByG,EAAWT,MAA/B,oCACLV,MAAO,OANA,OAgBjBiC,WAnEmC,YAmEJ,IAAlBC,EAAkB,EAAlBA,eACX,MAAO,CACL,IACAC,eAAgBpI,KAAKqM,QAAQlE,eAAgBA,GAC7C,MAINkD,EAAgB3O,KAAK4O,GA/ElB,yBAkFED,GAlFF,2C,yBCIA,IAAMiB,GAAYC,OAAKzN,OAAO,CACnCd,KAAM,YAENwO,eAAgB,CACdrE,eAAgB,IAGlBF,UAPmC,WAQjC,MAAO,CACL,CACExB,IAAK,aAEP,CACEA,IAAK,OAEP,CACEA,IAAK,aAEP,CACE9F,MAAO,kBACP8L,WAAW,EACXC,SAAU,SAAC/L,GAAD,QAAYA,EAAMgE,SAAS,iBAAkB,OAK7DuD,WA1BmC,YA0BJ,IAAlBC,EAAkB,EAAlBA,eACX,MAAO,CACL,MACAC,eAAgBpI,KAAKqM,QAAQlE,eAAgBA,GAC7C,IAIJwD,YAlCmC,WAmCjC,MAAO,CACLgB,OACE,kBACA,YAAkB,IAAflB,EAAe,EAAfA,SACD,OAAOA,EAASI,QAAQ,eAE5BxF,UACE,kBACA,YAAkB,IAAfoF,EAAe,EAAfA,SACD,OAAOA,EAASO,WAAW,eAE/BY,SACE,kBACA,YAAkB,IAAfnB,EAAe,EAAfA,SACD,OAAOA,EAASlE,UAAU,mBCjDvBsF,GAAcN,OAAKzN,OAAO,CACrCd,KAAM,cAENwO,eAAgB,CACdrE,eAAgB,IAGlBF,UAPqC,WAQnC,MAAO,CACL,CACExB,IAAK,eAEP,CACEA,IAAK,OAEP,CACEA,IAAK,eAEP,CACE9F,MAAO,kBACP8L,WAAW,EACXC,SAAU,SAAC/L,GAAD,QAAYA,EAAMgE,SAAS,iBAAkB,OAK7DuD,WA1BqC,YA0BN,IAAlBC,EAAkB,EAAlBA,eACX,MAAO,CACL,MACAC,eAAgBpI,KAAKqM,QAAQlE,eAAgBA,GAC7C,IAIJwD,YAlCqC,WAmCnC,MAAO,CACLmB,SACE,kBACA,YAAkB,IAAfrB,EAAe,EAAfA,SACD,OAAOA,EAASI,QAAQ,iBAE5BvF,YACE,kBACA,YAAkB,IAAfmF,EAAe,EAAfA,SACD,OAAOA,EAASO,WAAW,iBAE/Be,WACE,kBACA,YAAkB,IAAftB,EAAe,EAAfA,SACD,OAAOA,EAASlE,UAAU,qB,aCzDrB,IAGbyF,KAAM,CACJC,MAAO,sCACPC,IAAK,wCAEPC,cAAe,OACfC,MAAO,GACPC,iBAAkB,wDAClBC,iBAAkB,mDAClBC,WAAY,+CACZC,aAAc,mBACdC,SAAU,mBACVC,cACE,sFACFC,KAAM,4DACNC,cAAe,iBACfC,eAAe,G,yBClBjB,GAA6BlO,EAAQ,QAA7BmO,GAAR,GAAQA,OAAQC,GAAhB,GAAgBA,SACVC,GAAKrO,EAAQ,QAGbsO,IAFWtO,EAAQ,QAEV,CACbuO,QAAS,CACPC,SAAS,EACTC,MAAM,EACNC,aAAa,EACbC,gBAAgB,EAChBC,iBAAkBC,IAEpBC,KAAM,CACJN,SAAS,EACTI,iBAAkBC,MAMtB,SAASE,KAAkC,IAAbC,EAAa,uDAAJ,GACrC,OAAOA,EACNC,MAAM,OACN5E,KAAI,SAAA2E,GAAM,OAAIA,EAAOC,MAAM,WAAW5E,KAAI,SAAA3H,GAAC,OAAIwM,SAASxM,SACxD2H,KAAI,sCAAE3H,EAAF,KAAKC,EAAL,WAAa,CAAED,IAAGC,QAUzB,SAASwM,GAA4BC,GACnC,IAAIC,EAAc,GAClB,IAAK,IAAIC,KAASF,EAAOG,OAAQ,CAC/B,IAAIC,EAAOJ,EAAOG,OAAOD,GACzBD,GAAeG,EAAK9M,EAAI,IAAM8M,EAAK7M,EAAI,IAEzCyM,EAAOG,OAASF,EAAYI,QAAQ,OAAQ,IAG9C,SAASC,GAAqBV,GAC5B,MAAe,KAAXA,EAAsB,GAEnBA,EAAOC,MAAM,MAAMU,QAAO,SAACtL,EAAS2K,GACzC,IAKI5P,EAAKN,EALHT,EAAO2Q,EAAOC,MAAM,MAAM,GAC5BzL,EAAQwL,EAAOC,MAAM,MAAM,GAM/B,OAJIzL,EAAMoM,QAAQ,OAAMpM,EAAQA,EAAMiM,QAAQ,IAAK,KAI5CpL,EAAQwL,OAAO,CACpBxR,KAAMA,EAAKoQ,OACXhH,WAAYjE,EAAMyL,MAAM,KAAKU,QAAO,SAACnM,EAAOwL,GAqB1C,OApBAA,EAASA,EAAOP,OACZO,IACF5P,EAAM4P,EAAOC,MAAM,KAAK,GAAGR,OAC3B3P,EAAQgR,mBACNC,KAAKC,MACH,IAAMhB,EAAOC,MAAM,KAAK,GAAGR,OAAOgB,QAAQ,IAAK,OAAS,MAI1DjM,EAAMpE,GADI,UAARA,GAA2B,WAARA,GAA4B,WAARA,EAC5B8P,SAASpQ,GAEd,cAARM,GACQ,gBAARA,GACQ,SAARA,GACQ,WAARA,GACQ,cAARA,EAEa6Q,QAAQnR,GACHA,GAEf0E,IACN,QAEJ,IAGL,SAAS0M,GAAiCpR,GACxC,IAAIqR,EAAe,GACnB,IAAK,IAAIC,KAAUtR,EAAMsR,OAAQ,CAC/B,IAAIZ,EAAO1Q,EAAMsR,OAAOA,GACxBD,GACEX,EAAKnR,KACL,IACA0R,KAAKM,UAAUb,EAAK/H,YAAY6I,WAAW,IAAK,IAAIA,WAAW,IAAK,KACpE,IAEJxR,EAAMsR,OAASD,EAGjB,SAAStB,GAAoB/P,EAAOT,GAClC,OAAQA,GACN,IAAK,SACH,OAAO0Q,GAAqBjQ,GAC9B,IAAK,SACH,OAAO4Q,GAAqB5Q,GAC9B,QACE,OAAOA,GAIb,SAASyR,GAA2BnB,EAAQ/Q,GAU1C,OATI+Q,EAAOG,QACTJ,GAA4BC,GAE1BA,EAAOgB,QACTF,GAAiCd,GAE/BA,EAAOoB,SACTpB,EAAOoB,OAASpB,EAAOoB,OAAOF,WAAW,IAAK,UAExCjS,GACN,IAAK,SACH,OAAO8Q,GAA4BC,GACrC,IAAK,SACH,OAAOc,GAAiCd,GAC1C,QACE,OAAOA,GAIN,SAASqB,GAAWC,EAAKtR,EAAKuR,GACnC,IAAIC,EAAU,GACd,IAAK,IAAIrU,KAAKmU,EACPA,EAAI9T,eAAeL,KACH,UAAjB,gBAAOmU,EAAInU,IACbqU,EAAUA,EAAQf,OAAOY,GAAWC,EAAInU,GAAI6C,EAAKuR,KACvCpU,GAAK6C,GAAOsR,EAAInU,IAAMoU,GAASpU,GAAK6C,GAAc,IAAPuR,GAE5CD,EAAInU,IAAMoU,GAAc,IAAPvR,IACO,GAA7BwR,EAAQC,YAAYH,KAFxBE,EAAQ7T,KAAK2T,IAOjB,OAAOE,EAGT,SAASE,GAAYJ,EAAKtR,EAAKuR,EAAKI,EAAYC,GAC9C,IAAK,IAAIzU,KAAKmU,EACZ,GAAKA,EAAI9T,eAAeL,GACxB,GAAqB,UAAjB,gBAAOmU,EAAInU,IAAgB,CAC7B,GAAImU,EAAInU,IAAqB,YAAfmU,EAAInU,GAAG8B,MAAsBqS,EAAInU,GAAGkL,YAC5CiJ,EAAInU,GAAGkL,WAAWsB,IAAM4H,EAAK,CAC/BD,EAAInU,GAAGkL,WAAW2I,OAASY,EAC3B,IAAIC,EAAa,CACfC,SAAU,CAAC,CAAEC,KAAM,GAAItM,KAAM,SAC7BxG,KAAM,UACNwG,KAAM,WAIR,OAFA6L,EAAInU,GAAG2U,SAAS,GAAGA,SAAS,GAAKD,EACjCP,EAAInU,GAAG2U,SAAS,GAAGA,SAAS,GAAGA,SAAS,GAAGC,KAAOJ,EAC3CL,EAAInU,GAGfuU,GAAYJ,EAAInU,GAAI6C,EAAKuR,EAAKI,EAAYC,QACrC,GAAKzU,GAAK6C,GAAOsR,EAAInU,IAAMoU,GAASpU,GAAK6C,GAAc,KAAPuR,EAGrD,OAFAD,EAAInU,GAAGkL,WAAW2I,OAASY,EAC3BN,EAAInU,GAAG2U,SAAS,GAAGA,SAAS,GAAGA,SAAS,GAAGC,KAAOJ,EAC3CL,EAAInU,GA+BV,SAAS6U,GAAkBC,EAAYC,GAC5C,IAAIC,EAAgBd,GAAWY,EAAY,OAAQ,QACnD,IAAK,IAAIG,KAAaD,EAAe,CACnC,IAAI1I,EAAO0I,EAAcC,GACrBR,EAAe,GACnBA,EAAajU,KAAK8L,EAAKrF,MAAMqF,KAAKpB,WAAW2I,OAAO,IACpD,IAAIW,EAAa,GAUjB,IAAK,IAAIU,UATWC,GAAhB7I,EAAKX,SACP4I,GACEQ,EACA,KACAzI,EAAKrF,MAAMqF,KAAKpB,WAAWsB,GAC3B,IACAiI,GAGqBnI,EAAKX,QAAS,CACrC,IAAIyJ,EAAc9I,EAAKX,QAAQuJ,GAC3BN,EAAOQ,EAAYR,KACvB,GAAIQ,EAAYC,MACd,IAAK,IAAIC,KAAaF,EAAYC,MAAO,CACvC,IAAIE,EAAOH,EAAYC,MAAMC,GACzBpK,EAAa,GACbpJ,EAAOyT,EAAKjN,KACZkN,EAAShB,EAAWtU,OACpBA,EAAS0U,EAAK1U,OAWlB,OAVIqV,EAAKtO,QACPiE,EAAaqK,EAAKtO,MAAMsD,IAAIW,iBAGJiK,IAAtBjK,EAAWsK,SAEbtK,EAAWsK,OAASA,EACpBtK,EAAWhL,OAASA,GAGd4B,GACN,IAAK,SACHA,EAAO,YACPoJ,EAAWuK,eAAgB,EAC3B,MACF,IAAK,YACH3T,EAAO,YACPoJ,EAAWwK,YAAa,EACxB,MACF,IAAK,YACH5T,EAAO,YACPoJ,EAAWyK,WAAY,EACvB,MAEF,IAAK,cACH7T,EAAO,YACPoJ,EAAW0K,aAAc,EACzB,MAGJnB,EAAajU,KAAK,CAAEsB,KAAMA,EAAMoJ,WAAYA,IAGhDsJ,GAAcI,EACdL,GACEQ,EACA,KACAzI,EAAKrF,MAAMqF,KAAKpB,WAAWsB,GAC3BgI,EACAC,IAIN,OAAOM,EAGF,SAASc,GAAWC,GACzB,IAAI3F,EAAU,CACZ8B,SAAS,EACT8D,eAAe,EACfC,OAAQ,EACRC,UAAU,EACVC,aAAclC,IAEZjT,EAAS8Q,GAASiE,EAAM3F,GAC5B,OAAOpP,EAGF,SAASoV,GAAiBL,GAC/B,IAAM/U,EAAS+Q,GAAGsE,OAChBN,EACA,+3BAEF,OAAO/U,EAAOsV,MAAMC,KAGf,SAASC,GAAiBvF,GAAuB,IAAlB1I,EAAkB,uDAAX,UACrCkO,EAAK5E,GAAOZ,EAAKe,GAAOzJ,IAC1BwN,EAAOtC,KAAKC,MAAMD,KAAKM,UAAU0C,IACrC1S,KAAK+I,OAAOC,SAAS,sBAAuB,CAC1C2J,SAAUX,IAEZ,IAAM/U,EAAS+Q,GAAGsE,OAChBI,EACA,+3BAEF,OAAOzV,EAAOsV,MAAMC,K,UCtStB,IAAMI,GAAQjT,EAAQ,Q,SAIPkT,K,gGAAf,8GACyB7S,KAAK8S,MAAMC,UAAU,YAD9C,8D,yBAQO,SAAeC,GAAtB,qC,gEAAO,gIACHC,EADG,EACHA,KAAMC,EADH,EACGA,UAAWC,EADd,EACcA,OAAQC,EADtB,EACsBA,KAAMC,EAD5B,EAC4BA,UAD5B,IAEH3B,cAFG,MAEM,EAFN,MAES4B,aAFT,MAEiB,GAFjB,WAIahU,OAAOiU,MAAMC,OAC7B,yCACA,CACEC,OAAQ,OACRC,KAAMhE,KAAKM,UAAU,CACnBiD,OACAU,YAAa,CAACC,YACdV,YACAC,SACAC,OACAC,YACA3B,SACA4B,UAEFO,QAAS,CACP,eAAgBC,aAChBC,OAAQD,gBApBT,UAICE,EAJD,OAwBc,MAAfA,EAAIC,OAxBH,yCAwB0BD,EAAIpY,MAxB9B,UAyBc,MAAfoY,EAAIC,OAzBH,iBA0BHpB,KA1BG,8BA2BQ,IAAIjT,MAAMoU,GA3BlB,4C,yBA4MA,SAAeE,GAAtB,mC,gEAAO,8GAA6BC,EAA7B,EAA6BA,OAA7B,SACa7U,OAAOiU,MAAMC,OAAOnV,IACpC,gBAAkB8V,EAAS,eAC3B,IAHG,UACCH,EADD,OAKc,MAAfA,EAAIC,OALH,yCAMID,EAAIpY,MANR,UAQc,MAAfoY,EAAIC,OARH,iBASHpB,KATG,8BAUQ,IAAIjT,MAAMoU,GAVlB,4C,yBAwKA,SAAeI,GAAtB,mC,gEAAO,kHAAoCD,EAApC,EAAoCA,OAAQE,EAA5C,EAA4CA,MAAOf,EAAnD,EAAmDA,MAAnD,SACahU,OAAOiU,MAAMC,OAAOnV,IACpC,gBAAkB8V,EAAS,IAAME,EAAQ,YACzC,CACEC,OAAQ,CACNC,gBAAiBjB,KALlB,UACCU,EADD,OASc,MAAfA,EAAIC,OATH,yCAUID,EAAIpY,MAVR,UAYc,MAAfoY,EAAIC,OAZH,iBAaHpB,KAbG,8BAcQ,IAAIjT,MAAMoU,GAdlB,4C,yBAiEA,SAAeQ,GAAtB,mC,gEAAO,gHAAqC9L,EAArC,EAAqCA,GAArC,SACakK,GAAM,uCAAD,OAAwClK,GAAM,CACnE+K,OAAQ,QAFL,cACCO,EADD,gBAIaA,EAAIlD,OAJjB,UAIC5D,EAJD,OAMc,MAAf8G,EAAIC,OANH,yCAOIxB,GAAiBvF,IAPrB,cASc,MAAf8G,EAAIC,QACNpB,KAVG,kBAYE,MAZF,4C,yBAkIA,SAAe4B,GAAtB,mC,gEAAO,kHAA+BN,EAA/B,EAA+BA,OAAQE,EAAvC,EAAuCA,MAAOK,EAA9C,EAA8CA,OAA9C,SACapV,OAAOiU,MAAMC,OAAOnV,IACpC,gBAAkB8V,EAAS,IAAME,EAAQ,IAAMK,EAC/C,IAHG,UACCV,EADD,OAKc,MAAfA,EAAIC,OALH,yCAMID,EAAIpY,MANR,UAQc,MAAfoY,EAAIC,OARH,iBASHpB,KATG,8BAUQ,IAAIjT,MAAMoU,GAVlB,4C,ymBCpYP,I,GAAIW,GAAU,EAAd,QAEA,IACEC,QAAS,CACP9D,KADJ,SACA,GACM,OAAO+D,EAAKhE,UAAYgE,EAAKhE,SAAS,GAAKgE,EAAKhE,SAAS,GAAGC,KAAO,IAErEgE,MAJJ,SAIA,GACM,MAAiB,kBAANtX,EAAuB,GAC3BA,EAAE4Q,OAAOgB,QAAQ,KAAM,OAGlC2F,MAAO,CACLC,SAAU,CACRxS,QAAS,SAAf,gBACQ,GAAiB,OAAbyS,GAAqBA,IAAaC,GACd,UAApBD,EAAS/L,OAAoB,CAC/B,IAAI4B,EAASmK,EAAShM,OACRjJ,KAAKyF,OAAOgE,MAAMY,IAAIxC,QAAQA,QAC5C7H,KAAKyF,OAAOC,QAAQC,QACpB,IAAIwP,EAAQnV,KAAKyF,OAAOhC,KAAK2R,QAAQ7T,KAErC4T,EAAME,aAAY,SAA5B,KACY,GAAI9T,EAAK4B,MAAMqF,MACTjH,EAAK4B,MAAMqF,KAAKpB,WAAWsB,KAAOoC,EAAQ,CAC5C,IAAIiB,EAAK,EAAzB,gBACA,iBACA,wBAEgB,EAAhB,wBACgB,IAAhB,6BACgBhB,EAAGE,eAAe,CAAlC,0BAMMqK,MAAM,IAGVjR,WAAY,CACVkR,UAAJ,OACIC,cAAJ,OACIC,WAAJ,QAEElR,MAAO,CACLjB,QAAS,CACPkB,KAAMnI,OACNqZ,UAAU,IAGd9Z,KAjDF,WAkDI,MAAO,CACL+Z,kBAAmB,GACnBlQ,OAAQ,KACRN,cAAc,EACd4B,YAAa,KACbkN,OAAQ,cACRnP,WAAW,EACX8Q,kBAAmB,EACnBC,QAAS,KAGbvR,SAAU,GAAZ,YACA,0BACA,OACA,WACA,cACA,UACA,WACA,WACA,YACA,0BAEA,8CACA,sCAZA,IAaIwR,WAbJ,WAcM,OAAwC,IAAjC9V,KAAK6H,QAAQgJ,SAASzU,QAE/B2Z,YAhBJ,WAiBM,GAAK/V,KAAKsD,SAAYtD,KAAKsD,QAAQuN,SACzC,CACQ,IAAK,IAAInO,KAAW1C,KAAKsD,QAAQuN,SAAU,CACzC,IAAI1B,EAAOnP,KAAKsD,QAAQuN,SAASnO,GACjC,IAAK,IAAI8F,KAAQ2G,EAAK0B,SAAU,CAC9B,IAAImF,EAAW7G,EAAK0B,SAASrI,GAER,YAAjBwN,EAASxR,MACXwR,EAASC,OAASjW,KAAKiW,OAAOD,EAAS5O,WAAW2I,QAClDiG,EAASE,KAAOlW,KAAKmW,QAAQH,EAAS5O,WAAW2I,SAC/D,qCACciG,EAASC,OAASjW,KAAKiW,OACrC,iCAEcD,EAASE,KAAOlW,KAAKmW,QACnC,mCAMQ,OAAOnW,KAAKsD,QArB+B,MAAO,CAA1D,gBAyBE,QAvGF,+KA2GA,yCA3GA,OA2GA,EA3GA,OA4GA,OACA,wBACA,WACA,YACA,OACA,EACA,IAHA,sBAIA,kBAJA,eAKA,GALA,CAMA,kBACA,wBACA,YAEA,QACA,QACA,QACA,QACA,QACA,GACA,KAEA,kBApBA,YAoBA,eAEA,GADA,wBACA,kCACA,qCACA,6BACA,YACA,cACA,WACA,gBAEA,wBAGA,oBAGA,SApCA,YAoCA,SACA,sDAGA,4BArJA,wGAuJEuF,QAAS,CACPM,OADJ,SACA,GACMnJ,KAAK+I,OAAOC,SAAS,iBAAkB,CACrCC,OAAQP,EACRQ,OAAQ,aAGZ3D,cAPJ,WAQMvF,KAAK+I,OAAOC,SAAS,iBAAkB,CACrCoN,sBAAuBpW,KAAKoW,wBAGhC/Q,WAZJ,WAaM,OAAIrF,KAAKoW,qBACA,UAEF,QAETjP,gBAlBJ,SAkBA,OACM,GAAIV,EAAItD,MAAMsD,IAAIW,WAAWiP,UAAW,CACtC,IAAIC,EAAgBtW,KAAKuW,cAAc,EAAG,IAAM9P,EAAItD,MAAM+I,cAC1D,IAAK,IAAIxF,KAAS4P,EAAe,CAC/B,IAAItP,EAAUsP,EAAc5P,GAC5BM,EAAQ7D,MAAMsD,IAAIW,WAAWF,GAAazI,KAIhD8X,cA3BJ,SA2BA,OACM,IAAN,wBACA,KAMM,OALAlM,EAAIC,aAAakM,EAAMC,GAAI,SAAjC,GACQC,EAAMha,KACd,0BAAU,OAAV,mCAGaga,EAAMC,OAAO/G,UAEtB3I,kBArCJ,SAqCA,GACM,IAAIyP,EAAQ,GAIZ,OAHAA,EAAQ1W,KAAKgG,QAAQQ,YAAYoQ,YAAYC,MACnD,YAAQ,OAAR,wBAEUH,EACKA,EAAMtP,WAENsP,GAIX,YAjDJ,uKAkDA,wBACA,gCAEA,4CAEA,UACA,eACA,QAaA,eACA,oBACA,2BACA,kBAzEA,yGA2EI9P,cA3EJ,SA2EA,GACM,IAAIQ,EAAa,GAEb0P,GADe9W,KAAKyF,OAAOsR,kBAAkB,QAChC/W,KAAKyF,OAAOgE,MAAMoB,UAAUhD,WAEzCiP,EAAWjP,QAAQA,QAAQzL,OAAS,IACtCgL,EAAa,CAArB,eAEM,IAAI4P,EAAS,CAAnB,0BACMhX,KAAKyF,OACX,QACA,QACA,WAAQ,MAAR,QAAQ,IAAR,EAAQ,KAAR,SACA,OAEIwR,UA1FJ,SA0FA,KACMjX,KAAKkX,OAAOC,MAAMC,KAAK,CACrBC,SAAU,IACVC,QAASA,EACT1W,SAAU,SACV4D,KAAMA,KAGV,YAlGJ,sLAqGA,IACA,yCAtGA,OAqGA,EArGA,yDAyGA,kBAzGA,OA2GA,sDA3GA,iHA6GI+S,WA7GJ,SA6GA,GACM,IAAIta,EAAS0X,GAAQ6C,EAAO,CAAC,mBAC7B,OAAOva,GAETwa,UAjHJ,SAiHA,GACM,GAAIhR,EACF,IAAIiQ,EAAQ1W,KAAKgG,QAAQQ,YAAYoQ,YAAYC,MACzD,YAAU,OAAV,mBAIM,OAAOH,GAETgB,cA1HJ,WA2HU1X,KAAKyF,QACPzF,KAAKyF,OAAOkS,WAGhBC,qBA/HJ,WAgIM,IAAN,GACQpT,KAAM,MACNqD,QAAS,IAEX,IAAK7H,KAAK+V,cAAgB/V,KAAK+V,YAAYlF,SACjD,OAAQ,SAAR,IAEQ,IAAK,IAAInO,KAAW1C,KAAK+V,YAAYlF,SAAU,CAC7C,IAAI1B,EAAOnP,KAAK+V,YAAYlF,SAASnO,GACjCmF,EAAU,GACd,GAAiB,cAAbsH,EAAK3K,KAAsB,CAC7B,IAAK,IAAIgE,KAAQ2G,EAAK0B,SAAU,CAC9B,IAAImF,EAAW7G,EAAK0B,SAASrI,GAC7B,GAAqB,YAAjBwN,EAASxR,MACPwR,EAASnF,SAAS,GAAI,CACfmF,EAAS5O,WAAWsB,GAA7B,IACIoI,EAAO,IAOX,GALlB,8BACA,kCAEoBA,EAAOkF,EAASnF,SAAS,GAAGA,SAAS,GAAG,GAAG,GAAGC,MAE5CkF,EAASC,OAAQ,CACnB,IAAI4B,EAAa7X,KAAK8X,cAAc9B,EAAUlF,GAAM,GACpDjJ,EAAQnL,KAAK,CACX8H,KAAM,OACNrB,MAAO,CACLqF,KAAMwN,GAERnO,QAASgQ,SAGXhQ,EAAQnL,KAAK,CACX8H,KAAM,OACNrB,MAAO,CACLqF,KAAMwN,GAERnO,QAAS,CAC/B,CACwB,KAAxB,OACwB,KAAxB,OAQYkQ,EAAclQ,QAAQnL,KAAK,CACzB8H,KAAM,SACNrB,MAAO,CACL4E,MAAOoH,GAETtH,QAASA,SAEvB,0BACY,IAAImQ,EAAchY,KAAKuX,WAAWpI,EAAK0B,UACnCoH,EAAa,GACjB,IAAK,IAAIC,KAAOF,EAAa,CAC3B,IAAIG,EAAc,GACdC,EAAUJ,EAAYE,GAC1B,IAAK,IAAIG,KAAQD,EAAS,CACxB,IAAIE,EAAWF,EAAQC,GAEnBE,GADAzH,EAAO,IACO,IAClB,IAAKtI,KAAQ8P,EAASzH,SAAU,CAC1BmF,EAAWsC,EAASzH,SAASrI,GAC7BwN,GAAYA,EAASnF,SAAS,GAAG,GAAG,GAAGA,SAAS,KAClDC,EAAOkF,EAASnF,SAAS,GAAG,GAAG,GAAGA,SAAS,GAAGC,MAEhD,IAAIQ,EAAc,GACdgH,EAASrC,OACX3E,EAActR,KAAK8X,cAAcQ,EAAUxH,GAAM,GAEjDQ,EAAY5U,KAAK,CACf8H,KAAM,OACNsM,KAAMA,IAGV,IAAI0H,EAAU,CACZhU,KAAM,OACNrB,MAAO,CACLqF,KAAMwN,GAERnO,QAASyJ,GAEXiH,EAAY7b,KAAK8b,GAEnBL,EAAYzb,KAAK,CACf8H,KAAM,YACNqD,QAAS0Q,IAGbN,EAAWvb,KAAK,CACd8H,KAAM,WACNqD,QAASsQ,IAGb,IAAIM,EAAY,CACdjU,KAAM,SACNqD,QAASoQ,GAGXF,EAAclQ,QAAQnL,KAAK,CACzB8H,KAAM,QACNqD,QAAS,CAAC4Q,MAIhBzY,KAAK2V,kBAAoBoC,EACzB/X,KAAKyF,OAAOgG,SAASiN,WAAWX,IAGpC5B,QAlPJ,SAkPA,GAEM,IADA,IAAID,EAAO,GACFha,EAAI,EAAGA,EAAIkL,EAAWhL,OAAQF,IAE7C,4BACA,4BAEUga,EAAKxZ,KAAK0K,EAAWlL,IAGzB,OAAOga,GAETD,OA9PJ,SA8PA,GACM,IAAK,IAAI/Z,EAAI,EAAGA,EAAIkL,EAAWhL,OAAQF,IACrC,GACR,4BACA,2BAEU,OAAO,EAGX,OAAO,GAET4b,cAzQJ,SAyQA,OACM,IAAID,EAAa,GACbc,EAAU3Y,KAAK4Y,aAAa9H,EAAMkF,EAASE,MAC/C,IAAK,IAAItH,KAAS+J,EAAS,CACzB,IAAIpH,EAAQ,GACRT,EAAO,IACY,KAAlB6H,EAAQ/J,KACXkC,EAAO6H,EAAQ/J,IAEjB,IAAIsH,EAAOlW,KAAK6Y,SAAS7C,EAAUlF,EAAM0G,GACzC,GAAItB,EAAK9Z,OAAS,EAAG,CACnB,IAAK,IAAI0c,KAAW5C,EAAM,CACxB,IAAIzP,EAAMyP,EAAK4C,GACf,GAAgB,aAAZrS,EAAIzI,KAAqB,CAC3B,IAAI+a,EAAa/Y,KAAKgZ,cAAcvS,GACpC,IAAK,IAAIC,KAASqS,EAAY,CAC5B,IAAIE,EAAYF,EAAWrS,GAC3B6K,EAAM7U,KAAKuc,IAGf,IAAIC,EAASlZ,KAAKyX,UAAUhR,GACxBE,EAAQ,QACR3I,EAAO,OACX,GAAIkb,EAAQ,CACVvS,EAAQuS,EAAOvS,MACf3I,EAAOkb,EAAOlb,KAE5B,wBACA,uBACA,iDAEgBgC,KAAK4V,oBAEP,IAAIuD,EAAU,CACZ3U,KAAMxG,EACNmF,MAAO,CACLwD,MAAOA,EACPF,IAAKA,EACLyF,aAAclM,KAAK4V,oBAGvB5V,KAAK6V,QAAU,CACb7X,KAAMyI,EAAIzI,KACV8M,OAAQkL,EAAS5O,WAAWsB,GAC5BjC,IAAKA,EACL4P,UAAW5P,EAAIW,WAAWiP,WAE5B9E,EAAM7U,KAAKyc,IAGf,IAAI9I,EAAM,CACR7L,KAAM,OACN+M,MAAOA,EACPT,KAAMA,GAER+G,EAAWnb,KAAK2T,OAC1B,CACcA,EAAM,CACR7L,KAAM,OACN+M,MAAOA,EACPT,KAAMA,GAER+G,EAAWnb,KAAK2T,IAGpB,OAAOwH,GAETmB,cA5UJ,SA4UA,GACM,IAAIhb,EAAO,GACPyI,EAAIW,WAAWuK,eACjB3T,EAAKtB,KAAK,UAER+J,EAAIW,WAAWyK,WACjB7T,EAAKtB,KAAK,aAER+J,EAAIW,WAAW0K,aACjB9T,EAAKtB,KAAK,eAER+J,EAAIW,WAAWwK,YACjB5T,EAAKtB,KAAK,aAER+J,EAAIW,WAAWgS,MACjBpb,EAAKtB,KAAK,QAGZ,IADA,IAAI2c,EAAe,GACVnd,EAAI,EAAGA,EAAI8B,EAAK5B,OAAQF,IAC/Bmd,EAAa3c,KAAK,CAChB8H,KAAMxG,EAAK9B,KAGf,OAAOmd,GAETT,aArWJ,SAqWA,KACM,IAAK1C,EAAK9Z,OAAQ,MAAO,GAEzB,IAAN,KACA,KAEM8Z,EAAKnM,SAAQ,SAAnB,GACQuP,EAAQ5c,KAChB,oBACA,4CAIM4c,EAAQC,MAAK,SAAnB,mBAEUD,EAAQ/J,QAAQ,GAAK,GAAG+J,EAAQE,QAAQ,GAExCF,EAAQA,EAAQld,OAAS,GAAKqd,EAAIrd,QAAQkd,EAAQ5c,KAAK+c,EAAIrd,QAE/D,IAAK,IAAX,yBACQ4H,EAAQtH,KAAK+c,EAAIC,UAAUJ,EAAQpd,GAAIod,EAAQpd,EAAI,KAGrD,OAAO8H,GAET6U,SA9XJ,SA8XA,OACM,IAAIc,EAMJ,GAJEA,EADEnC,EACS9U,EAAQmO,SAAS,GAAGA,SAAS,GAAG,GAAG,GAAGA,SAAS,GAAGC,KAElDpO,EAAQmO,SAAS,GAAGA,SAAS,GAAG,GAAG,GAAGC,KAEvC,KAARA,EACF,MAAO,GAEG6I,EAASpK,QAAQuB,GAC7B,OAAOpO,EAAQwT,KAAKS,QAAO,SAAjC,GACQ,IAAIiD,EAAUD,EAASE,OAAOxX,EAAE+E,WAAWsK,OAAQrP,EAAE+E,WAAWhL,QAChE,GAAIwd,EAAQjV,SAASmM,GACnB,OAAOzO,MAIbyX,eAhZJ,SAgZA,GACM,IAAIC,EAAc,GAoBlB,OAnBIjT,EAAMnC,SAAS,wBACjBoV,GAAe,kBAEbjT,EAAMnC,SAAS,sBACjBoV,GAAe,gBAEbjT,EAAMnC,SAAS,mBACjBoV,GAAe,aAEbjT,EAAMnC,SAAS,uBACjBoV,GAAe,iBAEbjT,EAAMnC,SAAS,0BACjBoV,GAAe,oBAEbjT,EAAMnC,SAAS,iBACjBoV,GAAe,WAGVA,GAETjR,UAvaJ,SAuaA,GACM9I,KAAK+I,OAAOC,SAAS,oBAAqB,CACxCC,OAAQP,EACRQ,OAAQ,aAGZ+B,eA7aJ,SA6aA,GACM,GAAKjL,KAAKga,MAAMtR,GAAhB,CACA,IAAN,yCACUhG,GACV,kBACQ,MAAR,SACQ,OAAR,SACQ,SAAR,eChxB8W,MCS1W,I,oBAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,OAIa,M,QCJf,IACE6B,MAAO,CACLjB,QAAS,CACPkB,KAAMnI,OACNqZ,UAAU,IAGdrR,WAAY,CACV4V,OAAJ,EACIC,gBAAJ,KCzB0W,MCOtW,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIpX,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,gBAAgB,CAAClE,IAAI,eAAe8E,IAAI,gBAAgBL,YAAY,sBAAsBW,YAAY,CAAC,MAAQ,OAAO,OAAS,QAAQhB,MAAM,CAAC,GAAK,cAAc,QAAUL,EAAIuJ,SAAS/G,GAAG,CAAC,KAAOxC,EAAIqX,WACtS,GAAkB,G,8CCEP,IACbve,KADa,WAEX,MAAO,CAAEwe,aAAcC,GAAOrN,KAAKC,QAErCpE,SAAO,IACLyR,cADO,SAAF,GAC+C,IAApCjY,EAAoC,EAApCA,EAAGC,EAAiC,EAAjCA,EAAGvB,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,OAAUuZ,EAAa,uDAAH,EAC/C,MAAO,CACLlY,EAAGA,EAAIkY,EACPjY,EAAGA,EAAIiY,EACPxZ,MAAOA,EAAQ,EAAIwZ,EACnBvZ,OAAQA,EAAS,EAAIuZ,IAGzBC,aATO,SASM9R,GACX,gBAAU1I,KAAKoa,aAAf,YAA+B1R,EAA/B,eAEF+R,eAZO,SAYQ/R,GAAkB,IAAd2D,EAAc,uDAAJ,GAC3B,EAAkDA,EAA1ChK,SAAR,MAAY,EAAZ,IAAkDgK,EAAnC/J,SAAf,MAAmB,EAAnB,IAAkD+J,EAA5BtL,aAAtB,MAA8B,GAA9B,IAAkDsL,EAAhBrL,cAAlC,MAA2C,GAA3C,EACA,OAAU,IAANqB,GAAiB,IAANC,GAAqB,KAAVvB,GAA2B,KAAXC,EACxC,UAAUhB,KAAKoa,aAAf,YAA+B1R,EAA/B,4BAEF,UAAU1I,KAAKoa,aAAf,YAA+B1R,EAA/B,YAAqCrG,EAArC,YAA0CC,EAA1C,YAA+CvB,EAA/C,YAAwDC,EAAxD,wBAEF0Z,gBAnBO,SAmBShS,EAnBX,GAmB4C,QAA3B3H,aAA2B,MAAnB,GAAmB,MAAfC,cAAe,MAAN,GAAM,EAC/C,gBAAUhB,KAAKoa,aAAf,YAA+B1R,EAA/B,iBAA0C3H,EAA1C,YAAmDC,EAAnD,mBAEF2Z,mBAtBO,SAsBYjS,EAAI4L,GACrB,OAAOtU,KAAK0a,gBAAgBhS,EAAI4L,IAElCsG,sBAzBO,SAyBelS,EAzBjB,EAyB8CmS,GAAQ,IAA/BxY,EAA+B,EAA/BA,EAAGC,EAA4B,EAA5BA,EAAGvB,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,OACvC,gBAAUhB,KAAKoa,aAAf,YAA+B1R,EAA/B,YAAqCrG,EAArC,YAA0CC,EAA1C,YAA+CvB,EAA/C,YAAwDC,EAAxD,YAAkE6Z,EAAO9Z,MAAzE,YAAkF8Z,EAAO7Z,OAAzF,mBAEF8Z,eA5BO,SA4BQC,GACb,MAAO,CACL1Y,EAAG2Y,KAAMD,EAAK1Y,EAAG,GACjBC,EAAG0Y,KAAMD,EAAKzY,EAAG,GACjBvB,MAAOia,KAAMD,EAAKha,MAAO,GACzBC,OAAQga,KAAMD,EAAK/Z,OAAQ,KAG/Bia,qBApCO,SAoCcC,EAAIC,GAEvB,IAAMC,EACJC,KAAKC,IAAIJ,EAAG7Y,EAAI6Y,EAAGna,MAAOoa,EAAG9Y,EAAI8Y,EAAGpa,OAASsa,KAAKE,IAAIL,EAAG7Y,EAAG8Y,EAAG9Y,GAC3DmZ,EACJH,KAAKC,IAAIJ,EAAG5Y,EAAI4Y,EAAGla,OAAQma,EAAG7Y,EAAI6Y,EAAGna,QAAUqa,KAAKE,IAAIL,EAAG5Y,EAAG6Y,EAAG7Y,GACnE,OAAO+Y,KAAKE,IAAI,EAAGH,GAAMC,KAAKE,IAAI,EAAGC,IAEvCC,cA5CO,SAAF,GA4CkC,IAAvBpZ,EAAuB,EAAvBA,EAAGC,EAAoB,EAApBA,EAAGvB,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,OACrB0a,EAAU,SAACrZ,GAAD,OAAOgZ,KAAKL,MAAU,IAAJ3Y,GAAe,KAC3CsZ,EAAI3b,KAAKe,MACf,MAAO,CACLsB,EAAGqZ,EAAQrZ,EAAIsZ,GACfrZ,EAAGoZ,EAAQpZ,EAAIqZ,GACf5a,MAAO2a,EAAQ3a,EAAQ4a,GACvB3a,OAAQ0a,EAAQ1a,EAAS2a,KAG7BC,gBAtDO,SAsDS1M,EAAQnO,GACtB8a,QAAQC,IAAI,2BACZD,QAAQC,IAAI5M,GACZ2M,QAAQC,IAAI/a,GACZ,IAAM2a,EAAU,SAACrZ,GAAD,OAAOgZ,KAAKL,MAAU,IAAJ3Y,GAAY,KACxCsZ,EAAI5a,EAMV,OALA8a,QAAQC,IAAI,0BACZD,QAAQC,IAAK5M,EAAOlF,KAAI,gBAAG3H,EAAH,EAAGA,EAAGC,EAAN,EAAMA,EAAN,MAAe,CACrCD,EAAGqZ,EAAQrZ,EAAIsZ,GACfrZ,EAAGoZ,EAAQpZ,EAAIqZ,QAEVzM,EAAOlF,KAAI,gBAAG3H,EAAH,EAAGA,EAAGC,EAAN,EAAMA,EAAN,MAAe,CAC/BD,EAAGqZ,EAAQrZ,EAAIsZ,GACfrZ,EAAGoZ,EAAQpZ,EAAIqZ,SAnEd,+CAuE+C,IAApCtZ,EAAoC,EAApCA,EAAGC,EAAiC,EAAjCA,EAAGvB,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,OAAUuZ,EAAa,uDAAH,EAC/C,MAAO,CACLlY,EAAGA,EAAIkY,EACPjY,EAAGA,EAAIiY,EACPxZ,MAAOA,EAAQ,EAAIwZ,EACnBvZ,OAAQA,EAAS,EAAIuZ,MA5EpB,0CA+EO9b,GACV,MAAqB,kBAAVA,EAA2BA,EACjB,kBAAVA,GAAsB,MAAMsd,KAAKtd,GACnCoQ,SAASpQ,GACX,QAnFJ,0CAqFOA,EAAOQ,GACjB,OAAO+b,KAAMvc,EAAOQ,MAtFjB,KCPL,GAAS,WAAa,IAAI6D,EAAI9C,KAAS+C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAKL,EAAI4F,OACtH,GAAkB,G,+lCCQtB,QACEnE,MAAO,CACLmE,GAAI,CACFlE,KAAMC,OACNuD,QAAS,iBAEXqE,QAAS,CACP7H,KAAMnI,QAER2f,KAAM,CACJxX,KAAMnI,QAER4f,SAAU,CACRzX,KAAMnI,OACN2L,QAAS,WAAf,OACA,uBACA,mBACA,qBACA,sBACA,uBACA,2BACA,yBACA,0BACA,gBACA,gBACA,gBACA,wBACA,qBACA,mBACA,2BAIEpM,KAjCF,WAkCI,MAAO,CACLuE,OAAQ,OAIZ+b,QAvCF,WAuCA,WACIlc,KAAKmc,WAAU,WAAnB,qBAEEtT,QAAS,CACPuT,MADJ,WACA,WACM,IAAKpc,KAAKG,QAAUH,KAAKqM,QAAS,CAChCrM,KAAKqc,YACL,IAAR,eACA,YACQC,EAAS5T,GAAK1I,KAAK0I,GACnB1I,KAAKG,OAAST,EAAc,KAApC,kBACQM,KAAKG,OAAOiX,KAAKkF,EAASC,aAC1Bvc,KAAKG,OAAOqc,eAAe,QAAQ,WACjC,EAAV,mBAIIC,QAdJ,SAcA,KACM,IACE,IADR,EACA,eACA,IAFA,KAGA,GAHA,IAGA,0CACA,QAJA,8BAMQ,OAAOC,EACf,SACQ,OAAO,OAMXL,UA7BJ,WA8BM,GAAKrc,KAAKgc,MAAShc,KAAKic,SAAxB,CAIA,IAAN,uCACA,YACM,IAAK,IAAX,mBACQvc,EAAcid,UACtB,EACA,oCAIIC,MA3CJ,WA2CA,mBACA,sBACM5c,KAAKG,OAAOyB,SAClB,oBACA,qBAEIib,yBAjDJ,WAiDA,wCACA,qBACM7c,KAAKG,OAAOyB,SAClB,4BACA,qBAEIkb,WAvDJ,YAuDA,6BACA,wBACM9c,KAAKG,OAAO2c,WAAW,IAAI5c,EAAQ,CAAzC,2BC5G2V,MCOvV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,ynBCmEf,QACEmE,WAAY,CACV3E,cAAJ,IAEEqd,OAAQ,CAAC,IACTxY,MAAO,CACLyY,OAAQ,CACNxY,KAAMC,OACNiR,UAAU,GAEZ3U,MAAO,CACLyD,KAAMyY,OACNvH,UAAU,EACV1N,QAAN,KAEIhH,OAAQ,CACNwD,KAAMyY,OACNvH,UAAU,GAEZpS,QAAS,CACPkB,KAAMnI,OACNqZ,UAAU,GAEZ1R,QAAS,CACPQ,KAAM0Y,MACNxH,UAAU,IAId9Z,KAAM,WAAR,uBACA,cACA,0BACA,kBACA,2BACA,+BALA,uBAMA,OAEEmZ,MAAO,CAKLnZ,KAAM,CACJ4G,QAAS,SAAf,KACQqZ,QAAQC,IAAI7G,IAGdK,MAAM,GAERN,SAAU,CACRxS,QAAS,SAAf,KACyB,OAAbyS,GAAyC,UAApBA,EAAS/L,SAChClJ,KAAKmd,oBAAoBlI,EAAShM,QAClCjJ,KAAKod,UAAUnI,EAAShM,QAAQ,KAGpCqM,MAAM,GAER+H,YAAa,CACX7a,QAAS,SAAf,KACyB,OAAbyS,GAAyC,UAApBA,EAAS/L,QAC1C,uCAEMoM,MAAM,IAGVhR,SAAU,GAAZ,MACA,6DADA,IAEI+H,QAFJ,WAGM,IAAN,EACA,6DACM,MAAO,CACLkQ,YAAavc,KAAKgd,OAClBM,aAAc,IACdC,UAAW,GAAnB,qBACQC,aAAc,EACdC,iBAAiB,EACjBC,iBAAiB,EACjBC,qBAAqB,EACrBC,gBAAiB,OAIvBC,UAnFF,WAqFI,GAAI7d,KAAKga,MAAM8D,cAAe,CAC5B,IAAN,kCACA,iBACA,WAEUC,IAASA,EAAQC,UAAY,MAGrCnV,QAAS,CACPsR,OADJ,WAEMna,KAAKie,UAEDje,KAAKsD,UAAStD,KAAKke,eAAiBle,KAAKme,aAAane,KAAKsD,UAEzC,OAAlBtD,KAAKoe,WACf,oDAMwC,OAA9Bpe,KAAKqe,sBACf,kDAEIJ,QAhBJ,WAiBM,GAAKje,KAAKga,MAAM8D,cAAhB,CACA,IAAN,kCAEM3d,EAAOme,qBAAqBC,aAAc,EAK1C,IAAN,yBACA,mBACA,0BACMC,EAAUxd,OAASwd,EAAUzd,MAAQ0d,EACrCte,EAAOyB,SAASwb,UAAUoB,GAAW,KAEvC5B,MA/BJ,SA+BA,iEACM,GAAI5c,KAAKgE,QAAQ5H,OAAS,EAAG,CAC3B,IAAR,uBACA,GACUiG,GAAI0Y,EAAK1Y,EAAI0Y,EAAKha,MAAQ,GAAKf,KAAKe,MACpCuB,GAAIyY,EAAKzY,EAAIyY,EAAK/Z,OAAS,GAAKhB,KAAKe,OAEvCf,KAAKga,MAAM8D,cAAclB,MAAM3N,GAAQyP,KAG3C3c,KAzCJ,SAyCA,GACM,GAAK/B,KAAKga,MAAM8D,cAAhB,CAEA,IAAN,kCAEUa,EAAQ,EACVxe,EAAOyB,SAASgd,OAAOze,EAAOmd,cAE9Bnd,EAAOyB,SAASgd,OAAO,EAAIze,EAAOmd,cAEpCnd,EAAOyB,SAASid,qBAElB,UArDJ,oEAqDA,GArDA,kHAqDA,EArDA,yCAsDA,kDAtDA,UAsDA,EAtDA,OAuDA,SAvDA,iDAyDA,cACA,qBACA,KACA,kDAEA,iBACA,KACA,kDAEA,EACA,eACA,KACA,kDACA,EACA,EACA,eACA,KACA,kDACA,EACA,kCAGA,qBACA,6CAGA,GACA,gBACA,kBAGA,qCAxFA,0GA0FI1V,OA1FJ,SA0FA,KACM,GAA6B,IAAzBnJ,KAAKoe,SAAShiB,QACZsK,EAAQ1G,KAAKoe,SAAShiB,OAA5B,CAEA,IAAN,EACA,iCACA,KACA,iDAEA,2BAEU0iB,GAAcvd,IAASud,GACjC,kCAEMvd,EAAKwd,UAAUC,IAAI,eAEnBhf,KAAKqe,qBAAuB3X,IAE9BuY,cA5GJ,SA4GA,GACMjf,KAAKmJ,OAAOzC,GAAO,GACnB1G,KAAK4c,MAAMlW,GAAO,IAEpByX,aAhHJ,SAgHA,cACM,IAAKne,KAAKga,MAAM8D,cAAe,MAAO,GAEtCjC,QAAQC,IAAI9b,KAAKga,MAAM8D,cAAc3d,QACrC,IAAN,kCAGA,YACA,iBACM0b,QAAQC,IAAIoD,EAAQ3d,QACpB,IAAN,qBACM4d,EAAIC,KAAK,QAAS,UAElB,IAAN,gBAEM,OADAvD,QAAQC,IAAIlgB,GACLA,EAAKiV,SAASvB,QAAO,SAAlC,KACQ,IAAK5M,EAAQ2c,SAAU,MAAO,GAC9B,IAAR,oBACQxD,QAAQC,IAAI,+BACZD,QAAQC,IAAIwD,GACRA,GACZ,iBACU,OAAV,EACU,OAAV,EACU,UAAV,YAGQ,IAER,gBAEQ,OAAO5c,EAAQmO,SAASvB,QAAO,SAAvC,KACU,IAAIJ,EAASxM,EAAQ2c,SAASE,OAC1B7W,EAAKhG,EAAQ0E,WAAWsB,GAI5B,GAHAmT,QAAQC,IAAI,wCACZD,QAAQC,IAAI5M,GAEQ,aAAhBxM,EAAQ8B,KACV,OAAO9B,EAAQmO,SAASvB,QAAO,SAA3C,KACc,IAAIJ,EAASxM,EAAQ2c,SAASE,OAC1B7W,EAAKhG,EAAQ0E,WAAWsB,GAE1C,mBACgB+B,OAAQ+U,EACRtQ,OAAQ,EAAxB,2BACgBuQ,UAAW,YAE3B,uBACgB,EAAhB,uBACgB,EAAhB,kCACkB,OAAlB,EACkB,OAAlB,aAGA,2BAAgB,OAAhB,kCACA,0BAAgB,OAAhB,kCACA,OACc,OAAOpjB,OAAOqjB,OAAO7hB,EAAG,OAAtC,OAAsC,CAAtC,WACA,GAEU,IAAV,mBACY4M,OAAQ+U,EACRtQ,OAAQ,EAApB,2BACYuQ,UAAW,YAEvB,uBACY,EAAZ,uBACY,EAAZ,kCACc,OAAd,EACc,OAAd,aAGA,2BAAY,OAAZ,kCACA,0BAAY,OAAZ,kCACA,OACU,OAAOpjB,OAAOqjB,OAAO7hB,EAAG,OAAlC,OAAkC,CAAlC,WACA,KACA,KAEI,oBA/LJ,oEA+LA,GA/LA,0FAgMA,yBACA,EAjMA,iDAoMA,mCACA,gCACA,8DAEA,2DAEA,qCACA,+BAGA,iCACA,8BA/MA,yGAiNI8hB,uBAjNJ,SAiNA,GACM,IAAN,yBACWjd,IACD1C,KAAK4f,2BAA6Bld,EAChCA,EAAQqc,UAAUc,SAAS,mBACvC,sCAEQ7f,KAAK4f,yBAA2Bld,EAE3BA,EAAQqc,UAAUc,SAAS,mBACxC,mCAGM7f,KAAK+I,OAAOC,SAAS,oBAAqB,CACxCC,OAAQP,EACRQ,OAAQ,YAGZ4W,cAnOJ,YAmOA,wCAEM,OADAjE,QAAQC,IAAI5M,GACLzE,EACb,kBACA,KACA,SACA,mBAAQ,IAAR,YAEQ,OADA,QAAR,SACA,+BAGA,gBACA,oBAEIsV,eAjPJ,WAiPA,WACM,IAAK/f,KAAKga,MAAM8D,cAAe,MAAO,GAEtC,IAAN,kCAGA,YAEA,iBAEA,qBAEM,OAAO9d,KAAKgE,QAAQgG,KAAI,SAA9B,qDACA,kBACA,sCAGA,IACA,eACA,cACA,cACA,sBACA,wBACA,aANA,UAMA,EANA,aAMA,mBANA,MAOA,qCACA,uBACU,EAAV,gBAGQ,MAAO,CACLgW,GAAIC,EACJvd,QAASud,EAAO1e,YAItB2e,MApRJ,WAqRM,GAA6B,IAAzBlgB,KAAKoe,SAAShiB,OAAlB,CACA,IAAN,4BAEM,GAAM4D,KAAK0G,MAAQ1G,KAAKoe,SAAShiB,OAAjC,CAEA,IAAN,2BACUmF,GAAMA,EAAKwd,UAAUoB,OAAO,eAChCngB,KAAKqe,qBAAuB,KAC5Bre,KAAKie,aAEPmC,cA/RJ,SA+RA,GACM,OAAiB,IAAVC,GAAyB,IAAVA,EAC5B,OACA,yBCpd8W,MCQ1W,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,wlBCef,QACEhc,WAAY,CACVic,iBAAJ,EACIC,QAAJ,GACIC,YAAJ,IAEEjc,MAAO,CACLnB,QAAS,CACPoB,KAAMC,OACNiR,UAAU,GAEZpS,QAAS,CACPkB,KAAMnI,OACNqZ,UAAU,IAGdqH,OAAQ,CAAC,IACTnhB,KAjBF,WAkBI,MAAO,CACLkI,UAAW,OAGfQ,SAAU,GAAZ,YACA,yBAEE,QACF,QACA,WACA,UACA,UACA,kBACA,SAEE,QACF,cACA,qBAEE,UACF,OACA,aAEA,0BACA,OACA,WACA,cACA,sBAEA,wCAzBA,IA0BI0Y,OA1BJ,WA2BM,OAAOhd,KAAKwa,aAAaxa,KAAKiN,MAAMvE,KAEtC3E,WA7BJ,WA8BM,OAAOsO,GAAiBrS,KAAKsD,YASjC,QA7DF,+KA8DA,oBA9DA,cA8DA,EA9DA,gBA+DA,SA/DA,OA+DA,EA/DA,OAgEA,iBACA,4CACA,wBAEA,8DApEA,wGAsEE,UAtEF,uJAwEA,sCAxEA,wGA0EEuF,QAAS,CACP,OADJ,uKAEA,wDAFA,0GC5GoX,MCOhX,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIa,M,QCHf,IAFA,UAEA,CACExE,WAAY,CACVoc,4BAAJ,IAEE1D,OAAQ,CAAC,IACTxY,MAAO,CACLnB,QAAS,CACPoB,KAAMC,OACNiR,UAAU,GAEZpS,QAAS,CACPkB,KAAMnI,OACNqZ,UAAU,IAGd9Z,KAfF,WAgBI,MAAO,IAGTiN,QAAS,KClCqU,MCO5U,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIa,M,QCNf,aAEA,IACE7K,KAAM,MACNuG,MAAO,CACLnB,QAAS,CACPoB,KAAMC,OACNuD,QAAS,WAAf,MACA,kKAGI1E,QAAS,CACPkB,KAAMnI,OACN2L,QAAS,WAAf,YAEI0Y,cAAe,CACblc,KAAMC,QAERyR,KAAM,CACJ1R,KAAMnI,SAGVwM,QAAS,CACP8X,mBADJ,SACA,GACM,OAAOhS,EACb,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,wBAGEtK,WAAY,CACVuc,OAAJ,IAEEtc,SAAU,CACRjB,aADJ,WAEM,IAAIwd,EAAgB7gB,KAAK2gB,mBAAmB3gB,KAAK0gB,eACvD,gBACM,OAAOrQ,IAGX6L,QA3CF,WA4CQlc,KAAKkW,MACPlW,KAAK+I,OAAOC,SAAS,oBAAqB,CAAhD,sBC3D8T,MCQ1T,I,UAAY,eACd,GACAnG,EACAU,GACA,EACA,KACA,KACA,OAIa,M,4DCiCA,IACbud,QADa,SACLC,GACNC,QAAQhC,IACNiC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,QACAC,SAGF/C,EAAInc,UAAU,oBAAqBmf,W,glBCjGvC,IAAM7V,GAAU,CAEdmG,MAAO,KACP2P,MAAO,KACPC,SAAU,KACVC,QAASC,IACTC,aAAc,KACdC,iBAAiB,EACjBC,yBAAyB,EAEzBC,OAAQ,KACRC,QAASL,IACTM,SAAU,KACVC,cAAe,KACfC,OAAQ,KACRC,MAAO,KAEP3X,MAAO,KACP4X,aAAa,EACbC,oBAAoB,EACpBC,qBAAqB,EACrBC,4BAA4B,EAE5B/R,KAAM,GACNjP,QAAS,GAETihB,aAAc,EAEdxhB,KAAM,OACNyhB,QAAS,WACTC,SAAS,GAGE1b,GAAQ,kBAAMpN,OAAOqjB,OAAO,GAAIxR,KAEhCkX,GAAU,CACrBtgB,UAAW,SAAC2E,EAAO2b,EAASC,GAAjB,OACT5b,EAAMwb,aAAe,IAAiC,IAA5Bxb,EAAM5B,QAAQ/C,WAC1CwgB,WAAY,SAAA7b,GAAK,OAAIA,EAAMzF,QAAQ5H,OAAS,IAGjCmpB,GAAY,CACvBC,OADuB,SAChB/b,EAAO6K,GACZ,IAAK,IAAMvV,KAAOuV,EACZ7K,EAAM1K,KAASuV,EAAOvV,KACxB0K,EAAM1K,GAAOuV,EAAOvV,GACpB0K,EAAM0b,SAAU,IAItBM,aATuB,SASVhc,GACXA,EAAMwb,cAAgB,GAExBS,WAZuB,SAYZjc,GACLA,EAAMwb,aAAe,IAAGxb,EAAMwb,cAAgB,KAIzCU,GAAU,CACrBH,OADqB,YACkB,IAA9BI,EAA8B,EAA9BA,OAAQnc,EAAsB,EAAtBA,MAAS6K,EAAa,uDAAJ,GAC3BpW,EAAI,GACV,IAAK,IAAMa,KAAOuV,EAAYvV,KAAO0K,IAAOvL,EAAEa,GAAOuV,EAAOvV,IAC5D6mB,EAAO,SAAU1nB,IAEb0U,MANe,sEAMYiT,GANZ,4FAMP7c,EANO,EAMPA,SAAUS,EANH,EAMGA,MACtBT,EAAS,gBAEL6c,EAAYC,QAAUrc,EAAM4K,MATb,gCAWXrL,EAAS,oBAAqB,CAClCmL,OAAQ0R,EAAYE,aACpB1R,MAAOwR,EAAYC,QAbJ,uBAeX9c,EAAS,gBAAiB,CAC9BmL,OAAQ0R,EAAYE,aACpB1R,MAAOwR,EAAYC,MACnBpR,OAAQmR,EAAYG,SAlBL,+CA2BXhd,EAAS,SAAU,CAAEwb,gBAASxgB,QAAS,KA3B5B,yBA4BXgF,EAAS,gBAAiB,CAC9BmL,OAAQ0R,EAAYE,aACpB1R,MAAOwR,EAAYC,MACnBpR,OAAQmR,EAAYG,SA/BL,YAiCb/S,KAjCa,wBAkCfjK,EAAS,SAAU,CAAEiK,YAlCN,UAmCTjK,EAAS,sBAnCA,QA0CnBA,EAAS,cA1CU,uGA4CrByc,aA5CqB,YA4CI,IAAVG,EAAU,EAAVA,OACbA,EAAO,iBAETF,WA/CqB,YA+CE,IAAVE,EAAU,EAAVA,OACXA,EAAO,eAEHK,kBAlDe,iLAkDKxc,MAAOT,EAlDZ,EAkDYA,SAAcmL,EAlD1B,EAkD0BA,OAAQE,EAlDlC,EAkDkCA,MACrDrL,EAAS,gBAnDU,SAoDAoL,GAAmB,CAAED,OAAQA,EAAQE,MAAOA,IApD5C,OAoDbzY,EApDa,OAsDN,OAATA,EACFoN,EAAS,SAAU,CACjBsb,yBAAyB,KAGrBL,EAAWroB,EAAKsqB,eAAeC,QAAQtP,MAC3C,SAAAnU,GAAO,OAAIA,EAAQ0jB,OAASjS,KAE9BnL,EAAS,SAAU,CACjBqL,MAAOzY,EAAKyY,MACZ6P,QAAStoB,EAAKyqB,UACdhC,iBAAiB,EACjBL,MAAOpoB,EAAKooB,MACZC,SAAUA,KAGdjb,EAAS,cAtEU,sGAwEfyL,cAxEe,mLAwEChL,MAAOT,EAxER,EAwEQA,SAAcmL,EAxEtB,EAwEsBA,OAAQE,EAxE9B,EAwE8BA,MAAOK,EAxErC,EAwEqCA,OACxD1L,EAAS,gBAzEU,SA0EAyL,GAAc,CAC/BN,OAAQA,EACRE,MAAOA,EACPK,OAAQA,IA7ES,OA0Eb9Y,EA1Ea,OA+EN,OAATA,EACFoN,EAAS,SAAU,CACjBiE,MAAO,KACP4X,aAAa,EACbE,qBAAqB,KAGnB9X,EAAQ,CAAEvE,GAAI9M,EAAKmD,IAAKgC,MAAOnF,EAAKmF,MAAOC,OAAQpF,EAAKoF,QAC5DgI,EAAS,SAAD,GAAC,MACJpN,EAAK8M,IADF,IAENuE,MAAOA,EACPuX,QAAS5oB,EAAK8Y,OACdmQ,aAAa,EACbF,OAAQ/oB,EAAK+oB,OACbC,MAAOhpB,EAAK+oB,OAAO2B,YAAY,GAAGvnB,OAGpCiK,EAAS,mBAAoB,CAAEN,GAAI9M,EAAK+oB,OAAO2B,YAAY,GAAGvnB,OAEhEiK,EAAS,cAlGU,sGAoGfud,iBApGe,2KAoGI9c,MAAOT,EApGX,EAoGWA,SAAcN,EApGzB,EAoGyBA,GAC5CM,EAAS,SAAU,CACjB4b,MAAOlc,IAtGU,SAwGbM,EAAS,gBAAiB,CAAEN,OAxGf,sGA0GfsK,mBA1Ge,yKA0GMvJ,EA1GN,EA0GMA,MAAOT,EA1Gb,EA0GaA,SAChCA,EAAS,gBA3GU,SA4GAgK,GACjB,CACEC,KAAMxJ,EAAMwJ,KACZG,KAAM3J,EAAM8a,QAEd,CAAE7S,OAAQ,EAAG4B,MAAO,MAjHH,OA4Gb1X,EA5Ga,OAqHjBoN,EAAS,SADE,OAATpN,EACiB,CAAEoI,QAAS,IAEX,CACjBA,QAC0B,IAAxBpI,EAAKoI,QAAQ5H,OACTC,OAAOmqB,OAAO,IACdnqB,OAAOmqB,OAAO5qB,EAAKoI,QAAQ,GAAGA,WAGxCgF,EAAS,cA9HU,qGAkIR,IACbyd,YAAY,EACZhd,SACA8b,aACAI,WACAP,Y,wBCtMIlP,GAAOvW,EAAQ,QAER8J,GAAQ,iBAAO,CAC1B4K,MAAO,KACP2P,MAAO,KACPC,SAAU,KACVyC,QAAS,KACT/S,YAAa,GACb3N,QAASkQ,GACThD,UAAW,KAIAqS,GAAY,CACvBC,OADuB,SAChB/b,EAAO6K,GACZ,IAAK,IAAMvV,KAAOuV,EACXqS,KAAUld,EAAM1K,GAAMuV,EAAOvV,MAAO0K,EAAM1K,GAAOuV,EAAOvV,MAItD4mB,GAAU,CACrBH,OADqB,WACFlR,GAAQ,IAAlBsR,EAAkB,EAAlBA,OACPA,EAAO,SAAUtR,IAEnBsS,eAJqB,cAIgC,IAApC5d,EAAoC,EAApCA,SAAqB2K,GAAe,EAA1BlK,MAA0B,EAAfkK,aACpC3K,EAAS,SAAU,CAAE2K,YAAaA,KAEpCkT,WAPqB,cAOwB,IAAhC7d,EAAgC,EAAhCA,SAAqBhD,GAAW,EAAtByD,MAAsB,EAAXzD,SAChCgD,EAAS,SAAU,CAAEhD,QAASA,KAEhC8gB,aAVqB,cAU4B,IAAlC9d,EAAkC,EAAlCA,SAAqBkK,GAAa,EAAxBzJ,MAAwB,EAAbyJ,WAClClK,EAAS,SAAU,CAAEkK,UAAWA,KAElC6T,YAbqB,cAa0B,IAAjC/d,EAAiC,EAAjCA,SAAqBib,GAAY,EAAvBxa,MAAuB,EAAZwa,UACjCjb,EAAS,SAAU,CAAEib,SAAUA,KAEjC+C,WAhBqB,cAgBwB,IAAhChe,EAAgC,EAAhCA,SAAqB0d,GAAW,EAAtBjd,MAAsB,EAAXid,SAChC1d,EAAS,SAAU,CAAE0d,QAASA,MAGnB,IACbD,YAAY,EACZhd,SACA8b,aACAI,YC1CWlc,GAAQ,iBAAO,CAC1Bf,GAAI,KACJ9M,KAAM,KACNoZ,SAAU,KACVjO,YAAa,KACbsW,YAAa,KACb4J,SAAS,EACTC,SAAS,EACTpiB,WAAW,EACX6N,SAAW,KACXwU,UAAU,EACVC,WAAW,EACXhR,sBAAsB,IAGXmP,GAAY,CACvBC,OADuB,SAChB/b,EAAO6K,GACZ,IAAK,IAAMvV,KAAOuV,EACXqS,KAAUld,EAAM1K,GAAMuV,EAAOvV,MAAO0K,EAAM1K,GAAOuV,EAAOvV,MAItD4mB,GAAU,CACrBH,OADqB,WACFlR,GAAQ,IAAlBsR,EAAkB,EAAlBA,OACPA,EAAO,SAAUtR,IAEnB+S,MAJqB,YAID,IAAZre,EAAY,EAAZA,SACNA,EAAS,SAAU,CACjBN,GAAI,KACJ9M,KAAM,KACNoZ,SAAU,KACVjO,YAAa,KACbsW,YAAa,KACb4J,SAAS,EACTK,SAAS,EACTxiB,WAAW,EACX6N,SAAW,KACXwU,UAAU,EACVC,WAAW,EACXhR,sBAAsB,KAG1BjN,OApBqB,cAoB2B,IAAvCH,EAAuC,EAAvCA,SAAqBE,GAAkB,EAA7BO,MAA6B,EAAlBP,QAAQD,EAAU,EAAVA,OACpCD,EAAS,SAAU,CAAEgM,SAAU,CAAE9L,SAAQD,aAE3CH,UAvBqB,cAuB8B,IAAvCE,EAAuC,EAAvCA,SAAqBE,GAAkB,EAA7BO,MAA6B,EAAlBP,QAAQD,EAAU,EAAVA,OACvCD,EAAS,SAAU,CAAEqU,YAAa,CAAEnU,SAAQD,aAE9Cse,eA1BqB,cA0BgC,IAApCve,EAAoC,EAApCA,SAAqBjC,GAAe,EAA1B0C,MAA0B,EAAf1C,aACpCiC,EAAS,SAAU,CAAEjC,YAAaA,KAEpCygB,YA7BqB,cA6B0B,IAAjCxe,EAAiC,EAAjCA,SAAqB2J,GAAY,EAAvBlJ,MAAuB,EAAZkJ,UACjC3J,EAAS,SAAU,CAAE2J,SAAUA,KAE3BC,MAhCe,sEAgCYlK,GAhCZ,gGAgCPe,MAAOT,EAhCA,EAgCAA,SAEnBA,EAAS,SAAU,CAAElE,WAAW,EAAMoiB,SAAS,IAlC5B,SAmCble,EAAS,mBAAoBN,GAnChB,OAoCnBM,EAAS,SAAU,CAAElE,WAAW,EAAOoiB,SAAS,IApC7B,sGAsCfX,iBAtCe,sEAsCuB7d,GAtCvB,kGAsCIe,MAAOT,EAtCX,EAsCWA,SAC1BN,GAAIM,EAAS,SAAU,CAAEN,OAvCV,SAwCA8L,GAAoB9L,GAxCpB,OAwCb9M,EAxCa,OAyCAoN,EAAS,SAAf,OAATpN,EAAkC,CAAEA,KAAM,KAAMqrB,SAAS,GAExC,CACjBrrB,KAAMS,OAAOmqB,OAAO5qB,GACpBqrB,SAAS,IA7CM,sGAiDrBQ,gBAjDqB,WAiDM/e,GAAI,IAAbe,EAAa,EAAbA,MACVlI,EAAOkI,EAAM7N,KACb8rB,EAAQ,CAACnmB,GACf,MAAOmmB,EAAMtrB,OAAQ,CACnB,IAAMmF,EAAOmmB,EAAMC,MAEnB,GADIpmB,EAAKsP,UAAUtP,EAAKsP,SAAS9G,SAAQ,SAAAxI,GAAI,OAAImmB,EAAMhrB,KAAK6E,MACxDA,EAAK6F,YAAc7F,EAAK6F,WAAWsB,KAAOA,EAAI,OAAOnH,EAE3D,OAAO,OAII,IACbklB,YAAY,EACZhd,SACA8b,aACAI,YCnFF5E,OAAI6G,IAAIC,QAEO,WAAIA,OAAKC,MAAM,CAC5BnrB,QAAS,CACPorB,UACAC,UACAngB,YAEFogB,QAAQC,I,glBCLVnH,OAAI1G,OAAO8N,eAAgB,EAE3BpH,OAAI6G,IAAIC,QACR9G,OAAI6G,IAAIQ,IAERrH,OAAI6G,IAAIS,QAAO,CACbC,qBAAsBvE,QACtBwE,gBAAiB,QAGnB,IAAMC,GAAe/nB,SAASuK,eAAe,OAEvCyd,GAAU1H,OAAIvV,OAAOkd,IAC3B,IAAID,GAAQ,CACVE,SACA5d,GAAIyd,GACJI,UAAW,MAAKJ,GAAaK,SAC7B3M,QAJU,WAKRlc,KAAK8oB,MAAMC,IAAI,OAAQ/oB,KAAKgpB,OAE9BngB,QAAS,CACPmgB,KADO,SACFvqB,GACHa,OAAO2pB,OAASxqB,EAChB+pB,GAAaK,QAAQI,OAASvZ,KAAKM,UAAUvR,IAE/CkiB,mBALO,SAKYhS,GACjB,OAAOA,EACJS,QAAQ,OAAQ,OAChBA,QAAQ,OAAQ,OAChBA,QAAQ,OAAQ,OAChBA,QAAQ,OAAQ,OAChBA,QAAQ,OAAQ,OAChBA,QAAQ,OAAQ,OAChBA,QAAQ,OAAQ,OAChBA,QAAQ,OAAQ,WAGtB8Z,OAAO,QAEKT,iB,oCCjDf,W,sFCAA,W,0nwCCAA,W,kCCAA,W,kCCAA,W","file":"js/app.fe56f2ba.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailImageEditViewer.vue?vue&type=style&index=0&lang=scss&\"","// OpenSeadragon SVG Overlay plugin 0.0.5\n\n(function() {\n\n    var $ = window.OpenSeadragon;\n    \n    if (!$) {\n        $ = require('openseadragon');\n        if (!$) {\n            throw new Error('OpenSeadragon is missing.');\n        }\n    }\n\n    var svgNS = 'http://www.w3.org/2000/svg';\n\n    // ----------\n    $.Viewer.prototype.svgOverlay = function() {\n        if (this._svgOverlayInfo) {\n            return this._svgOverlayInfo;\n        }\n\n        this._svgOverlayInfo = new Overlay(this);\n        return this._svgOverlayInfo;\n    };\n\n    // ----------\n    var Overlay = function(viewer) {\n        var self = this;\n\n        this._viewer = viewer;\n        this._containerWidth = 0;\n        this._containerHeight = 0;\n\n        this._svg = document.createElementNS(svgNS, 'svg');\n        this._svg.style.position = 'absolute';\n        this._svg.style.left = 0;\n        this._svg.style.top = 0;\n        this._svg.style.width = '100%';\n        this._svg.style.height = '100%';\n        this._viewer.canvas.appendChild(this._svg);\n\n        this._node = document.createElementNS(svgNS, 'g');\n        this._svg.appendChild(this._node);\n\n        this._viewer.addHandler('animation', function() {\n            self.resize();\n        });\n\n        this._viewer.addHandler('open', function() {\n            self.resize();\n        });\n\n        this._viewer.addHandler('rotate', function(evt) {\n            self.resize();\n        });\n\n        this._viewer.addHandler('resize', function() {\n            self.resize();\n        });\n\n        this.resize();\n    };\n\n    // ----------\n    Overlay.prototype = {\n        // ----------\n        node: function() {\n            return this._node;\n        },\n\n        // ----------\n        resize: function() {\n            if (this._containerWidth !== this._viewer.container.clientWidth) {\n                this._containerWidth = this._viewer.container.clientWidth;\n                this._svg.setAttribute('width', this._containerWidth);\n            }\n\n            if (this._containerHeight !== this._viewer.container.clientHeight) {\n                this._containerHeight = this._viewer.container.clientHeight;\n                this._svg.setAttribute('height', this._containerHeight);\n            }\n\n            var p = this._viewer.viewport.pixelFromPoint(new $.Point(0, 0), true);\n            var zoom = this._viewer.viewport.getZoom(true);\n            var rotation = this._viewer.viewport.getRotation();\n            // TODO: Expose an accessor for _containerInnerSize in the OSD API so we don't have to use the private variable.\n            var scale = this._viewer.viewport._containerInnerSize.x * zoom;\n            this._node.setAttribute('transform',\n                'translate(' + p.x + ',' + p.y + ') scale(' + scale + ') rotate(' + rotation + ')');\n        },\n\n        // ----------\n        onClick: function(node, handler) {\n            // TODO: Fast click for mobile browsers\n\n            new $.MouseTracker({\n                element: node,\n                clickHandler: handler\n            }).setTracking(true);\n        }\n    };\n\n})();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegionNode.vue?vue&type=style&index=0&id=2c5b5f05&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.xmlJsonString)?_c('Editor',{attrs:{\"iiifUrl\":_vm.iiifUrl,\"xmlJson\":_vm.toJsonObject}}):_c('Editor',{attrs:{\"iiifUrl\":_vm.iiifUrl,\"xmlJson\":_vm.xmlJson}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"hero is-fullheight-with-navbar\"},[_c('TranscriptionInterfaceLocal',{attrs:{\"iiifUrl\":_vm.iiifUrl,\"xmlJson\":_vm.xmlJson}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"hero is-fullheight-with-navbar\"},[_c('DetailEditLayout',{attrs:{\"name\":_vm.view},scopedSlots:_vm._u([{key:\"image\",fn:function(){return [(_vm.imageInfo)?_c('ImageViewer',{ref:\"viewer\",attrs:{\"source\":_vm.iiifUrl,\"width\":_vm.imageInfo.width,\"height\":_vm.imageInfo.height,\"xmlJson\":_vm.parsedJson,\"results\":_vm.results}}):_vm._e()]},proxy:true},{key:\"content\",fn:function(){return [_c('Content',{attrs:{\"id\":\"textEditor\",\"xmlJson\":_vm.parsedJson}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"is-covering\"},[(_vm.editLayoutHorizontal)?_c('Splitpanes',{staticClass:\"default-theme\",attrs:{\"horizontal\":\"\"}},[_c('Pane',{staticStyle:{\"background\":\"none\",\"height\":\"100%\",\"position\":\"relative\",\"z-index\":\"30\"},attrs:{\"size\":\"50\"}},[_vm._t(\"image\")],2),_c('Pane',{staticStyle:{\"background\":\"none\",\"position\":\"relative\"}},[_vm._t(\"content\")],2)],1):_c('Splitpanes',{staticClass:\"default-theme\"},[_c('Pane',{staticStyle:{\"background\":\"none\",\"position\":\"relative\",\"z-index\":\"30\"},attrs:{\"size\":\"50\"}},[_vm._t(\"image\")],2),_c('Pane',{staticStyle:{\"background\":\"none\",\"position\":\"relative\"}},[_vm._t(\"content\")],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"is-covering\">\n      <Splitpanes v-if=\"editLayoutHorizontal\" horizontal class=\"default-theme\">\n        <Pane\n          size=\"50\"\n          style=\"background: none; height:100%; position: relative;  z-index: 30;\"\n        >\n          <slot name=\"image\"></slot>\n        </Pane>\n        <Pane style=\"background: none; position: relative;\">\n          <slot name=\"content\"></slot>\n        </Pane>\n      </Splitpanes>\n      <Splitpanes v-else class=\"default-theme\">\n        <Pane\n          size=\"50\"\n          style=\"background: none; position: relative;  z-index: 30;\"\n        >\n          <slot name=\"image\"></slot>\n        </Pane>\n        <Pane style=\"background: none; position: relative\">\n          <slot name=\"content\"></slot>\n        </Pane>\n      </Splitpanes>\n    </div>\n</template>\n\n\n<style lang=\"scss\" scoped>\n.splitpanes__pane {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n\n.is-relative {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.hero {\n  .is-covering {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  .is-relative {\n    width: 100%;\n    height: 100%;\n    position: relative;\n  }\n\n  .has-shadow {\n    box-shadow: 2px 0 2px rgba(0, 0, 0, 0.375) !important;\n  }\n\n  .column.is-paddingless-horizontal {\n    padding-left: 0;\n    padding-right: 0;\n  }\n}\n</style>\n\n<script>\nimport { Splitpanes, Pane } from \"splitpanes\";\nimport \"splitpanes/dist/splitpanes.css\";\n\nimport { mapState } from \"vuex\";\n\nexport default {\n  components: { Splitpanes, Pane },\n  computed: {\n    ...mapState('content', ['editLayoutHorizontal'])\n  },\n  props: {\n    name: {\n      type: String,\n      validator: value => {\n        return ['both', 'image', 'content', 'edit'].includes(value)\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEditLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEditLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailEditLayout.vue?vue&type=template&id=4a23ef5e&scoped=true&\"\nimport script from \"./DetailEditLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailEditLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailEditLayout.vue?vue&type=style&index=0&id=4a23ef5e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a23ef5e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return undefined},proxy:true},{key:\"footer\",fn:function(){return undefined},proxy:true}])},[[_c('ContentTextEdit',{attrs:{\"xmlJson\":_vm.xmlJson}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"flex\",\"flex-flow\":\"column nowrap\",\"height\":\"100%\",\"overflow\":\"hidden\",\"width\":\"100%\"}},[_c('div',[_vm._t(\"header\")],2),_vm._t(\"default\"),_vm._t(\"footer\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./DetailContentLayout.vue?vue&type=template&id=1d20946a&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.editor)?_c('div',{staticClass:\"editor\",staticStyle:{\"height\":\"100%\",\"width\":\"100%\",\"flex\":\"1\",\"overflow\":\"auto\"}},[_c('b-loading',{attrs:{\"active\":_vm.isLoading,\"is-full-page\":false},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}}),(_vm.editor)?_c('div',{staticClass:\"editor__header\"},[_c('b-button',{staticStyle:{\"margin-right\":\"6rem\"}},[_c('b-switch',{model:{value:(_vm.isAnnotation),callback:function ($$v) {_vm.isAnnotation=$$v},expression:\"isAnnotation\"}},[_vm._v(\" Annotation \")])],1),_c('b-button',{attrs:{\"title\":'Switch view',\"icon-left\":_vm.layoutIcon()},on:{\"click\":_vm.setEditLayout}}),_c('b-button',{attrs:{\"title\":'Undo',\"icon-left\":\"undo\"},on:{\"click\":function($event){_vm.editor.chain().focus().undo().run()}}}),_c('b-button',{staticStyle:{\"margin-right\":\"6rem\"},attrs:{\"title\":'Redo',\"icon-left\":\"redo\"},on:{\"click\":function($event){_vm.editor.chain().focus().redo().run()}}}),_c('b-button',{attrs:{\"icon-left\":\"save\",\"type\":\"is-success\"},on:{\"click\":_vm.saveContent}},[_vm._v(\"\\n      Save\\n    \")]),(_vm.editor && _vm.isAnnotation && _vm.tagDefs)?_c('hr',{staticClass:\"seperator\"}):_vm._e(),(_vm.editor && _vm.isAnnotation && _vm.tagDefs)?_c('div',{staticClass:\"bubble-menu\"},[_c('b-button',{class:{ 'is-active': _vm.editor.isActive('strike') },attrs:{\"title\":'Strike',\"type\":\"is-primary\",\"icon-left\":\"strikethrough\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleStrike().run()}}}),_c('b-button',{class:{ 'is-active': _vm.editor.isActive('underline') },attrs:{\"title\":'Underline',\"type\":\"is-primary\",\"icon-left\":\"underline\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleUnderline().run()}}}),_c('b-button',{class:{ 'is-active': _vm.editor.isActive('subscript') },attrs:{\"title\":'Subscript',\"type\":\"is-primary\",\"icon-left\":\"subscript\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleSub().run()}}}),_c('b-button',{class:{ 'is-active': _vm.editor.isActive('superscript') },attrs:{\"title\":'Superscript',\"type\":\"is-primary\",\"icon-left\":\"superscript\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleSuper().run()}}}),_vm._l((_vm.tagDefs.definitions.annotations),function(tag,index){return _c('b-button',{key:index,class:{\n          'is-active': _vm.editor.isActive(tag.name, {\n            color: tag.color,\n          }),\n        },style:('background-color:' + tag.color),attrs:{\"icon-left\":\"tag\"},on:{\"click\":function($event){return _vm.setAttributes(tag)}}},[_vm._v(\"\\n        \"+_vm._s(tag.label)+\"\\n      \")])})],2):_vm._e()],1):_vm._e(),_c('hr',{staticClass:\"seperator\"}),(_vm.selectedTag)?_c('div',[_c('div',{staticClass:\"editor__header\",staticStyle:{\"text-align\":\"center\"}},_vm._l((_vm.selectedTag.marks),function(tempTag,index){return _c('div',{key:index,staticClass:\"columns\"},[(tempTag.attrs.tag)?_c('div',{staticClass:\"column\"},[_c('b-tag',{style:((\"outline-color: \" + (tempTag.attrs.color) + \" !important; outline: 2px solid; color : \" + (tempTag.attrs.color) + \" !important;margin-top: auto;margin-bottom: auto;\")),attrs:{\"icon-left\":\"tag\"}},[_vm._v(\"\\n            \"+_vm._s(tempTag.attrs.tag.name)+\"\\n          \")])],1):_vm._e(),_vm._l((_vm.findTagAttributes(tempTag)),function(attribute,i){return _c('div',{key:i,staticClass:\"column\"},[(tempTag.attrs.tag)?_c('b-field',{attrs:{\"label\":attribute,\"label-position\":\"on-border\"}},[_c('b-input',{on:{\"input\":function($event){return _vm.changeContinued(\n                  tempTag,\n                  tempTag.attrs.tag.attributes[attribute],\n                  attribute\n                )}},model:{value:(tempTag.attrs.tag.attributes[attribute]),callback:function ($$v) {_vm.$set(tempTag.attrs.tag.attributes, attribute, $$v)},expression:\"tempTag.attrs.tag.attributes[attribute]\"}})],1):_vm._e()],1)}),(tempTag.attrs.tag)?_c('div',{staticClass:\"column\"},[_c('b-button',{attrs:{\"type\":\"danger\",\"icon-left\":\"trash\"},on:{\"click\":function($event){_vm.editor\n                .chain()\n                .focus()\n                .selectParentNode()\n                .unsetMark(tempTag.type)\n                .run()}}},[_vm._v(\"\\n            Delete\\n          \")])],1):_vm._e()],2)}),0)]):_vm._e(),_c('editor-content',{staticClass:\"editor__content\",staticStyle:{\"text-align\":\"center\"},attrs:{\"editor\":_vm.editor}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('node-view-wrapper',{staticClass:\"region\"},[_c('node-view-content',{staticClass:\"content\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <node-view-wrapper class=\"region\">\n    <!-- <span v-if=\"this.node.attrs.lines.attributes.id\" class=\"label\">Region {{ this.node.attrs.lines.attributes.id }}</span> -->\n    <node-view-content class=\"content\"> </node-view-content>\n  </node-view-wrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent, nodeViewProps } from \"@tiptap/vue-2\";\n\nexport default {\n  components: {\n    NodeViewWrapper,\n    NodeViewContent,\n  },\n\n  props: nodeViewProps,\n\n  selectable: false,\n};\n</script>\n\n<style lang=\"scss\" scoped>\n// .region {\n//   background: #e1ebee;\n//   border: 1px solid #0d0d0d;\n//   border-radius: 0.5rem;\n//   margin: 1rem 0;\n//   position: relative;\n// }\n\n.label {\n  margin-left: 1rem;\n  background-color: #0d0d0d;\n  font-size: 0.6rem;\n  letter-spacing: 1px;\n  font-weight: bold;\n  text-transform: uppercase;\n  color: #fff;\n  position: absolute;\n  top: 0;\n  padding: 0.25rem 0.75rem;\n  border-radius: 0 0 0.5rem 0.5rem;\n}\n\n.content {\n  // margin-top: 1.5rem;\n  padding: 0.3rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegionNode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegionNode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RegionNode.vue?vue&type=template&id=2c5b5f05&scoped=true&\"\nimport script from \"./RegionNode.vue?vue&type=script&lang=js&\"\nexport * from \"./RegionNode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RegionNode.vue?vue&type=style&index=0&id=2c5b5f05&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c5b5f05\",\n  null\n  \n)\n\nexport default component.exports","import { Node, mergeAttributes } from \"@tiptap/core\";\nimport { VueNodeViewRenderer } from \"@tiptap/vue-2\";\nimport Component from \"./RegionNode.vue\";\n\nexport default Node.create({\n  name: \"region\",\n\n  group: \"block\",\n\n  content: \"(line+ | table+)\",\n\n  addAttributes() {\n    return {\n      lines: {\n        default: [],\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: \"div\",\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\"div\", mergeAttributes(HTMLAttributes)];\n  },\n\n  addNodeView() {\n    return VueNodeViewRenderer(Component);\n  },\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (this.node.attrs.line.attributes)?_c('node-view-wrapper',{staticClass:\"line\"},[_c('div',{on:{\"click\":function($event){return _vm.onMouseClick(_vm.node.attrs.line.attributes.id)},\"mouseout\":function($event){return _vm.onMouseOut(_vm.node.attrs.line.attributes.id)},\"mouseover\":function($event){return _vm.onMouseOver(_vm.node.attrs.line.attributes.id)}}},[_c('node-view-content',{attrs:{\"id\":this.node.attrs.line.attributes.id}})],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <node-view-wrapper v-if=\"this.node.attrs.line.attributes\" class=\"line\">\n    <!-- <div\n    @mouseout=\"onMouseOut(node.attrs.line.attributes.id)\" @mouseover=\"onMouseOver(node.attrs.line.attributes.id)\"\n      class=\"drag-handle\"\n      contenteditable=\"false\"\n      draggable=\"true\"\n      data-drag-handle\n    /> -->\n    <div\n      @click=\"onMouseClick(node.attrs.line.attributes.id)\"\n      @mouseout=\"onMouseOut(node.attrs.line.attributes.id)\"\n      @mouseover=\"onMouseOver(node.attrs.line.attributes.id)\"\n    >\n      <node-view-content :id=\"this.node.attrs.line.attributes.id\">\n      </node-view-content>\n    </div>\n  </node-view-wrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent, nodeViewProps } from '@tiptap/vue-2'\nimport { mapState } from 'vuex'\n\nexport default {\n  components: {\n    NodeViewWrapper,\n    NodeViewContent\n  },\n  methods: {\n    highlight(id) {\n      this.$store.dispatch('content/highlight', {\n        target: id,\n        origin: 'content'\n      })\n    },\n    select(id) {\n      this.$store.dispatch('content/select', {\n        target: id,\n        origin: 'content'\n      })\n    },\n    onMouseOver(id) {\n      this.highlight(id)\n    },\n    onMouseOut(id) {\n      this.highlight(id)\n    },\n    onMouseClick(id) {\n      this.select(id)\n    }\n  },\n\n  props: nodeViewProps\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/variables.scss';\n\n.line {\n  .drag-handle {\n    flex: 0 0 auto;\n    position: relative;\n    width: 1rem;\n    height: 1rem;\n    top: 0.3rem;\n    margin-right: 0.5rem;\n    cursor: grab;\n    background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 16\"><path fill-opacity=\"0.2\" d=\"M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" /></svg>');\n    background-repeat: no-repeat;\n    background-size: contain;\n    background-position: center;\n  }\n}\n\n// .label {\n//   margin-left: 1rem;\n//   background-color: #0d0d0d;\n//   font-size: 0.6rem;\n//   letter-spacing: 1px;\n//   font-weight: bold;\n//   text-transform: uppercase;\n//   color: #fff;\n//   position: absolute;\n//   top: 0;\n//   border-radius: 0 0 0.5rem 0.5rem;\n// }\n\n// .is-selected {\n//   outline: none;\n//   border-color: $link-80;\n//   background-color: $link-20;\n// }\n\n.content {\n  flex: 1 1 auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LineNode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LineNode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LineNode.vue?vue&type=template&id=2f37dab6&scoped=true&\"\nimport script from \"./LineNode.vue?vue&type=script&lang=js&\"\nexport * from \"./LineNode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LineNode.vue?vue&type=style&index=0&id=2f37dab6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f37dab6\",\n  null\n  \n)\n\nexport default component.exports","import { Node, mergeAttributes } from \"@tiptap/core\";\nimport { VueNodeViewRenderer } from \"@tiptap/vue-2\";\nimport Component from \"./LineNode.vue\";\nimport { TextSelection } from \"prosemirror-state\";\nimport { Plugin, PluginKey } from \"prosemirror-state\";\n\nexport default Node.create({\n  name: \"line\",\n\n  group: \"block+\",\n\n  // content: '(inline* | tag*)',\n  content: \"inline* \",\n  addAttributes() {\n    return {\n      line: {\n        default: [],\n      },\n    };\n  },\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        props: {\n          handleKeyDown: (view, event) => {\n            if (event.which === 8 || event.which === 46) {\n              view.state.deleting = true;\n            }\n\n            return false;\n          },\n        },\n\n        filterTransaction: (transaction, state) => {\n          var isDeleting = state.deleting;\n\n          if (!state.deleting) {\n            return true;\n          }\n\n          var result = true;\n\n          transaction.mapping.maps.forEach((map) => {\n            map.forEach((oldStart, oldEnd, newStart, newEnd) => {\n              state.doc.nodesBetween(\n                oldStart,\n                oldEnd,\n                (node, number, pos, parent, index) => {\n                  if (node.type.name === \"line\") {\n                    result = false;\n                  }\n                }\n              );\n            });\n          });\n\n          return result;\n        },\n      }),\n    ];\n  },\n  addKeyboardShortcuts() {\n    return {\n      Enter: (state, dispatch, view) => {\n        this.editor.chain().focus().selectNodeForward().run();\n        // this.editor.commands.selectNodeForward()\n        if (this.editor.state.selection.node) {\n          var lineId =\n            this.editor.state.selection.node.attrs.line.attributes.id;\n          const el = document.getElementById(lineId);\n          el.scrollIntoView({ behavior: \"smooth\" });\n        }\n\n        return true;\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: \"div\",\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\"div\", mergeAttributes(HTMLAttributes)];\n  },\n\n  addNodeView() {\n    return VueNodeViewRenderer(Component);\n  },\n});\n","import Highlight from \"@tiptap/extension-highlight\";\n\nimport { Node, mergeAttributes } from \"@tiptap/core\";\n\nexport async function tagExtensions(tagDefs) {\n  var tagExtensionArr = [];\n  for (var tagIndex in tagDefs) {\n    var tag = tagDefs[tagIndex];\n    var tempExtension = Highlight.extend({\n      name: tag.name,\n      addKeyboardShortcuts() {\n        return {\n          \"Mod-l\": () => this.editor.commands.toggleBulletList(),\n        };\n      },\n      addCommands() {\n        return {\n          setTag:\n            () =>\n            ({ commands }) => {\n              return commands.setMark(tag.name);\n            },\n          toggleTag:\n            (attributes) =>\n            ({ commands, tr, state, dispatch }) => {\n              return commands.toggleMark(attributes.name, attributes);\n            },\n          unsetTag:\n            () =>\n            ({ commands }) => {\n              return commands.unsetMark(tag.name);\n            },\n        };\n      },\n      addAttributes() {\n        // Return an object with attribute configuration\n        return {\n          tag: {\n            default: {},\n          },\n          annotationId: {\n            default: null,\n          },\n          color: {\n            default: tag.color,\n            parseHTML: (element) => {\n              return [\n                {\n                  color:\n                    element.getAttribute(\"data-color\") ||\n                    element.style.backgroundColor,\n                },\n                {\n                  tag: tag.name,\n                },\n              ];\n            },\n            renderHTML: (attributes) => {\n              if (!attributes.color) {\n                return {};\n              }\n\n              return {\n                \"data-color\": attributes.color,\n                style: `outline-color: ${attributes.color} !important; outline: 2px solid;`,\n                class: \"tag\",\n              };\n            },\n          },\n        };\n      },\n      // parseHTML() {\n      //   return [{ tag: 'a[href]' }]\n      // },\n\n      renderHTML({ HTMLAttributes }) {\n        return [\n          \"a\",\n          mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\n          0,\n        ];\n      },\n    });\n    tagExtensionArr.push(tempExtension);\n  }\n\n  return tagExtensionArr;\n}\n","import {\n  Command,\n  Mark,\n  markInputRule,\n  markPasteRule,\n  mergeAttributes,\n} from \"@tiptap/core\";\n\nexport const Subscript = Mark.create({\n  name: \"subscript\",\n\n  defaultOptions: {\n    HTMLAttributes: {},\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: \"subscript\",\n      },\n      {\n        tag: \"del\",\n      },\n      {\n        tag: \"subscript\",\n      },\n      {\n        style: \"text-decoration\",\n        consuming: false,\n        getAttrs: (style) => (style.includes(\"line-through\") ? {} : false),\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\n      \"sub\",\n      mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\n      0,\n    ];\n  },\n\n  addCommands() {\n    return {\n      setSub:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(\"subscript\");\n        },\n      toggleSub:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(\"subscript\");\n        },\n      unsetSub:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(\"subscript\");\n        },\n    };\n  },\n});\n","import {\n  Command,\n  Mark,\n  markInputRule,\n  markPasteRule,\n  mergeAttributes,\n} from \"@tiptap/core\";\n\nexport const Superscript = Mark.create({\n  name: \"superscript\",\n\n  defaultOptions: {\n    HTMLAttributes: {},\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: \"superscript\",\n      },\n      {\n        tag: \"del\",\n      },\n      {\n        tag: \"superscript\",\n      },\n      {\n        style: \"text-decoration\",\n        consuming: false,\n        getAttrs: (style) => (style.includes(\"line-through\") ? {} : false),\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\n      \"sup\",\n      mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\n      0,\n    ];\n  },\n\n  addCommands() {\n    return {\n      setSuper:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(\"superscript\");\n        },\n      toggleSuper:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(\"superscript\");\n        },\n      unsetSuper:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(\"superscript\");\n        },\n    };\n  },\n});\n","export default {\n  // imageBaseUrl: 'https://dbis-thure.uibk.ac.at/iiif/2',\n  // imageBaseUrl: 'https://files-test.transkribus.eu/iiif/2',\n  urls: {\n    image: \"https://files.transkribus.eu/iiif/2\",\n    xml: \"https://files.transkribus.eu/Get?id=\",\n  },\n  hashidsSecret: \"1234\",\n  token: \"\",\n  transcriptionURL: \"https://transkribus.eu/r/testing/sandbox/application/\",\n  searchApiBaseUrl: \"https://transkribus.eu/r/zQPlDb1ZvVWJuiBU/api/v0\",\n  apiBaseUrl: \"https://transkribus.eu/TrpServerTesting/rest\",\n  contactEmail: \"info@readcoop.eu\",\n  bugEmail: \"bugs@readcoop.eu\",\n  bugtrackerUrl:\n    \"incoming+readcoop-webdev-public-transkribuslite-25175868-issue-@incoming.gitlab.com\",\n  repo: \"https://gitlab.com/readcoop/webdev/public/transkribuslite\",\n  consentCookie: \"cookieaccepted\",\n  recordSession: true,\n};\n","const { xml2js, json2xml } = require(\"xml-js\");\nconst jp = require(\"jmespath\");\nconst simplify = require(\"simplify-js\");\n\nconst XML2JS = {\n  DEFAULT: {\n    compact: false,\n    trim: false,\n    alwaysArray: true,\n    alwaysChildren: true,\n    attributeValueFn: parseAttributeValue,\n  },\n  TEST: {\n    compact: false,\n    attributeValueFn: parseAttributeValue,\n  },\n};\n\nconst SIMPLIFY_TOLERANCE = 25; // pixels\n\nfunction parsePointsAttribute(string = \"\") {\n  return string\n  .split(/\\s+/)\n  .map(string => string.split(/\\s*,\\s*/).map(x => parseInt(x)))\n  .map(([x, y]) => ({ x, y }))\n  // return simplify(\n  //   string\n  //     .split(/\\s+/)\n  //     .map((string) => string.split(/\\s*,\\s*/).map((x) => parseInt(x)))\n  //     .map(([x, y]) => ({ x, y })),\n  //   SIMPLIFY_TOLERANCE\n  // );\n}\n\nfunction reverseParsePointsAttribute(values) {\n  var pointString = \"\";\n  for (var point in values.points) {\n    var temp = values.points[point];\n    pointString += temp.x + \",\" + temp.y + \" \";\n  }\n  values.points = pointString.replace(/\\s*$/, \"\");\n}\n\nfunction parseCustomAttribute(string) {\n  if (string === \"\") return [];\n\n  return string.split(\"} \").reduce((results, string) => {\n    const name = string.split(\" {\")[0];\n    let attrs = string.split(\" {\")[1];\n\n    if (attrs.indexOf(\"}\")) attrs = attrs.replace(\"}\", \"\");\n\n    var key, value;\n\n    return results.concat({\n      name: name.trim(),\n      attributes: attrs.split(\";\").reduce((attrs, string) => {\n        string = string.trim();\n        if (string) {\n          key = string.split(\":\")[0].trim();\n          value = decodeURIComponent(\n            JSON.parse(\n              '\"' + string.split(\":\")[1].trim().replace('\"', '\\\\\"') + '\"'\n            )\n          );\n          if (key === \"index\" || key === \"offset\" || key === \"length\") {\n            attrs[key] = parseInt(value);\n          } else if (\n            key === \"continued\" ||\n            key === \"superscript\" ||\n            key === \"bold\" ||\n            key === \"italic\" ||\n            key === \"subscript\"\n          ) {\n            attrs[key] = Boolean(value);\n          } else attrs[key] = value;\n        }\n        return attrs;\n      }, {}),\n    });\n  }, []);\n}\n\nfunction reverseParseparseCustomAttribute(value) {\n  var customString = \"\";\n  for (var custom in value.custom) {\n    var temp = value.custom[custom];\n    customString +=\n      temp.name +\n      \" \" +\n      JSON.stringify(temp.attributes).replaceAll('\"', \"\").replaceAll(\",\", \";\") +\n      \" \";\n  }\n  value.custom = customString;\n}\n\nfunction parseAttributeValue(value, name) {\n  switch (name) {\n    case \"points\":\n      return parsePointsAttribute(value);\n    case \"custom\":\n      return parseCustomAttribute(value);\n    default:\n      return value;\n  }\n}\n\nfunction reverseParseAttributeValue(values, name) {\n  if (values.points) {\n    reverseParsePointsAttribute(values);\n  }\n  if (values.custom) {\n    reverseParseparseCustomAttribute(values);\n  }\n  if (values.imgUrl) {\n    values.imgUrl = values.imgUrl.replaceAll(\"&\", \"&amp;\");\n  }\n  switch (name) {\n    case \"points\":\n      return reverseParsePointsAttribute(values);\n    case \"custom\":\n      return reverseParseparseCustomAttribute(values);\n    default:\n      return values;\n  }\n}\n\nexport function getObjects(obj, key, val) {\n  var objects = [];\n  for (var i in obj) {\n    if (!obj.hasOwnProperty(i)) continue;\n    if (typeof obj[i] == \"object\") {\n      objects = objects.concat(getObjects(obj[i], key, val));\n    } else if ((i == key && obj[i] == val) || (i == key && val == \"\")) {\n      objects.push(obj);\n    } else if (obj[i] == val && key == \"\") {\n      if (objects.lastIndexOf(obj) == -1) {\n        objects.push(obj);\n      }\n    }\n  }\n  return objects;\n}\n\nfunction replaceLine(obj, key, val, textString, customObjArr) {\n  for (var i in obj) {\n    if (!obj.hasOwnProperty(i)) continue;\n    if (typeof obj[i] == \"object\") {\n      if (obj[i] && obj[i].name == \"TextLine\" && obj[i].attributes) {\n        if (obj[i].attributes.id == val) {\n          obj[i].attributes.custom = customObjArr;\n          var elementArr = {\n            elements: [{ text: \"\", type: \"text\" }],\n            name: \"Unicode\",\n            type: \"element\",\n          };\n          obj[i].elements[2].elements[0] = elementArr;\n          obj[i].elements[2].elements[0].elements[0].text = textString;\n          return obj[i];\n        }\n      }\n      replaceLine(obj[i], key, val, textString, customObjArr);\n    } else if ((i == key && obj[i] == val) || (i == key && val == \" \")) {\n      obj[i].attributes.custom = customObjArr;\n      obj[i].elements[2].elements[0].elements[0].text = textString;\n      return obj[i];\n    }\n  }\n}\n\nexport function getValues(obj, key) {\n  var objects = [];\n  for (var i in obj) {\n    if (!obj.hasOwnProperty(i)) continue;\n    if (typeof obj[i] == \"object\") {\n      objects = objects.concat(getValues(obj[i], key));\n    } else if (i == key) {\n      objects.push(obj[i]);\n    }\n  }\n  return objects;\n}\n\nexport function getKeys(obj, val) {\n  var objects = [];\n  for (var i in obj) {\n    if (!obj.hasOwnProperty(i)) continue;\n    if (typeof obj[i] == \"object\") {\n      objects = objects.concat(getKeys(obj[i], val));\n    } else if (obj[i] == val) {\n      objects.push(i);\n    }\n  }\n  return objects;\n}\n\nexport function parseEditorOutput(editorJson, globalJson) {\n  var editorLineArr = getObjects(editorJson, \"type\", \"line\");\n  for (var lineIndex in editorLineArr) {\n    var line = editorLineArr[lineIndex];\n    var customObjArr = [];\n    customObjArr.push(line.attrs.line.attributes.custom[0]);\n    var textString = \"\";\n    if (line.content == undefined) {\n      replaceLine(\n        globalJson,\n        \"id\",\n        line.attrs.line.attributes.id,\n        \" \",\n        customObjArr\n      );\n    }\n    for (var contentIndex in line.content) {\n      var lineContent = line.content[contentIndex];\n      var text = lineContent.text;\n      if (lineContent.marks) {\n        for (var markIndex in lineContent.marks) {\n          var mark = lineContent.marks[markIndex];\n          var attributes = {};\n          var name = mark.type;\n          var offset = textString.length;\n          var length = text.length;\n          if (mark.attrs) {\n            attributes = mark.attrs.tag.attributes;\n          }\n\n          if (attributes.offset === undefined) {\n            //TODO check for continued\n            attributes.offset = offset;\n            attributes.length = length;\n          }\n\n          switch (name) {\n            case \"strike\":\n              name = \"textStyle\";\n              attributes.strikethrough = true;\n              break;\n            case \"underline\":\n              name = \"textStyle\";\n              attributes.underlined = true;\n              break;\n            case \"subscript\":\n              name = \"textStyle\";\n              attributes.subscript = true;\n              break;\n\n            case \"superscript\":\n              name = \"textStyle\";\n              attributes.superscript = true;\n              break;\n          }\n\n          customObjArr.push({ name: name, attributes: attributes });\n        }\n      }\n      textString += text;\n      replaceLine(\n        globalJson,\n        \"id\",\n        line.attrs.line.attributes.id,\n        textString,\n        customObjArr\n      );\n    }\n  }\n  return globalJson;\n}\n\nexport function parseToXML(json) {\n  var options = {\n    compact: false,\n    ignoreComment: true,\n    spaces: 4,\n    sanitize: false,\n    attributesFn: reverseParseAttributeValue,\n  };\n  var result = json2xml(json, options);\n  return result;\n}\n\nexport function parseJsonContent(json) {\n  const result = jp.search(\n    json,\n    \"{ declaration: declaration,PcGts: elements[?name == 'PcGts'].{type: name,attributes: attributes,Page: elements[?name == 'Page'].{type: name,attributes: attributes,elements: elements[?name == 'TextRegion' || name == 'TableRegion'].{type: name,attributes: attributes,geometry: {coords: elements[?name == 'Coords'].attributes.points | [0]},elements: elements[?name == 'TextLine' || name == 'TableCell'].{type: name,attributes: attributes,geometry: {coords: elements[?name == 'Coords'].attributes.points | [0],baseline: elements[?name == 'Baseline'].attributes.points | [0]},elements: [elements[?name == 'TextEquiv' || name == 'TextLine'].{ elements:[elements[?name == 'Unicode' || name == 'TextEquiv'].[elements[?type == 'text' || name == 'Unicode']] | []], attributes : attributes, geometry: {coords: elements[?name == 'Coords'].attributes.points | [0]}}] | [] | [] | []} | []} } | [0]} | [0]}\"\n  );\n  return result.PcGts.Page;\n}\n\nexport function parsePageContent(xml, type = \"DEFAULT\") {\n  const js = xml2js(xml, XML2JS[type]);\n  var json = JSON.parse(JSON.stringify(js));\n  this.$store.dispatch(\"content/setXmlModel\", {\n    xmlModel: json,\n  });\n  const result = jp.search(\n    js,\n    \"{ declaration: declaration,PcGts: elements[?name == 'PcGts'].{type: name,attributes: attributes,Page: elements[?name == 'Page'].{type: name,attributes: attributes,elements: elements[?name == 'TextRegion' || name == 'TableRegion'].{type: name,attributes: attributes,geometry: {coords: elements[?name == 'Coords'].attributes.points | [0]},elements: elements[?name == 'TextLine' || name == 'TableCell'].{type: name,attributes: attributes,geometry: {coords: elements[?name == 'Coords'].attributes.points | [0],baseline: elements[?name == 'Baseline'].attributes.points | [0]},elements: [elements[?name == 'TextEquiv' || name == 'TextLine'].{ elements:[elements[?name == 'Unicode' || name == 'TextEquiv'].[elements[?type == 'text' || name == 'Unicode']] | []], attributes : attributes, geometry: {coords: elements[?name == 'Coords'].attributes.points | [0]}}] | [] | [] | []} | []} } | [0]} | [0]}\"\n  );\n  return result.PcGts.Page;\n}\n","import config from \"../config\";\nimport { parsePageContent } from \"./xml.js\";\nimport pkg from \"../../package.json\";\n\nconst fetch = require(\"node-fetch\");\n\nconst CONTENT = \"https://transkribus.eu/r/zQPlDb1ZvVWJuiBU/api/v0\";\n\nasync function logOut() {\n  const response = await this.$auth.loginWith(\"keycloak\");\n}\n\nexport function getImageSize(imageUrl) {\n  \n}\n\nexport async function fetchSearchResults(\n  { term, documents, titles, page, fuzziness },\n  { offset = 0, limit = 10 }\n) {\n  const res = await window.$nuxt.$axios(\n    \"https://transkribus.eu/r/search/search\",\n    {\n      method: \"POST\",\n      body: JSON.stringify({\n        term,\n        collections: [collection],\n        documents,\n        titles,\n        page,\n        fuzziness,\n        offset,\n        limit,\n      }),\n      headers: {\n        \"Content-Type\": CONTENT_TYPE,\n        Accept: CONTENT_TYPE,\n      },\n    }\n  );\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchSearchFacets({\n  term,\n  documents,\n  titles,\n  fuzziness,\n}) {\n  const res = await window.$nuxt.$axios(\n    \"https://transkribus.eu/r/search/facets\",\n    {\n      method: \"POST\",\n      body: JSON.stringify({\n        term,\n        collections: [collection],\n        documents,\n        titles,\n        fuzziness,\n      }),\n      headers: {\n        \"Content-Type\": CONTENT_TYPE,\n        Accept: CONTENT_TYPE,\n      },\n    }\n  );\n  const data = await res.json();\n  if (res.status === 401) {\n    logOut();\n  }\n  const { total, facets, params } = data;\n  return {\n    total,\n    facets,\n    params,\n  };\n}\n\nexport async function fetchSearchFulltext({ term, start, rows, filter }) {\n  const res = await window.$nuxt.$axios.get(\"/search/fulltext\", {\n    params: {\n      query: term,\n      type: \"LinesLc\",\n      start: start,\n      rows: rows,\n      filter: filter,\n    },\n  });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function uploadImageJSON({ data, colId }) {\n  const res = await window.$nuxt.$axios(\"/uploads\", {\n    method: \"post\",\n    params: {\n      collId: colId,\n    },\n    data: data,\n  });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function uploadImageData({ uploadId, formData }) {\n  const res = await window.$nuxt.$axios(\"/uploads/\" + uploadId, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n    data: formData,\n    // onUploadProgress: e => {\n    //   // updating progress indicator\n    //   // progress(e.lengthComputable, e.loaded, e.total)\n    // }\n  });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) return this.$auth.loginWith(\"keycloak\");\n  else throw new Error(res);\n}\n\nexport async function uploadPDFData({ collId, formData }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/createDocFromPdf\",\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n      data: formData,\n    }\n  );\n  if (res.status === 200) return res.data;\n  else throw new Error(res);\n}\n\nexport async function fetchCollections({ offset, limit }) {\n  const res = await window.$nuxt.$axios.get(\"/collections/list\", {\n    params: {\n      nValues: limit,\n      index: offset,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchCollectionsForUser({ userid }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + userid + \"/listCols\",\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchUsersForCollection({ collId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/userlist\",\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\n// Get tag def from https://transkribus.eu/r/storage/collections/{colId}\n\nexport async function fetchStorageTagDef({ collId }) {\n  const res = await window.$nuxt.$axios\n    .get(\"https://transkribus.eu/r/storage/collections/\" + collId)\n    .catch(function (error) {\n      console.log(error);\n      throw new Error(res);\n    });\n\n  if (res.status === 200) {\n    return res.data;\n  }\n}\n\nexport async function saveStorageTagDef({ data, collId }) {\n  const res = await window.$nuxt.$axios.post(\n    \"https://transkribus.eu/r/storage/collections/\",\n    {\n      data: data,\n      id: collId,\n    },\n    {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  // if (res.status === 401) {\n  //   logOut()\n  // } else throw new Error(res)\n}\n\nexport async function fetchTagDef({ collId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/listTagDefs\",\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function saveTagDef({ def, collId }) {\n  console.log(\"saveTagdef\");\n  console.log(def);\n  const json = JSON.stringify(def);\n  const res = await window.$nuxt.$axios.post(\n    \"/collections/\" + collId + \"/tagDefs\",\n    json,\n    {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function findUser({ mail, firstName, lastName }) {\n  const res = await window.$nuxt.$axios.get(\"/user/findUser\", {\n    params: {\n      user: mail,\n      firstName: firstName,\n      lastName: lastName,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function addModifyUserCollection({ collId, userId, role }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/addOrModifyUserInCollection\",\n    {\n      method: \"POST\",\n      params: {\n        userid: userId,\n        role: role,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function removeUserCollection({ collId, userId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/removeUserFromCollection\",\n    {\n      method: \"POST\",\n      params: {\n        userid: userId,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function deleteDocument({ collId, docId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/\" + docId,\n    {\n      method: \"DELETE\",\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function removeDocumentCollection({ collId, docId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/removeDocFromCollection\",\n    {\n      method: \"POST\",\n      params: {\n        id: docId,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function addDocumentCollection({ collId, docId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/addDocToCollection\",\n    {\n      method: \"POST\",\n      params: {\n        id: docId,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function fetchCollectionsMeta({ collId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/metadata\",\n    {\n      params: {\n        stats: true,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchDocuments({ collId, offset, limit }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/list\",\n    {\n      params: {\n        nValues: limit,\n        index: offset,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchDocumentsMeta({ collId, docId, limit }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/\" + docId + \"/metadata\",\n    {\n      params: {\n        nrOfTranscripts: limit,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchPages({ collId, docId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/\" + docId + \"/fulldoc\",\n    {\n      params: {\n        nrOfTranscripts: 1,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchPagesString({ collId, docId, offset, limit }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/\" + docId + \"/pages\",\n    {\n      params: {\n        pages: offset + \"-\" + limit,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchPageContent({ id }) {\n  const res = await window.$nuxt.$axios.get(\n    config.searchApiBaseUrl + \"/content/\" + id,\n    {\n      method: \"GET\",\n    }\n  );\n  if (res.status === 200) return res.data.PcGts.Page;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchPageContentXML({ id }) {\n  const res = await fetch(`https://files.transkribus.eu/Get?id=${id}`, {\n    method: \"GET\",\n  });\n  const xml = await res.text();\n  //console.log(xml)\n  if (res.status === 200) {\n    return parsePageContent(xml);\n  }\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function setPageContentXML({\n  collId,\n  id,\n  page,\n  xml,\n  status,\n  parentTranscriptId,\n}) {\n  const res = await window.$nuxt.$axios(\n    `/collections/${collId}/${id}/${page}/text`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"text/xml\" },\n      params: {\n        status: status,\n        // parent: parentTranscriptId,\n        toolName: \"TranskribusLite\" + pkg.version,\n      },\n      data: xml,\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function fetchContent(id) {\n  const res = await fetch(`${CONTENT}/content/${id}`);\n  if (res.status === 200) return res.json();\n  return null;\n}\n\nexport async function fetchImageMeta({ key }) {\n  const res = await window.$nuxt.$axios.get(\n    config.urls.image + \"/\" + key + \"/info.json\",\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchFacets({ ...params } = {}) {\n  const res = await client.get(\"/facets\", { params: params });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchCounts({ type, ...params }) {\n  if (![\"scope\", \"year\"].includes(type)) {\n    console.error(`Unexpected type '${type}'`);\n    return null;\n  }\n\n  const res = await client.get(`/counts/${type}`, { params: params });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchItems({ path, offset, limit, ...others }) {\n  const res = await client.get(`/items`, {\n    params: {\n      path,\n      offset,\n      limit,\n      ...others,\n    },\n  });\n  if (res.status !== 200) throw new Error(res.status);\n  if (res.status === 401) {\n    logOut();\n  }\n  return res.data;\n}\n\nexport async function fetchScopeLabels({ scope, offset, limit, ...others }) {\n  const res = await client.get(`/levels`, {\n    params: {\n      scope,\n      offset,\n      limit,\n      ...others,\n    },\n  });\n  if (res.status === 200)\n    return res.data.map(({ value, count }) => ({\n      label: value,\n      count: count,\n    }));\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchDocumentInfo({ id }) {\n  const res = await window.$nuxt.$axios.get(`/documents/${id}`);\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchPageInfo({ collId, docId, pageNr }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/\" + docId + \"/\" + pageNr,\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchPagesForDocument({ id, offset, limit }) {\n  const res = await client.get(\n    config.searchApiBaseUrl + `/documents/${id}/pages`,\n    {\n      params: {\n        offset,\n        limit,\n      },\n    }\n  );\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function getPublicModels() {\n  const res = await window.$nuxt.$axios.get(\n    \"https://readcoop.eu/wp-json/wp/v2/model\",\n    {\n      params: {\n        per_page: 100,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n}\n\nexport async function getHTRModels({ collId }) {\n  const res = await window.$nuxt.$axios.get(`/recognition/${collId}/list`);\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function startHTR({ collId, htrModelId, docId, pageString }) {\n  const res = await window.$nuxt.$axios(\n    \"/recognition/\" + collId + \"/\" + htrModelId + \"/htrCITlab\",\n    {\n      method: \"POST\",\n      params: {\n        id: docId,\n        pages: pageString,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function startPylaia({ collId, modelId, docId, pageString }) {\n  const res = await window.$nuxt.$axios(\n    \"/pylaia/\" + collId + \"/\" + modelId + \"/recognition\",\n    {\n      method: \"POST\",\n      params: {\n        id: docId,\n        pages: pageString,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function createCollection({ collName }) {\n  const res = await window.$nuxt.$axios(\"/collections/createCollection\", {\n    method: \"POST\",\n    params: {\n      collName: collName,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchJob({ jobId }) {\n  const res = await window.$nuxt.$axios.get(\"/jobs/\" + jobId, {\n    params: {\n      nrOfTranscripts: 1,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchCreditCost() {\n  const res = await window.$nuxt.$axios.get(\"/credits/costs\");\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchCreditCalculation({ collId, modelId, pages }) {\n  const res = await window.$nuxt.$axios(\n    \"/recognition/\" + collId + \"/\" + modelId + \"/costs\",\n    {\n      method: \"GET\",\n      params: {\n        nrOfPages: pages,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  // if (res.status === 401) {\n  //   logOut()\n  // } else throw new Error(res)\n}\n\nexport async function fetchCredits() {\n  const res = await window.$nuxt.$axios.get(\"/credits\");\n  if (res.status === 200) {\n    return res.data;\n  }\n  // if(res.status === 401) {\n  //   // logOut()\n  //   var noCredits = {overallBalance: 0}\n  //   return noCredits\n  // }\n  else throw new Error(res);\n}\n\nexport async function fetchCreditsCollection({ collId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/credits\"\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else throw new Error(res);\n}\n\nexport async function fetchCreditsAssigned({ packageId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/credits/\" + packageId + \"/collections\"\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else throw new Error(res);\n}\n\nexport async function fetchCreditsTransactions({ packageId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/credits/\" + packageId + \"/creditTransactions\"\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else throw new Error(res);\n}\n\nexport async function addCreditsCollection({ collId, packageId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/credits/\" + packageId,\n    {\n      method: \"POST\",\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function removeCreditsCollection({ collId, packageId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/credits/\" + packageId,\n    {\n      method: \"DELETE\",\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function splitCredits({ packageId, balance }) {\n  balance = parseFloat(balance);\n  const res = await window.$nuxt.$axios(\"/credits/\", {\n    method: \"POST\",\n    params: {\n      sourcePackageId: packageId,\n    },\n    data: {\n      balance,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function fetchJobs({ offset, limit }) {\n  const res = await window.$nuxt.$axios.get(\"/jobs/list\", {\n    params: {\n      nValues: limit,\n      index: offset,\n      filterByUser: true,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function getXML({ url }) {\n  const res = await window.$nuxt.$axios.get(url, {\n    headers: {\n      Accept: \"application/xml\",\n    },\n  });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n","<template>\n  <div\n    class=\"editor\"\n    v-if=\"editor\"\n    style=\"height: 100%; width: 100%; flex: 1; overflow: auto\"\n  >\n    <b-loading v-model=\"isLoading\" :active=\"isLoading\" :is-full-page=\"false\" />\n    <div class=\"editor__header\" v-if=\"editor\">\n      \n      <b-button style=\"margin-right: 6rem\">\n        <b-switch v-model=\"isAnnotation\"> Annotation </b-switch>\n      </b-button>\n      <b-button\n        :title=\"'Switch view'\"\n        :icon-left=\"layoutIcon()\"\n        @click=\"setEditLayout\"\n      >\n      </b-button>\n\n      <b-button\n        :title=\"'Undo'\"\n        icon-left=\"undo\"\n        @click=\"editor.chain().focus().undo().run()\"\n      >\n      </b-button>\n      <b-button\n        style=\"margin-right: 6rem\"\n        :title=\"'Redo'\"\n        icon-left=\"redo\"\n        @click=\"editor.chain().focus().redo().run()\"\n      >\n      </b-button>\n      \n      <b-button @click=\"saveContent\" icon-left=\"save\" type=\"is-success\">\n        Save\n      </b-button>\n\n      <hr v-if=\"editor && isAnnotation && tagDefs\" class=\"seperator\" />\n      <div class=\"bubble-menu\" v-if=\"editor && isAnnotation && tagDefs\">\n        <b-button\n          :title=\"'Strike'\"\n          type=\"is-primary\"\n          icon-left=\"strikethrough\"\n          @click=\"editor.chain().focus().toggleStrike().run()\"\n          :class=\"{ 'is-active': editor.isActive('strike') }\"\n        >\n          <!-- {{ $t('Strike') }} -->\n        </b-button>\n        <b-button\n          :title=\"'Underline'\"\n          type=\"is-primary\"\n          icon-left=\"underline\"\n          @click=\"editor.chain().focus().toggleUnderline().run()\"\n          :class=\"{ 'is-active': editor.isActive('underline') }\"\n        >\n          <!-- {{ $t('Underline') }} -->\n        </b-button>\n        <b-button\n          :title=\"'Subscript'\"\n          type=\"is-primary\"\n          icon-left=\"subscript\"\n          @click=\"editor.chain().focus().toggleSub().run()\"\n          :class=\"{ 'is-active': editor.isActive('subscript') }\"\n        >\n        </b-button>\n        <b-button\n          :title=\"'Superscript'\"\n          type=\"is-primary\"\n          icon-left=\"superscript\"\n          @click=\"editor.chain().focus().toggleSuper().run()\"\n          :class=\"{ 'is-active': editor.isActive('superscript') }\"\n        >\n          <!-- {{ $t('Superscript') }} -->\n        </b-button>\n        <b-button\n          v-for=\"(tag, index) in tagDefs.definitions.annotations\"\n          :key=\"index\"\n          icon-left=\"tag\"\n          :style=\"'background-color:' + tag.color\"\n          @click=\"setAttributes(tag)\"\n          :class=\"{\n            'is-active': editor.isActive(tag.name, {\n              color: tag.color,\n            }),\n          }\"\n        >\n          {{ tag.label }}\n        </b-button>\n      </div>\n    </div>\n    <hr class=\"seperator\" />\n    <div v-if=\"selectedTag\">\n      <div class=\"editor__header\" style=\"text-align: center\">\n        <div\n          class=\"columns\"\n          v-for=\"(tempTag, index) in selectedTag.marks\"\n          :key=\"index\"\n        >\n          <div class=\"column\" v-if=\"tempTag.attrs.tag\">\n            <b-tag\n              :style=\"`outline-color: ${tempTag.attrs.color} !important; outline: 2px solid; color : ${tempTag.attrs.color} !important;margin-top: auto;margin-bottom: auto;`\"\n              icon-left=\"tag\"\n            >\n              {{ tempTag.attrs.tag.name }}\n            </b-tag>\n          </div>\n          <div\n            class=\"column\"\n            v-for=\"(attribute, i) in findTagAttributes(tempTag)\"\n            :key=\"i\"\n          >\n            <b-field\n              v-if=\"tempTag.attrs.tag\"\n              :label=\"attribute\"\n              label-position=\"on-border\"\n            >\n              <b-input\n                @input=\"\n                  changeContinued(\n                    tempTag,\n                    tempTag.attrs.tag.attributes[attribute],\n                    attribute\n                  )\n                \"\n                v-model=\"tempTag.attrs.tag.attributes[attribute]\"\n              ></b-input>\n            </b-field>\n          </div>\n          <div class=\"column\" v-if=\"tempTag.attrs.tag\">\n            <b-button\n              type=\"danger\"\n              icon-left=\"trash\"\n              @click=\"\n                editor\n                  .chain()\n                  .focus()\n                  .selectParentNode()\n                  .unsetMark(tempTag.type)\n                  .run()\n              \"\n            >\n              Delete\n            </b-button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <editor-content\n      class=\"editor__content\"\n      style=\"text-align: center\"\n      :editor=\"editor\"\n    />\n  </div>\n</template>\n\n<script>\n//  http://localhost:5000/collection/62267/doc/425931/detail/1?view=edit\n// http://localhost:5000/collection/100402/doc/512221/detail/2\n//  http://localhost:5000/collection/100402/doc/642576/detail/3\n\n//TODO adding continued tag and set attributes to continued tags\nimport {\n  generateHTML,\n  Editor,\n  EditorContent,\n  NodeViewWrapper,\n  NodeViewContent,\n  BubbleMenu,\n} from \"@tiptap/vue-2\";\nimport { defaultExtensions } from \"@tiptap/starter-kit\";\nimport TextAlign from \"@tiptap/extension-text-align\";\nimport Focus from \"@tiptap/extension-focus\";\nimport Text from \"@tiptap/extension-text\";\nimport Region from \"../Editor/RegionExtension.js\";\nimport Line from \"../Editor/LineExtension.js\";\nimport Table from \"@tiptap/extension-table\";\nimport TableRow from \"@tiptap/extension-table-row\";\nimport TableCell from \"@tiptap/extension-table-cell\";\nimport TableHeader from \"@tiptap/extension-table-header\";\nimport Underline from \"@tiptap/extension-underline\";\nimport { tagExtensions } from \"../Editor/TagExtension.js\";\n\nimport { Subscript } from \"../Editor/SubscriptExtension.js\";\nimport { Superscript } from \"../Editor/SuperscriptExtension.js\";\n\nimport { NodeSelection } from \"prosemirror-state\";\nimport { Plugin, PluginKey } from \"prosemirror-state\";\n\nimport { mapState } from \"vuex\";\n\nimport { fetchTagDef, setPageContentXML } from \"../../utils/api.js\";\n\nimport { parseToXML, parseEditorOutput } from \"../../utils/xml.js\";\n\nvar groupBy = require(\"json-groupby\");\n\nexport default {\n  filters: {\n    text(item) {\n      return item.elements && item.elements[0] ? item.elements[0].text : \"\";\n    },\n    clean(s) {\n      if (typeof s !== \"string\") return \"\";\n      return s.trim().replace(/$/, \"\\u2010\");\n    },\n  },\n  watch: {\n    selected: {\n      handler: function (newValue, oldValue) {\n        if (newValue === null || newValue === oldValue) return;\n        if (newValue.origin === \"image\") {\n          var lineId = newValue.target;\n          var content = this.editor.state.doc.content.content;\n          this.editor.chain().focus();\n          var nodes = this.editor.view.docView.node;\n\n          nodes.descendants((node, pos) => {\n            if (node.attrs.line) {\n              if (node.attrs.line.attributes.id === lineId) {\n                var tr = this.editor.state.tr;\n                const transaction = tr.setSelection(\n                  NodeSelection.create(tr.doc, pos)\n                );\n                this.editor.view.dispatch(transaction);\n                const el = document.getElementById(lineId);\n                el.scrollIntoView({ behavior: \"smooth\" });\n              }\n            }\n          });\n        }\n      },\n      deep: true,\n    },\n  },\n  components: {\n    TextAlign,\n    EditorContent,\n    BubbleMenu,\n  },\n  props: {\n    xmlJson: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      editorContentJson: {},\n      editor: null,\n      isAnnotation: false,\n      selectedTag: null,\n      status: \"IN_PROGRESS\",\n      isLoading: false,\n      annotationCounter: 0,\n      lastTag: {},\n    };\n  },\n  computed: {\n    ...mapState(\"content\", [\n      \"data\",\n      \"selected\",\n      \"highlighted\",\n      \"isReady\",\n      \"xmlModel\",\n      \"wasSaved\",\n      \"wasEdited\",\n      \"editLayoutHorizontal\",\n    ]),\n    ...mapState(\"detail\", [\"tagMode\", \"tsKey\"]),\n    ...mapState(\"browse\", [\"tagDefs\"]),\n    hasContent() {\n      return this.content.elements.length !== 0;\n    },\n    contentData() {\n      if (!this.xmlJson || !this.xmlJson.elements) return { elements: [] };\n      else {\n        for (var element in this.xmlJson.elements) {\n          var temp = this.xmlJson.elements[element];\n          for (var line in temp.elements) {\n            var linetemp = temp.elements[line];\n\n            if (linetemp.type == \"TextLine\") {\n              linetemp.hasTag = this.hasTag(linetemp.attributes.custom);\n              linetemp.tags = this.getTags(linetemp.attributes.custom);\n            } else if (linetemp.type == \"TableCell\" && linetemp.elements[0]) {\n              linetemp.hasTag = this.hasTag(\n                linetemp.elements[0].attributes.custom\n              );\n              linetemp.tags = this.getTags(\n                linetemp.elements[0].attributes.custom\n              );\n            }\n          }\n        }\n\n        return this.xmlJson;\n      }\n    },\n  },\n  async mounted() {\n    // if (this.tagDefs == null) {\n    //   await this.loadTagDefs();\n    // }\n    var tagArray = await tagExtensions(this.tagDefs.definitions.annotations);\n    var that = this;\n    this.editor = new Editor({\n      content: \"\",\n      extensions: [\n        Text,\n        Region,\n        Line,\n        ...defaultExtensions(),\n        ...tagArray,\n        Focus.configure({\n          className: \"is-selected\",\n          nested: true,\n        }),\n        Underline,\n        Table,\n        TableRow,\n        TableHeader,\n        TableCell,\n        Subscript,\n        Superscript,\n      ],\n      onSelectionUpdate({ editor }) {\n        var selectedLine = editor.getAttributes(\"line\");\n        var head = editor.view.state.selection.$head.pos;\n        var anchor = editor.view.state.selection.$anchor.pos;\n        var node = editor.view.state.doc.nodeAt(head);\n        if (node && anchor == head) {\n          var marks = node.marks;\n          if (marks.length > 0) {\n            that.selectedTag = node;\n          } else {\n            that.selectedTag = null;\n          }\n        } else {\n          that.selectedTag = null;\n        }\n      },\n      onUpdate({ editor }) {\n        that.$store.dispatch(\"content/update\", { wasEdited: true });\n      },\n    });\n    this.setEditorContentJSON();\n  },\n  methods: {\n    select(id) {\n      this.$store.dispatch(\"content/select\", {\n        target: id,\n        origin: \"content\",\n      });\n    },\n    setEditLayout() {\n      this.$store.dispatch(\"content/update\", {\n        editLayoutHorizontal: !this.editLayoutHorizontal,\n      });\n    },\n    layoutIcon() {\n      if (this.editLayoutHorizontal) {\n        return \"columns\";\n      }\n      return \"bars\";\n    },\n    changeContinued(tag, value, attribute) {\n      if (tag.attrs.tag.attributes.continued) {\n        var continuedTags = this.findMarkByUid(0, 1000, tag.attrs.annotationId);\n        for (var index in continuedTags) {\n          var tempTag = continuedTags[index];\n          tempTag.attrs.tag.attributes[attribute] = value;\n        }\n      }\n    },\n    findMarkByUid(from, to, uid) {\n      const { doc } = this.editor.state;\n      let found = [];\n      doc.nodesBetween(from, to, (node) => {\n        found.push(\n          node.marks.find((mark) => mark.attrs[\"annotationId\"] === uid)\n        );\n      });\n      return found.filter(Boolean);\n    },\n    findTagAttributes(tag) {\n      var found = {};\n      found = this.tagDefs.definitions.annotations.find(\n        (element) => element.name === tag.type.name\n      );\n      if (found) {\n        return found.attributes;\n      } else {\n        return found;\n      }\n    },\n\n    async saveContent() {\n      const json = this.editor.getJSON();\n      var js = JSON.parse(JSON.stringify(json));\n\n      var modelCopy = JSON.parse(JSON.stringify(this.xmlModel));\n\n      var parsedResult = parseEditorOutput(js, modelCopy);\n      console.log(parsedResult)\n      var xmlResult = parseToXML(parsedResult);\n      // this.isLoading = true;\n      // var result = await setPageContentXML({\n      //   collId: this.$route.params.collectionid,\n      //   id: this.$route.params.docid,\n      //   page: this.$route.params.pageid,\n      //   xml: xmlResult,\n      //   status: this.status,\n      //   parentTranscriptId: this.tsKey,\n      // });\n      // this.isLoading = false;\n      // await this.$store.dispatch(\"detail/fetch\", this.$route.params);\n      // this.$store.dispatch(\"content/update\", { wasSaved: true });\n      console.log(xmlResult);\n      var output = {xml : xmlResult, xmlJson: parsedResult}\n      this.$root.$emit('save', output)\n      console.log(this)\n    },\n    setAttributes(tag) {\n      var attributes = {};\n      var selectedLine = this.editor.getNodeAttributes(\"line\");\n      var contentObj = this.editor.state.selection.content();\n\n      if (contentObj.content.content.length > 1) {\n        attributes = { continued: true };\n      }\n      var tagObj = { name: tag.name, attributes: attributes };\n      this.editor\n        .chain()\n        .focus()\n        .toggleTag({ color: tag.color, tag: tagObj, name: tag.name })\n        .run();\n    },\n    openToast(message, type) {\n      this.$buefy.toast.open({\n        duration: 4000,\n        message: message,\n        position: \"is-top\",\n        type: type,\n      });\n    },\n    async loadTagDefs() {\n      let data;\n      try {\n        data = await fetchTagDef({\n          collId: this.$route.params.collectionid,\n        });\n      } catch (err) {\n        console.log(err);\n      }\n      this.$store.dispatch(\"browse/setTagDefs\", { tagDefs: data });\n    },\n    groupByRow(table) {\n      var result = groupBy(table, [\"attributes.row\"]);\n      return result;\n    },\n    getTagDef(tag) {\n      if (tag) {\n        var found = this.tagDefs.definitions.annotations.find(\n          (x) => x.name === tag.name\n        );\n      }\n\n      return found;\n    },\n    beforeDestroy() {\n      if (this.editor) {\n        this.editor.destroy();\n      }\n    },\n    setEditorContentJSON() {\n      let editorContent = {\n        type: \"doc\",\n        content: [],\n      };\n      if (!this.contentData || !this.contentData.elements)\n        return { elements: [] };\n      else {\n        for (var element in this.contentData.elements) {\n          var temp = this.contentData.elements[element];\n          var content = [];\n          if (temp.type == \"TextRegion\") {\n            for (var line in temp.elements) {\n              var linetemp = temp.elements[line];\n              if (linetemp.type == \"TextLine\") {\n                if (linetemp.elements[0]) {\n                  var id = linetemp.attributes.id;\n                  var text = \" \";\n                  if (\n                    linetemp.elements[0].elements[0][0] &&\n                    linetemp.elements[0].elements[0][0][0]\n                  ) {\n                    text = linetemp.elements[0].elements[0][0][0].text;\n                  }\n                  if (linetemp.hasTag) {\n                    var tagContent = this.setTagContent(linetemp, text, false);\n                    content.push({\n                      type: \"line\",\n                      attrs: {\n                        line: linetemp,\n                      },\n                      content: tagContent,\n                    });\n                  } else {\n                    content.push({\n                      type: \"line\",\n                      attrs: {\n                        line: linetemp,\n                      },\n                      content: [\n                        {\n                          type: \"text\",\n                          text: text,\n                        },\n                      ],\n                    });\n                  }\n                }\n              }\n            }\n            editorContent.content.push({\n              type: \"region\",\n              attrs: {\n                lines: temp,\n              },\n              content: content,\n            });\n          } else if (temp.type == \"TableRegion\") {\n            var groupedRows = this.groupByRow(temp.elements);\n            var rowContent = [];\n            for (var row in groupedRows) {\n              var cellContent = [];\n              var rowtemp = groupedRows[row];\n              for (var cell in rowtemp) {\n                var celltemp = rowtemp[cell];\n                var text = \" \";\n                var lineObjects = [];\n                for (line in celltemp.elements) {\n                  var linetemp = celltemp.elements[line];\n                  if (linetemp && linetemp.elements[0][0][0].elements[0]) {\n                    text = linetemp.elements[0][0][0].elements[0].text;\n                  }\n                  var lineContent = [];\n                  if (celltemp.hasTag) {\n                    lineContent = this.setTagContent(celltemp, text, true);\n                  } else {\n                    lineContent.push({\n                      type: \"text\",\n                      text: text,\n                    });\n                  }\n                  var lineObj = {\n                    type: \"line\",\n                    attrs: {\n                      line: linetemp,\n                    },\n                    content: lineContent,\n                  };\n                  lineObjects.push(lineObj);\n                }\n                cellContent.push({\n                  type: \"tableCell\",\n                  content: lineObjects,\n                });\n              }\n              rowContent.push({\n                type: \"tableRow\",\n                content: cellContent,\n              });\n            }\n            var regionObj = {\n              type: \"region\",\n              content: rowContent,\n            };\n\n            editorContent.content.push({\n              type: \"table\",\n              content: [regionObj],\n            });\n          }\n        }\n        this.editorContentJson = editorContent;\n        this.editor.commands.setContent(editorContent);\n      }\n    },\n    getTags(attributes) {\n      var tags = [];\n      for (var i = 0; i < attributes.length; i++) {\n        if (\n          \"offset\" in attributes[i].attributes &&\n          \"length\" in attributes[i].attributes\n        ) {\n          tags.push(attributes[i]);\n        }\n      }\n      return tags;\n    },\n    hasTag(attributes) {\n      for (var i = 0; i < attributes.length; i++) {\n        if (\n          \"offset\" in attributes[i].attributes &&\n          \"length\" in attributes[i].attributes\n        ) {\n          return true;\n        }\n      }\n      return false;\n    },\n    setTagContent(linetemp, text, table) {\n      var tagContent = [];\n      var arrText = this.stringOffset(text, linetemp.tags);\n      for (var split in arrText) {\n        var marks = [];\n        var text = \" \";\n        if (!arrText[split] == \"\") {\n          text = arrText[split];\n        }\n        var tags = this.findTags(linetemp, text, table);\n        if (tags.length > 0) {\n          for (var tagTemp in tags) {\n            var tag = tags[tagTemp];\n            if (tag.name == \"textStyle\") {\n              var textStyles = this.setTextStyles(tag)\n              for (var index in textStyles) {\n                var textStyle = textStyles[index]\n                marks.push(textStyle)\n              }\n            }\n            var tagDef = this.getTagDef(tag);\n            var color = \"#ffff\";\n            var name = \"mark\";\n            if (tagDef) {\n              color = tagDef.color;\n              name = tagDef.name;\n              if (\n                !tag.attributes.continued ||\n                this.lastTag.name !== name ||\n                this.lastTag.continued !== tag.attributes.continued\n              ) {\n                this.annotationCounter++;\n              }\n              var tagMark = {\n                type: name,\n                attrs: {\n                  color: color,\n                  tag: tag,\n                  annotationId: this.annotationCounter,\n                },\n              };\n              this.lastTag = {\n                name: tag.name,\n                lineId: linetemp.attributes.id,\n                tag: tag,\n                continued: tag.attributes.continued,\n              };\n              marks.push(tagMark);\n            }\n          }\n          var obj = {\n            type: \"text\",\n            marks: marks,\n            text: text,\n          };\n          tagContent.push(obj);\n        } else {\n          var obj = {\n            type: \"text\",\n            marks: marks,\n            text: text,\n          };\n          tagContent.push(obj);\n        }\n      }\n      return tagContent;\n    },\n    setTextStyles(tag) {\n      var name = []\n      if (tag.attributes.strikethrough) {\n        name.push('strike')\n      }\n      if (tag.attributes.subscript) {\n        name.push('subscript')\n      }\n      if (tag.attributes.superscript) {\n        name.push('superscript')\n      }\n      if (tag.attributes.underlined) {\n        name.push('underline')\n      }\n      if (tag.attributes.bold) {\n        name.push('bold')\n      }\n      var textStyleArr = []\n      for (var i = 0; i < name.length; i++) {\n        textStyleArr.push({\n          type: name[i]\n        })\n      }\n      return textStyleArr\n    },\n    stringOffset(str, tags) {\n      if (!tags.length) return [];\n\n      const results = [],\n        indexes = [];\n\n      tags.forEach((options) => {\n        indexes.push(\n          options.attributes.offset,\n          options.attributes.offset + options.attributes.length\n        );\n      });\n\n      indexes.sort((i1, i2) => i1 - i2);\n\n      if (indexes.indexOf(0) < 0) indexes.unshift(0);\n\n      if (indexes[indexes.length - 1] < str.length) indexes.push(str.length);\n\n      for (let i = 0, len = indexes.length; i < len - 1; i++) {\n        results.push(str.substring(indexes[i], indexes[i + 1]));\n      }\n\n      return results;\n    },\n    findTags(element, text, table) {\n      var lineText;\n      if (table) {\n        lineText = element.elements[0].elements[0][0][0].elements[0].text;\n      } else {\n        lineText = element.elements[0].elements[0][0][0].text;\n      }\n      if (text == \" \") {\n        return [];\n      }\n      var index = lineText.indexOf(text);\n      return element.tags.filter((x) => {\n        var tagtext = lineText.substr(x.attributes.offset, x.attributes.length);\n        if (tagtext.includes(text)) {\n          return x;\n        }\n      });\n    },\n    textStyleClass(label) {\n      var classString = \"\";\n      if (label.includes(\"superscript = true\")) {\n        classString += \"is-superscript\";\n      }\n      if (label.includes(\"subscript = true\")) {\n        classString += \"is-subscript\";\n      }\n      if (label.includes(\"italic = true\")) {\n        classString += \"is-italic\";\n      }\n      if (label.includes(\"underlined = true\")) {\n        classString += \"is-underlined\";\n      }\n      if (label.includes(\"strikethrough = true\")) {\n        classString += \"is-strikethrough\";\n      }\n      if (label.includes(\"bold = true\")) {\n        classString += \"is-bold\";\n      }\n\n      return classString;\n    },\n    highlight(id) {\n      this.$store.dispatch(\"content/highlight\", {\n        target: id,\n        origin: \"content\",\n      });\n    },\n    scrollIntoView(id) {\n      if (!this.$refs[id]) return;\n      const [element] = this.$refs[id];\n      if (element)\n        element.scrollIntoView({\n          block: \"center\",\n          inline: \"center\",\n          behavior: \"smooth\",\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../../assets/variables.scss\";\n\n.is-selected {\n  outline: none;\n  border-color: $link-80;\n  background-color: $link-10;\n}\n.tag {\n  padding-top: 0.1rem;\n  margin-left: 0.3rem !important;\n  margin-right: 0.3rem !important;\n}\n#menu-button {\n  padding-left: 0;\n  padding-right: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n  margin-left: 0.2rem;\n  margin-right: 0.2rem;\n}\n.bubble-menu {\n  // display: flex;\n  // background-color: #aeb8cc;\n  text-align: center;\n  // padding: 0.2rem;\n  border-radius: 0.5rem;\n  position: initial !important;\n\n  button {\n    border: none;\n    background: none;\n    color: #fff;\n    text-align: center;\n    font-size: 0.85rem;\n    font-weight: 500;\n    padding: 0 0.9rem;\n    margin: 0.2rem;\n\n    &.is-active {\n      opacity: 1;\n      outline: 3px solid black;\n    }\n  }\n}\n\n.tag {\n  padding-top: 0.1rem;\n  height: auto;\n}\n\n.ProseMirror {\n  table {\n    border-collapse: collapse;\n    table-layout: fixed;\n    // width: 100%;\n    overflow: hidden;\n    margin-left: auto;\n    margin-right: auto;\n    text-align: center;\n\n    td,\n    th {\n      min-width: 1em;\n      border: 2px solid #ced4da;\n      padding: 3px 5px;\n      vertical-align: top;\n      box-sizing: border-box;\n      position: relative;\n\n      > * {\n        margin-bottom: 0;\n      }\n    }\n\n    th {\n      font-weight: bold;\n      text-align: left;\n      background-color: #f1f3f5;\n    }\n\n    .selectedCell:after {\n      z-index: 2;\n      position: absolute;\n      content: \"\";\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      background: rgba(243, 243, 248, 0.4);\n      pointer-events: none;\n    }\n\n    .column-resize-handle {\n      position: absolute;\n      right: -2px;\n      top: 0;\n      bottom: -2px;\n      width: 4px;\n      background-color: #adf;\n      pointer-events: none;\n    }\n  }\n}\n.seperator {\n  background-color: whitesmoke;\n  border: none;\n  /* display: block; */\n  /* height: 2px; */\n  margin: 0.2rem;\n}\n.editor {\n  position: relative;\n  // max-width: 80%;\n  // margin: 0 0 0 10%;\n  display: flex;\n  flex-direction: column;\n  color: #0d0d0d;\n  background-color: white;\n  border: 1px solid #0d0d0d;\n  border-radius: 0.75rem;\n\n  &__header {\n    text-align: center;\n    flex: 0 0 auto;\n    flex-wrap: wrap;\n    padding: 0.25rem;\n    border-bottom: 1px solid #0d0d0d;\n  }\n\n  &__side {\n    float: right;\n    flex: 1 1 auto;\n    flex-wrap: wrap;\n    padding: 0.25rem;\n    overflow-x: hidden;\n    overflow-y: auto;\n    border-bottom: 1px solid #0d0d0d;\n  }\n\n  &__content {\n    padding: 1.5rem 1rem;\n    flex: 1 1 auto;\n    overflow-x: hidden;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n}\n.vl {\n  border-left: 6px solid green;\n  margin: 0;\n}\n</style>\n\n<style scoped>\n.navbar {\n  width: 100%;\n  z-index: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentTextEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentTextEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailContentTextEdit.vue?vue&type=template&id=0e7681fb&scoped=true&\"\nimport script from \"./DetailContentTextEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailContentTextEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailContentTextEdit.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./DetailContentTextEdit.vue?vue&type=style&index=1&id=0e7681fb&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e7681fb\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <Layout>\n    <template #header> </template>\n    <template>\n      <ContentTextEdit :xmlJson=\"xmlJson\"/>\n    </template>\n    <template #footer> </template>\n  </Layout>\n</template>\n\n<script>\nimport Layout from \"./DetailContentLayout.vue\";\nimport ContentTextEdit from \"./DetailContentTextEdit.vue\";\n\nimport { mapState } from \"vuex\";\n\nexport default {\n  props: {\n    xmlJson: {\n      type: Object,\n      required: true,\n    },\n  },\n  components: {\n    Layout,\n    ContentTextEdit,\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailContentEdit.vue?vue&type=template&id=44433fd0&\"\nimport script from \"./DetailContentEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailContentEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('OpenSeadragon',{key:'penseadragon',ref:\"openseadragon\",staticClass:\"has-background-dark\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"imageViewer\",\"options\":_vm.options},on:{\"open\":_vm.onOpen}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import config from \"../config\";\nimport round from \"lodash/round\";\n\nexport default {\n  data() {\n    return { imageBaseUrl: config.urls.image };\n  },\n  methods: {\n    getPaddedRect({ x, y, width, height }, padding = 5) {\n      return {\n        x: x - padding,\n        y: y - padding,\n        width: width + 2 * padding,\n        height: height + 2 * padding,\n      };\n    },\n    getImageInfo(id) {\n      return `${this.imageBaseUrl}/${id}/info.json`;\n    },\n    getImageSource(id, options = {}) {\n      const { x = 0, y = 0, width = \"\", height = \"\" } = options;\n      if (x === 0 && y === 0 && width === \"\" && height === \"\") {\n        return `${this.imageBaseUrl}/${id}/full/full/0/default.jpg`;\n      }\n      return `${this.imageBaseUrl}/${id}/${x},${y},${width},${height}/full/0/default.jpg`;\n    },\n    getScaledSource(id, { width = \"\", height = \"\" }) {\n      return `${this.imageBaseUrl}/${id}/full/${width},${height}/0/default.jpg`;\n    },\n    getThumbnailSource(id, params) {\n      return this.getScaledSource(id, params);\n    },\n    getContextImageSource(id, { x, y, width, height }, toRect) {\n      return `${this.imageBaseUrl}/${id}/${x},${y},${width},${height}/${toRect.width},${toRect.height}/0/default.jpg`;\n    },\n    getRoundedRect(rect, n = 2) {\n      return {\n        x: round(rect.x, 2),\n        y: round(rect.y, 2),\n        width: round(rect.width, 2),\n        height: round(rect.height, 2),\n      };\n    },\n    getIntersectionRatio(r1, r2) {\n      // https://stackoverflow.com/a/27162334\n      const dx =\n        Math.min(r1.x + r1.width, r2.x + r2.width) - Math.max(r1.x, r2.x);\n      const dy =\n        Math.min(r1.y + r1.height, r2.y + r2.height) - Math.max(r1.y, r2.y);\n      return Math.max(0, dx) * Math.max(0, dy);\n    },\n    getScaledRect({ x, y, width, height }) {\n      const rounded = (x) => Math.round(x * 1000000) / 1000000;\n      const w = this.width;\n      return {\n        x: rounded(x / w),\n        y: rounded(y / w),\n        width: rounded(width / w),\n        height: rounded(height / w),\n      };\n    },\n    getScaledPoints(points, width) {\n      console.log('getScaled Points before')\n      console.log(points)\n      console.log(width)\n      const rounded = (x) => Math.round(x * 1000) / 1000;\n      const w = width;\n      console.log('getScaled Points after')\n      console.log( points.map(({ x, y }) => ({\n        x: rounded(x / w),\n        y: rounded(y / w),\n      })))\n      return points.map(({ x, y }) => ({\n        x: rounded(x / w),\n        y: rounded(y / w),\n      }));\n    },\n  \n    getPaddedRect({ x, y, width, height }, padding = 5) {\n      return {\n        x: x - padding,\n        y: y - padding,\n        width: width + 2 * padding,\n        height: height + 2 * padding,\n      };\n    },\n    parseNumber(value) {\n      if (typeof value === \"number\") return value;\n      if (typeof value === \"string\" && /\\d+/.test(value))\n        return parseInt(value);\n      return null;\n    },\n    roundNumber(value, n) {\n      return round(value, n);\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":_vm.id}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ** Based on https://github.com/braceslab/vue-openseadragon */\n\n<template>\n  <div :id=\"id\" />\n</template>\n\n<script>\nimport omit from \"lodash/omit\";\n\nexport default {\n  props: {\n    id: {\n      type: String,\n      default: \"openseadragon\",\n    },\n    options: {\n      type: Object,\n    },\n    i18n: {\n      type: Object,\n    },\n    messages: {\n      type: Object,\n      default: () => ({\n        \"Tooltips.FullPage\": \"\",\n        \"Tooltips.Home\": \"\",\n        \"Tooltips.ZoomIn\": \"\",\n        \"Tooltips.ZoomOut\": \"\",\n        \"Tooltips.NextPage\": \"\",\n        \"Tooltips.PreviousPage\": \"\",\n        \"Tooltips.RotateLeft\": \"\",\n        \"Tooltips.RotateRight\": \"\",\n        \"Errors.Dzc\": \"\",\n        \"Errors.Dzi\": \"\",\n        \"Errors.Xml\": \"\",\n        \"Errors.ImageFormat\": \"\",\n        \"Errors.Security\": \"\",\n        \"Errors.Status\": \"\",\n        \"Errors.OpenFailed\": \"\",\n      }),\n    },\n  },\n  data() {\n    return {\n      viewer: null,\n    };\n  },\n\n  mounted() {\n    this.$nextTick(() => this.setup());\n  },\n  methods: {\n    setup() {\n      if (!this.viewer && this.options) {\n        this.translate();\n        const _options = this.options;\n        const OpenSeadragon = require(\"openseadragon\");\n        _options.id = this.id;\n        this.viewer = OpenSeadragon(omit(_options, \"tileSources\"));\n        this.viewer.open(_options.tileSources);\n        this.viewer.addOnceHandler(\"open\", () => {\n          this.$emit(\"open\");\n        });\n      }\n    },\n    resolve(object, key) {\n      try {\n        const _keys = key.split(\".\");\n        let _cursor = object;\n        for (const _key of _keys) {\n          _cursor = _cursor[_key];\n        }\n        return _cursor;\n      } catch (e) {\n        return null;\n      }\n    },\n    /**\n\t@see https://openseadragon.github.io/examples/ui-customize-tooltips/\n      */\n    translate() {\n      if (!this.i18n || !this.messages) {\n        return;\n      }\n\n      const _messages = this.i18n.messages[this.i18n.locale];\n      const OpenSeadragon = require(\"openseadragon\");\n      for (const label in this.messages) {\n        OpenSeadragon.setString(\n          label,\n          this.resolve(_messages, this.messages[label])\n        );\n      }\n    },\n    panTo({ x, y }, immediate) {\n      const { Point } = require(\"openseadragon\");\n      this.viewer.viewport\n        .panTo(new Point(x, y), immediate)\n        .applyConstraints(immediate);\n    },\n    fitBoundsWithConstraints({ x, y, width, height }, immediate) {\n      const { Rect } = require(\"openseadragon\");\n      this.viewer.viewport\n        .fitBounds(new Rect(x, y, width, height), immediate)\n        .applyConstraints(immediate);\n    },\n    addOverlay({ element, location }) {\n      const { Overlay } = require(\"openseadragon\");\n      this.viewer.addOverlay(new Overlay({ element, location }));\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vue-openseadragon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vue-openseadragon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./vue-openseadragon.vue?vue&type=template&id=d657e572&\"\nimport script from \"./vue-openseadragon.vue?vue&type=script&lang=js&\"\nexport * from \"./vue-openseadragon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <OpenSeadragon\n    id=\"imageViewer\"\n    :key=\"'penseadragon'\"\n    ref=\"openseadragon\"\n    class=\"has-background-dark\"\n    :options=\"options\"\n    style=\"width: 100%; height: 100%\"\n    @open=\"onOpen\"\n  />\n</template>\n\n<style lang=\"scss\">\n@import \"../../assets/variables.scss\";\n\n.layout .highlight {\n  fill: rgba(black, 0.25);\n  stroke: rgba(black, 0.5);\n  stroke-width: 2px;\n  vector-effect: non-scaling-stroke;\n\n  &.is-primary {\n    fill: rgba($link, 0.25);\n    stroke: rgba($link, 0.5);\n\n    &.is-selected {\n      fill: rgba($primary, 0.125);\n      stroke: rgba($primary, 0.5);\n    }\n\n    &:hover {\n      fill: rgba($primary, 0.2);\n      stroke: rgba($primary, 0.25);\n    }\n  }\n}\n\n.layout {\n  .content {\n    fill: transparent;\n  }\n\n  .element {\n    fill: transparent;\n    stroke-width: 2px;\n    stroke: transparent;\n    vector-effect: non-scaling-stroke;\n    cursor: pointer;\n\n    &.is-highlighted {\n      stroke: $link-80;\n      fill: $link-10;\n    }\n\n    &.is-search {\n      stroke: $search-80;\n      fill: $search-10;\n    }\n\n    &:hover {\n      stroke: $primary-50;\n      fill: $primary-02;\n    }\n\n    &.is-selected {\n      stroke: $primary-50;\n      fill: $primary-10;\n    }\n  }\n}\n</style>\n\n<script>\n// const svgOverlay = require(\"svg-overlay\");\n\n\nimport { mapState } from \"vuex\";\n\nimport imageMixin from \"../../mixins/image.js\";\n\nimport OpenSeadragon from \"../vue-openseadragon.vue\";\n\nimport {svgOverlay} from \"../../utils/openseadragon-svg-overlay.js\"\n \n\nexport default {\n  components: {\n    OpenSeadragon,\n  },\n  mixins: [imageMixin],\n  props: {\n    source: {\n      type: String,\n      required: true,\n    },\n    width: {\n      type: Number,\n      required: true,\n      default : 100\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n    xmlJson: {\n      type: Object,\n      required: true,\n    },\n    results: {\n      type: Array,\n      required: true,\n    },\n  },\n\n  data: () => ({\n    overlays: null,\n    selectedOverlayIndex: null,\n    layoutElements: {},\n    selectedLayoutElement: null,\n    highlightedLayoutElement: null,\n    selectedOverlayIndex: null,\n  }),\n  watch: {\n    /*\n     ** FIXME: use reactive style everywhere, i.e. change variable in methods,\n     **        then watch this variable, perform action when it has changed\n     */\n    data: {\n      handler: function (newValue, oldValue) {\n        console.log(newValue);\n        // if (newValue) this.layoutElements = this.renderLayout(newValue);\n      },\n      deep: true,\n    },\n    selected: {\n      handler: function (newValue, oldValue) {\n        if (newValue !== null && newValue.origin !== \"image\") {\n          this.selectLayoutElement(newValue.target);\n          this.fitBounds(newValue.target, true);\n        }\n      },\n      deep: true,\n    },\n    highlighted: {\n      handler: function (newValue, oldValue) {\n        if (newValue !== null && newValue.origin !== \"image\")\n          this.highlightLayoutElement(newValue.target);\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    ...mapState(\"content\", [\"data\", \"selected\", \"highlighted\"]),\n    options() {\n      const baseUrl =\n        \"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.4.0\";\n      return {\n        tileSources: this.source,\n        zoomPerClick: 1.2,\n        prefixUrl: `${baseUrl}/images/`,\n        maxZoomLevel: 5,\n        showZoomControl: false,\n        showHomeControl: false,\n        showFullPageControl: false,\n        visibilityRatio: 0.2,\n      };\n    },\n  },\n  destroyed() {\n    // clear svg node's content\n    if (this.$refs.openseadragon) {\n      const viewer = this.$refs.openseadragon.viewer;\n      const overlay = viewer.svgOverlay();\n      const svgNode = overlay.node();\n\n      if (svgNode) svgNode.innerHTML = \"\";\n    }\n  },\n  methods: {\n    onOpen() {\n      this.setHome();\n\n      if (this.xmlJson) this.layoutElements = this.renderLayout(this.xmlJson);\n\n      if (this.overlays === null)\n        this.overlays = Object.freeze(this.createOverlays());\n\n      // const index = this.parseNumber(this.$route.query.result);\n      // if (index !== null && this.results.length > 0)\n      //   this.selectedOverlayIndex = index;\n\n      if (this.selectedOverlayIndex !== null)\n        this.selectWithPan(this.selectedOverlayIndex, false);\n    },\n    setHome() {\n      if (!this.$refs.openseadragon) return;\n      const viewer = this.$refs.openseadragon.viewer;\n      // disables zoom on click\n      viewer.gestureSettingsMouse.clickToZoom = false;\n\n      /*\n       ** as seen on https://github.com/openseadragon/openseadragon/issues/839#issuecomment-181968800\n       */\n      const viewportBounds = viewer.viewport.getBounds();\n      const viewportAspect = viewportBounds.height / viewportBounds.width;\n      const newBounds = viewer.world.getHomeBounds();\n      newBounds.height = newBounds.width * viewportAspect;\n      viewer.viewport.fitBounds(newBounds, true);\n    },\n    panTo(index, isAnimated = false) {\n      if (this.results.length > 0) {\n        const { rect } = this.results[index];\n        const point = {\n          x: (rect.x + rect.width / 2) / this.width,\n          y: (rect.y + rect.height / 2) / this.width,\n        };\n        this.$refs.openseadragon.panTo(point, !isAnimated);\n      }\n    },\n    zoom(delta) {\n      if (!this.$refs.openseadragon) return;\n\n      const viewer = this.$refs.openseadragon.viewer;\n\n      if (delta > 0) {\n        viewer.viewport.zoomBy(viewer.zoomPerClick);\n      } else {\n        viewer.viewport.zoomBy(1 / viewer.zoomPerClick);\n      }\n      viewer.viewport.applyConstraints();\n    },\n    async fitBounds(id, isAnimated = false) {\n      const data = await this.$store.dispatch(\"content/findElementById\", id);\n      if (data === null) return;\n\n      const toRect = (points) => {\n        const x = Math.min.apply(\n          null,\n          data.geometry.coords.map((p) => p.x)\n        );\n        const y = Math.min.apply(\n          null,\n          data.geometry.coords.map((p) => p.y)\n        );\n        const width =\n          Math.max.apply(\n            null,\n            data.geometry.coords.map((p) => p.x)\n          ) - x;\n        const height =\n          Math.max.apply(\n            null,\n            data.geometry.coords.map((p) => p.y)\n          ) - y;\n        return { x, y, width, height };\n      };\n\n      const rect = this.getScaledRect(\n        this.getPaddedRect(toRect(data.geometry.coords), 75)\n      );\n\n      const point = {\n        x: rect.x + rect.width / 2,\n        y: rect.y + rect.height / 2,\n      };\n\n      this.$refs.openseadragon.panTo(point, !isAnimated);\n    },\n    select(index, isAnimated) {\n      if (this.overlays.length === 0) return;\n      if (!(index < this.overlays.length)) return;\n\n      const activeNode =\n        this.selectedOverlayIndex === null\n          ? null\n          : this.overlays[this.selectedOverlayIndex].element;\n\n      const node = this.overlays[index].element;\n\n      if (activeNode && node !== activeNode)\n        activeNode.classList.remove(\"is-selected\");\n\n      node.classList.add(\"is-selected\");\n\n      this.selectedOverlayIndex = index;\n    },\n    selectWithPan(index) {\n      this.select(index, false);\n      this.panTo(index, false);\n    },\n    renderLayout(data) {\n      if (!this.$refs.openseadragon) return [];\n\n      console.log(this.$refs.openseadragon.viewer);\n      const viewer = this.$refs.openseadragon.viewer;\n      // const svgOverlay = require(\"svg-overlay\");\n\n      const d3 = require(\"d3\");\n      const overlay = viewer.svgOverlay();\n      console.log(overlay.node());\n      const svg = d3.select(overlay.node());\n      svg.attr(\"class\", \"layout\");\n\n      const contentGroup = svg.append(\"g\");\n      console.log(data);\n      return data.elements.reduce((m, element) => {\n        if (!element.geometry) return [];\n        const pointsTemp = element.geometry.coords;\n        console.log(\"points before renderPolygon\");\n        console.log(pointsTemp);\n        if (pointsTemp)\n          this.renderPolygon({\n            parent: contentGroup,\n            points: pointsTemp,\n            className: \"content\",\n          });\n\n        const vm = this;\n\n        const elementGroup = contentGroup.append(\"g\");\n\n        return element.elements.reduce((m, element) => {\n          var points = element.geometry.coords;\n          var id = element.attributes.id;\n          console.log(\"Inside : points before renderPolygon\");\n          console.log(points);\n\n          if (element.type == \"TableCell\") {\n            return element.elements.reduce((m, element) => {\n              var points = element.geometry.coords;\n              var id = element.attributes.id;\n\n              const polygon = this.renderPolygon({\n                parent: elementGroup,\n                points: this.getScaledPoints(points, this.width),\n                className: \"element\",\n              })\n                .on(\"click\", () => {\n                  this.selectLayoutElement(id);\n                  this.$store.dispatch(\"content/select\", {\n                    target: id,\n                    origin: \"image\",\n                  });\n                })\n                .on(\"mouseover\", () => this.highlightLayoutElement(id), true)\n                .on(\"mouseout\", () => this.highlightLayoutElement(id), true)\n                .node();\n              return Object.assign(m, { [id]: polygon });\n            }, m);\n          }\n          const polygon = this.renderPolygon({\n            parent: elementGroup,\n            points: this.getScaledPoints(points, this.width),\n            className: \"element\",\n          })\n            .on(\"click\", () => {\n              this.selectLayoutElement(id);\n              this.$store.dispatch(\"content/select\", {\n                target: id,\n                origin: \"image\",\n              });\n            })\n            .on(\"mouseover\", () => this.highlightLayoutElement(id), true)\n            .on(\"mouseout\", () => this.highlightLayoutElement(id), true)\n            .node();\n          return Object.assign(m, { [id]: polygon });\n        }, m);\n      }, {});\n    },\n    async selectLayoutElement(id) {\n      const element = this.layoutElements[id];\n      if (!element) return;\n\n      if (\n        this.selectedLayoutElement !== null &&\n        element !== this.selectedLayoutElement &&\n        this.selectedLayoutElement.classList.contains(\"is-selected\")\n      )\n        this.selectedLayoutElement.classList.remove(\"is-selected\");\n\n      if (!element.classList.contains(\"is-selected\")) {\n        element.classList.add(\"is-selected\");\n      }\n\n      if (element !== this.selectedLayoutElement)\n        this.selectedLayoutElement = element;\n    },\n    highlightLayoutElement(id) {\n      const element = this.layoutElements[id];\n      if (!element) return;\n      if (this.highlightedLayoutElement === element) {\n        if (element.classList.contains(\"is-highlighted\"))\n          element.classList.remove(\"is-highlighted\");\n      } else {\n        this.highlightedLayoutElement = element;\n\n        if (!element.classList.contains(\"is-highlighted\"))\n          element.classList.add(\"is-highlighted\");\n      }\n\n      this.$store.dispatch(\"content/highlight\", {\n        target: id,\n        origin: \"image\",\n      });\n    },\n    renderPolygon({ parent, points, className }) {\n      console.log(points);\n      return parent\n        .append(\"polygon\")\n        .attr(\n          \"points\",\n          points.map(({ x, y }) => {\n            console.log(x, y);\n            return `${x},${y}`;\n          })\n        )\n        .attr(\"class\", className)\n        .attr(\"tabindex\", 0);\n    },\n    createOverlays() {\n      if (!this.$refs.openseadragon) return [];\n\n      const viewer = this.$refs.openseadragon.viewer;\n      // const svgOverlay = require(\"svg-overlay\");\n\n      const d3 = require(\"d3\");\n\n      const overlay = viewer.svgOverlay();\n\n      const svg = d3.select(overlay.node());\n\n      return this.results.map(({ score, label, ...result }, index) => {\n        const rect = this.getScaledRect(\n          this.getPaddedRect(result.rect, this.height / 100)\n        );\n\n        const d3Rect = svg\n          .append(\"rect\")\n          .attr(\"x\", rect.x)\n          .attr(\"y\", rect.y)\n          .attr(\"width\", rect.width)\n          .attr(\"height\", rect.height)\n          .attr(\"title\", `${label} (${this.sanitizeScore(score)})`)\n          .attr(\"class\", \"highlight is-primary\")\n          .on(\"click\", () => {\n            this.select(index, true);\n          });\n\n        return {\n          d3: d3Rect,\n          element: d3Rect.node(),\n        };\n      });\n    },\n    clear() {\n      if (this.overlays.length === 0) return;\n      const index = this.selectedOverlayIndex;\n\n      if (!(this.index < this.overlays.length)) return;\n\n      const node = this.overlays[index].element;\n      if (node) node.classList.remove(\"is-selected\");\n      this.selectedOverlayIndex = null;\n      this.setHome();\n    },\n    sanitizeScore(score) {\n      return score === 1 || score === 0\n        ? score + \".0\"\n        : Math.round(score * 100) / 100;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailImageEditViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailImageEditViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailImageEditViewer.vue?vue&type=template&id=571b066a&\"\nimport script from \"./DetailImageEditViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailImageEditViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailImageEditViewer.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <section class=\"hero is-fullheight-with-navbar\">\n    <DetailEditLayout :name=\"view\">\n      <template v-slot:image>\n        <ImageViewer\n          v-if=\"imageInfo\"\n          ref=\"viewer\"\n          :source=\"iiifUrl\"\n          :width=\"imageInfo.width\"\n          :height=\"imageInfo.height\"\n          :xmlJson=\"parsedJson\"\n          :results=\"results\"\n        />\n      </template>\n      <template v-slot:content>\n        <Content id=\"textEditor\" :xmlJson=\"parsedJson\" />\n      </template>\n    </DetailEditLayout>\n  </section>\n</template>\n\n<script>\nimport DetailEditLayout from \"./DetailEditLayout.vue\";\nimport Content from \"./DetailContentEdit.vue\";\nimport ImageViewer from \"./DetailImageEditViewer.vue\";\n\nimport { parseJsonContent } from \"../../utils/xml.js\";\nimport imageMixin from \"../../mixins/image.js\";\nimport { getImageSize } from \"../../utils/api.js\";\n\nimport { mapState, mapGetters } from \"vuex\";\n\nvar WindowObjectReference; // global variable\n\nexport default {\n  components: {\n    DetailEditLayout,\n    Content,\n    ImageViewer,\n  },\n  props: {\n    iiifUrl: {\n      type: String,\n      required: true,\n    },\n    xmlJson: {\n      type: Object,\n      required: true,\n    },\n  },\n  mixins: [imageMixin],\n  data() {\n    return {\n      imageInfo: null,\n    };\n  },\n  computed: {\n    ...mapState(\"detail\", [\n      // document\n      \"docId\",\n      \"title\",\n      \"colTitle\",\n      \"pageNum\",\n      \"maxPage\",\n      \"isDocumentReady\",\n      \"tsList\",\n      // page\n      \"image\",\n      \"isPageReady\",\n      \"isPageContentReady\",\n      // search\n      \"results\",\n      \"view\",\n      \"tagMode\",\n    ]),\n    ...mapState(\"content\", [\n      \"data\",\n      \"selected\",\n      \"highlighted\",\n      \"fetchPageContent\",\n    ]),\n    ...mapGetters(\"detail\", [\"isLoading\"]),\n    source() {\n      return this.getImageInfo(this.image.id);\n    },\n    parsedJson() {\n      return parseJsonContent(this.xmlJson);\n    },\n  },\n  // async created() {\n  //   // const response = await fetch(this.iiifUrl);\n  //   // const data = await response.json();\n  //   // this.imageInfo = data;\n  //   console.log(this.imageInfo)\n  // },\n  async mounted() {\n    const response = await fetch(this.iiifUrl);\n    const data = await response.json();\n    this.imageInfo = data;\n    this.$store.dispatch(\"content/setXmlModel\", {\n      xmlModel: this.xmlJson,\n    });\n    this.$store.dispatch(\"content/update\", { data: this.parsedJson });\n  },\n  async destroyed() {\n    // reset state\n    this.$store.dispatch(\"content/reset\");\n  },\n  methods: {\n    async update() {\n      await this.$store.dispatch(\"detail/fetch\", this.$route.params);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TranscriptionInterfaceLocal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TranscriptionInterfaceLocal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TranscriptionInterfaceLocal.vue?vue&type=template&id=5c578f15&\"\nimport script from \"./TranscriptionInterfaceLocal.vue?vue&type=script&lang=js&\"\nexport * from \"./TranscriptionInterfaceLocal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <section class=\"hero is-fullheight-with-navbar\">\n    <TranscriptionInterfaceLocal :iiifUrl=\"iiifUrl\" :xmlJson=\"xmlJson\" />\n  </section>\n</template>\n\n<script>\nimport TranscriptionInterfaceLocal from \"../components/DetailView/TranscriptionInterfaceLocal.vue\";\n\nimport { mapState, mapGetters } from \"vuex\";\n\nimport imageMixin from \"../mixins/image.js\";\n\nconst json = require(\"../assets/page1.json\");\n\nexport default {\n  components: {\n    TranscriptionInterfaceLocal,\n  },\n  mixins: [imageMixin],\n  props: {\n    iiifUrl: {\n      type: String,\n      required: true,\n    },\n    xmlJson: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n    };\n  },\n  methods: {},\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=e684d3ac&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <Editor v-if=\"xmlJsonString\" :iiifUrl=\"iiifUrl\" :xmlJson=\"toJsonObject\" />\n    <Editor v-else :iiifUrl=\"iiifUrl\" :xmlJson=\"xmlJson\" />\n  </div>\n</template>\n\n<script>\n// Test page : http://localhost:5000/collection/76950/doc/497355/detail/1\n\nimport Editor from \"./views/Editor.vue\";\n\nconst json = require(\"./assets/page1.json\");\n\nexport default {\n  name: \"app\",\n  props: {\n    iiifUrl: {\n      type: String,\n      default: () =>\n        \"https://rhus-209.man.poznan.pl/fcgi-bin/iipsrv.fcgi?IIIF=11/8//2020601/https___1914_1918_europeana_eu_contributions_21890/21890.261095.original.tif/info.json\",\n\n    },\n    xmlJson: {\n      type: Object,\n      default: () => json,\n    },\n    xmlJsonString: {\n      type: String,\n    },\n    tags: {\n      type: Object,\n    },\n  },\n  methods: {\n    escapeSpecialChars(string) {\n      return string\n        .replace(/\\\\n/g, \"\\\\n\")\n        .replace(/\\\\'/g, \"\\\\'\")\n        .replace(/\\\\\"/g, '\\\\\"')\n        .replace(/\\\\&/g, \"\\\\&\")\n        .replace(/\\\\r/g, \"\\\\r\")\n        .replace(/\\\\t/g, \"\\\\t\")\n        .replace(/\\\\b/g, \"\\\\b\")\n        .replace(/\\\\f/g, \"\\\\f\");\n    },\n  },\n  components: {\n    Editor,\n  },\n  computed: {\n    toJsonObject() {\n      var cleanedString = this.escapeSpecialChars(this.xmlJsonString);\n      const obj = JSON.parse(cleanedString);\n      return obj;\n    },\n  },\n  mounted() {\n    if (this.tags) {\n      this.$store.dispatch(\"browse/setTagDefs\", { tagDefs: this.tags });\n    }\n  },\n};\n</script>\n<style lang=\"scss\">\nhtml,\nbody,\n#app {\n  height: 100%;\n}\n\n.is-margin-top {\n  margin-top: 1.5rem;\n}\n\n.is-margin-bottom {\n  margin-bottom: 1.25rem;\n}\n\n@import \"~bulma/sass/utilities/_all\";\n@import \"assets/variables.scss\";\n\n$primary: $primary;\n$primary-invert: findColorInvert($primary);\n$twitter: #4099ff;\n$twitter-invert: findColorInvert($twitter);\n\n$colors: (\n  \"white\": (\n    $white,\n    $black,\n  ),\n  \"black\": (\n    $black,\n    $white,\n  ),\n  \"light\": (\n    $light,\n    $light-invert,\n  ),\n  \"dark\": (\n    $dark,\n    $dark-invert,\n  ),\n  \"primary\": (\n    $primary,\n    $primary-invert,\n  ),\n  \"info\": (\n    $info,\n    $info-invert,\n  ),\n  \"success\": (\n    $success,\n    $success-invert,\n  ),\n  \"warning\": (\n    $warning,\n    $warning-invert,\n  ),\n  \"danger\": (\n    $danger,\n    $danger-invert,\n  ),\n  \"twitter\": (\n    $twitter,\n    $twitter-invert,\n  ),\n);\n\n//  $link: $primary;\n$link-invert: $primary-invert;\n$link-focus-border: $primary;\n\n@import \"bulma\";\n@import \"buefy/src/scss/buefy\";\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=e7259830&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faSearch,\n  faAngleRight,\n  faAngleLeft,\n  faAngleUp,\n  faAngleDown,\n  faMinusSquare,\n  faPlusSquare,\n  faChevronLeft,\n  faChevronRight,\n  faChevronUp,\n  faChevronDown,\n  faFileAlt,\n  faTimes,\n  faArrowUp,\n  faArrowDown,\n  faPlus,\n  faMinus,\n  faTrash,\n  faDesktop,\n  faColumns,\n  faImage,\n  faCode,\n  faEye,\n  faPaperPlane,\n  faCheck,\n  faShoppingCart,\n  faDownload,\n  faEyeSlash,\n  faTags,\n  faCaretDown,\n  faCaretUp,\n  faImages,\n  faAlignLeft,\n  faObjectGroup,\n  faQuestion,\n  faQuestionCircle,\n  faExternalLinkAlt,\n  faUndo,\n  faRedo,\n  faBars,\n  faSave,\n  faStrikethrough,\n  faUnderline,\n  faSubscript,\n  faSuperscript,\n  faTag,\n  \n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\n\nexport default {\n  install(Vue, options = {}) {\n    library.add(\n      faSearch,\n      faAngleRight,\n      faAngleLeft,\n      faAngleUp,\n      faAngleDown,\n      faMinusSquare,\n      faPlusSquare,\n      faChevronLeft,\n      faChevronRight,\n      faChevronUp,\n      faChevronDown,\n      faFileAlt,\n      faTimes,\n      faArrowUp,\n      faArrowDown,\n      faPlus,\n      faMinus,\n      faTrash,\n      faDesktop,\n      faColumns,\n      faImage,\n      faCode,\n      faEye,\n      faPaperPlane,\n      faCheck,\n      faShoppingCart,\n      faDownload,\n      faEyeSlash,\n      faTags,\n      faCaretDown,\n      faCaretUp,\n      faAlignLeft,\n      faImages,\n      faObjectGroup,\n      faQuestion,\n      faQuestionCircle,\n      faExternalLinkAlt,\n      faUndo,\n      faRedo,\n      faBars,\n      faSave,\n      faStrikethrough,\n      faUnderline,\n      faSubscript,\n      faSuperscript,\n      faTag\n    );\n\n    Vue.component(\"font-awesome-icon\", FontAwesomeIcon);\n  },\n};\n","import {\n  fetchDocumentsMeta,\n  fetchPageInfo,\n  fetchSearchResults\n} from '@/utils/api.js'\n\nconst DEFAULT = {\n  // document\n  docId: null,\n  title: null,\n  colTitle: null,\n  maxPage: NaN,\n  documentInfo: null,\n  isDocumentReady: false,\n  isDocumentNotFoundError: false,\n  // page\n  pageId: null,\n  pageNum: NaN,\n  pageInfo: null,\n  pageContentId: null,\n  tsList: null,\n  tsKey: null,\n  // content: null,\n  image: null,\n  isPageReady: false,\n  isPageContentReady: false,\n  isPageNotFoundError: false,\n  isPageContentNotFoundError: false,\n  // search\n  term: '',\n  results: [],\n  // shared\n  requestCount: 0,\n  // view\n  view: 'both',\n  tagMode: 'hidetags',\n  changed: false\n}\n\nexport const state = () => Object.assign({}, DEFAULT)\n\nexport const getters = {\n  isLoading: (state, getters, rootState) =>\n    state.requestCount > 0 && state.content.isLoading === true,\n  hasResults: state => state.results.length > 0\n}\n\nexport const mutations = {\n  update(state, params) {\n    for (const key in params) {\n      if (state[key] !== params[key]) {\n        state[key] = params[key]\n        state.changed = true\n      }\n    }\n  },\n  beginRequest(state) {\n    state.requestCount += 1\n  },\n  endRequest(state) {\n    if (state.requestCount > 0) state.requestCount -= 1\n  }\n}\n\nexport const actions = {\n  update({ commit, state }, params = {}) {\n    const o = {}\n    for (const key in params) if (key in state) o[key] = params[key]\n    commit('update', o)\n  },\n  async fetch({ dispatch, state }, routeParams) {\n    dispatch('beginRequest')\n    // if (state.view !== view) await dispatch('update', { view })\n    if (routeParams.docid !== state.docId) {\n      // await dispatch('update', { documentId, pageNum, results: [] })\n      await dispatch('fetchDocumentInfo', {\n        collId: routeParams.collectionid,\n        docId: routeParams.docid\n      })\n      await dispatch('fetchPageInfo', {\n        collId: routeParams.collectionid,\n        docId: routeParams.docid,\n        pageNr: routeParams.pageid\n      })\n      //     if (term) {\n      // dispatch('update', { term })\n      // await dispatch('fetchSearchResults')\n      //     }\n    }\n    // else if (pageNum !== state.pageNum) {\n    else {\n      await dispatch('update', { pageNum, results: [] })\n      await dispatch('fetchPageInfo', {\n        collId: routeParams.collectionid,\n        docId: routeParams.docid,\n        pageNr: routeParams.pageid\n      })\n      if (term) {\n        dispatch('update', { term })\n        await dispatch('fetchSearchResults')\n      }\n    }\n    // else  if (term && state.term !== term) {\n    //   dispatch('update', { term })\n    //   await dispatch('fetchSearchResults')\n    // }\n    dispatch('endRequest')\n  },\n  beginRequest({ commit }) {\n    commit('beginRequest')\n  },\n  endRequest({ commit }) {\n    commit('endRequest')\n  },\n  async fetchDocumentInfo({ state, dispatch }, { collId, docId }) {\n    dispatch('beginRequest')\n    const data = await fetchDocumentsMeta({ collId: collId, docId: docId })\n\n    if (data === null) {\n      dispatch('update', {\n        isDocumentNotFoundError: true\n      })\n    } else {\n      const colTitle = data.collectionList.colList.find(\n        element => element.colId == collId\n      )\n      dispatch('update', {\n        docId: data.docId,\n        maxPage: data.nrOfPages,\n        isDocumentReady: true,\n        title: data.title,\n        colTitle: colTitle\n      })\n    }\n    dispatch('endRequest')\n  },\n  async fetchPageInfo({ state, dispatch }, { collId, docId, pageNr }) {\n    dispatch('beginRequest')\n    const data = await fetchPageInfo({\n      collId: collId,\n      docId: docId,\n      pageNr: pageNr\n    })\n    if (data === null)\n      dispatch('update', {\n        image: null,\n        isPageReady: false,\n        isPageNotFoundError: true\n      })\n    else {\n      let image = { id: data.key, width: data.width, height: data.height }\n      dispatch('update', {\n        ...data.id,\n        image: image,\n        pageNum: data.pageNr,\n        isPageReady: true,\n        tsList: data.tsList,\n        tsKey: data.tsList.transcripts[0].key\n      })\n      // dispatch('content/update', { id: data.content.id })\n      dispatch('fetchPageContent', { id: data.tsList.transcripts[0].key })\n    }\n    dispatch('endRequest')\n  },\n  async fetchPageContent({ state, dispatch }, { id }) {\n    dispatch('update', {\n      tsKey: id\n    })\n    await dispatch('content/fetch', { id })\n  },\n  async fetchSearchResults({ state, dispatch }) {\n    dispatch('beginRequest')\n    const data = await fetchSearchResults(\n      {\n        term: state.term,\n        page: state.pageId\n      },\n      { offset: 0, limit: 100 }\n    )\n\n    if (data === null) {\n      dispatch('update', { results: [] })\n    } else {\n      dispatch('update', {\n        results:\n          data.results.length === 0\n            ? Object.freeze([])\n            : Object.freeze(data.results[0].results)\n      })\n    }\n    dispatch('endRequest')\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};","import deepEqual from 'fast-deep-equal'\nconst tags = require('../../assets/tag-config.json');\n\nexport const state = () => ({\n  docId: null,\n  title: null,\n  colTitle: null,\n  colRole: null,\n  collections: [],\n  tagDefs: tags,\n  documents: [],\n})\n\n\nexport const mutations = {\n  update(state, params) {\n    for (const key in params)\n      if (!deepEqual(state[key], params[key])) state[key] = params[key]\n  }\n}\n\nexport const actions = {\n  update({ commit }, params) {\n    commit('update', params)\n  },\n  setCollections({ dispatch, state }, { collections }) {\n    dispatch('update', { collections: collections })\n  },\n  setTagDefs({ dispatch, state }, { tagDefs }) {\n    dispatch('update', { tagDefs: tagDefs })\n  },\n  setDocuments({ dispatch, state }, { documents }) {\n    dispatch('update', { documents: documents })\n  },\n  setColTitle({ dispatch, state }, { colTitle }) {\n    dispatch('update', { colTitle: colTitle })\n  },\n  setColRole({ dispatch, state }, { colRole }) {\n    dispatch('update', { colRole: colRole })\n  }\n}\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n};","import deepEqual from 'fast-deep-equal'\nimport { fetchPageContent, fetchPageContentXML } from '@/utils/api.js'\n\nexport const state = () => ({\n  id: null,\n  data: null,\n  selected: null,\n  selectedTag: null,\n  highlighted: null,\n  isError: false,\n  isReady: false,\n  isLoading: false,\n  xmlModel : null,\n  wasSaved: false,\n  wasEdited: false,\n  editLayoutHorizontal: true\n})\n\nexport const mutations = {\n  update(state, params) {\n    for (const key in params)\n      if (!deepEqual(state[key], params[key])) state[key] = params[key]\n  }\n}\n\nexport const actions = {\n  update({ commit }, params) {\n    commit('update', params)\n  },\n  reset({ dispatch }) {\n    dispatch('update', {\n      id: null,\n      data: null,\n      selected: null,\n      selectedTag: null,\n      highlighted: null,\n      isError: false,\n      isready: false,\n      isLoading: false,\n      xmlModel : null,\n      wasSaved: false,\n      wasEdited: false,\n      editLayoutHorizontal: true\n    })\n  },\n  select({ dispatch, state }, { origin, target }) {\n    dispatch('update', { selected: { origin, target } })\n  },\n  highlight({ dispatch, state }, { origin, target }) {\n    dispatch('update', { highlighted: { origin, target } })\n  },\n  setSelectedTag({ dispatch, state }, { selectedTag }) {\n    dispatch('update', { selectedTag: selectedTag })\n  },\n  setXmlModel({ dispatch, state }, { xmlModel }) {\n    dispatch('update', { xmlModel: xmlModel })\n  },\n  async fetch({ state, dispatch }, id) {\n    // if (id) dispatch('update', { id })\n    dispatch('update', { isLoading: true, isReady: false })\n    await dispatch('fetchPageContent', id)\n    dispatch('update', { isLoading: false, isReady: true })\n  },\n  async fetchPageContent({ state, dispatch }, id) {\n    if (id) dispatch('update', { id })\n    const data = await fetchPageContentXML(id)\n    if (data === null) dispatch('update', { data: null, isError: true })\n    else {\n      dispatch('update', {\n        data: Object.freeze(data),\n        isError: false\n      })\n    }\n  },\n  findElementById({ state }, id) {\n    const node = state.data\n    const stack = [node]\n    while (stack.length) {\n      const node = stack.pop()\n      if (node.elements) node.elements.forEach(node => stack.push(node))\n      if (node.attributes && node.attributes.id === id) return node\n    }\n    return null\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport detail from \"./detail\";\nimport browse from \"./browse\";\nimport content from \"./content\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  modules: {\n    browse,\n    detail,\n    content,\n  },\n  strict: process.env.NODE_ENV !== \"production\",\n  // plugins: debug ? [createLogger()] : []\n});\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport Vuex from \"vuex\";\nimport Buefy from \"buefy\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport fontawesome from \"@/plugins/fontawesome.js\";\n\nimport store from \"@/store\";\n\nVue.config.productionTip = false;\n\nVue.use(Vuex);\nVue.use(fontawesome);\n\nVue.use(Buefy, {\n  defaultIconComponent: FontAwesomeIcon,\n  defaultIconPack: \"fas\",\n});\n\nconst root_element = document.getElementById(\"app\");\n\nconst AppRoot = Vue.extend(App);\nnew AppRoot({\n  store,\n  el: root_element,\n  propsData: { ...root_element.dataset },\n  mounted() {\n    this.$root.$on(\"save\", this.save);\n  },\n  methods: {\n    save(value) {\n      window.output = value;\n      root_element.dataset.output = JSON.stringify(value);      \n    },\n    escapeSpecialChars(string) {\n      return string\n        .replace(/\\\\n/g, \"\\\\n\")\n        .replace(/\\\\'/g, \"\\\\'\")\n        .replace(/\\\\\"/g, '\\\\\"')\n        .replace(/\\\\&/g, \"\\\\&\")\n        .replace(/\\\\r/g, \"\\\\r\")\n        .replace(/\\\\t/g, \"\\\\t\")\n        .replace(/\\\\b/g, \"\\\\b\")\n        .replace(/\\\\f/g, \"\\\\f\");\n    },\n  },\n}).$mount(\"#app\");\n\nexport default AppRoot;\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEditLayout.vue?vue&type=style&index=0&id=4a23ef5e&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentTextEdit.vue?vue&type=style&index=1&id=0e7681fb&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentTextEdit.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LineNode.vue?vue&type=style&index=0&id=2f37dab6&lang=scss&scoped=true&\""],"sourceRoot":""}