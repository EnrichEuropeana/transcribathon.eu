{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/openseadragon-svg-overlay.js","webpack:///./src/App.vue?85d0","webpack:///./src/views/Editor.vue?c1c1","webpack:///./src/components/DetailView/TranscriptionInterfaceLocal.vue?5b7d","webpack:///./src/components/DetailView/DetailEditLayout.vue?8323","webpack:///src/components/DetailView/DetailEditLayout.vue","webpack:///./src/components/DetailView/DetailEditLayout.vue?dd19","webpack:///./src/components/DetailView/DetailEditLayout.vue","webpack:///./src/components/DetailView/DetailContentEdit.vue?f59d","webpack:///./src/components/DetailView/DetailContentLayout.vue?3c83","webpack:///./src/components/DetailView/DetailContentLayout.vue","webpack:///./src/components/DetailView/DetailContentTextEdit.vue?0ffb","webpack:///./src/components/Editor/RegionNode.vue?fd41","webpack:///src/components/Editor/RegionNode.vue","webpack:///./src/components/Editor/RegionNode.vue?05ea","webpack:///./src/components/Editor/RegionNode.vue","webpack:///./src/components/Editor/RegionExtension.js","webpack:///./src/components/Editor/LineNode.vue?1a21","webpack:///src/components/Editor/LineNode.vue","webpack:///./src/components/Editor/LineNode.vue?3fc7","webpack:///./src/components/Editor/LineNode.vue","webpack:///./src/config/index.js","webpack:///./src/store/content/index.js","webpack:///./src/utils/xml.js","webpack:///./src/utils/api.js","webpack:///./src/store/detail/index.js","webpack:///./src/store/browse/index.js","webpack:///./src/store/index.js","webpack:///./src/components/Editor/LineExtension.js","webpack:///./src/components/Editor/TagExtension.js","webpack:///./src/components/Editor/SubscriptExtension.js","webpack:///./src/components/Editor/SuperscriptExtension.js","webpack:///src/components/DetailView/DetailContentTextEdit.vue","webpack:///./src/components/DetailView/DetailContentTextEdit.vue?7c02","webpack:///./src/components/DetailView/DetailContentTextEdit.vue","webpack:///src/components/DetailView/DetailContentEdit.vue","webpack:///./src/components/DetailView/DetailContentEdit.vue?389d","webpack:///./src/components/DetailView/DetailContentEdit.vue","webpack:///./src/components/DetailView/DetailImageEditViewer.vue?15d8","webpack:///./src/mixins/image.js","webpack:///./src/components/vue-openseadragon.vue?5f63","webpack:///src/components/vue-openseadragon.vue","webpack:///./src/components/vue-openseadragon.vue?f2f4","webpack:///./src/components/vue-openseadragon.vue","webpack:///src/components/DetailView/DetailImageEditViewer.vue","webpack:///./src/components/DetailView/DetailImageEditViewer.vue?0808","webpack:///./src/components/DetailView/DetailImageEditViewer.vue","webpack:///./src/components/DetailView/DetailImageControls.vue?6622","webpack:///src/components/DetailView/DetailImageControls.vue","webpack:///./src/components/DetailView/DetailImageControls.vue?8c77","webpack:///./src/components/DetailView/DetailImageControls.vue?2687","webpack:///src/components/DetailView/TranscriptionInterfaceLocal.vue","webpack:///./src/components/DetailView/TranscriptionInterfaceLocal.vue?8f55","webpack:///./src/components/DetailView/TranscriptionInterfaceLocal.vue","webpack:///src/views/Editor.vue","webpack:///./src/views/Editor.vue?115f","webpack:///./src/views/Editor.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue?180a","webpack:///./src/plugins/fontawesome.js","webpack:///./src/main.js","webpack:///./src/App.vue?df62","webpack:///./src/components/DetailView/DetailImageControls.vue?4c95","webpack:///./src/components/DetailView/TranscriptionInterfaceLocal.vue?6a20","webpack:///./node_modules/rollup-plugin-banner/dist sync","webpack:///./src/components/Editor/RegionNode.vue?4ffd"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","$","OpenSeadragon","require","Error","svgNS","Viewer","svgOverlay","this","_svgOverlayInfo","Overlay","viewer","self","_viewer","_containerWidth","_containerHeight","_svg","document","createElementNS","style","position","left","top","width","height","canvas","appendChild","_node","addHandler","resize","evt","node","container","clientWidth","setAttribute","clientHeight","viewport","pixelFromPoint","Point","zoom","getZoom","rotation","getRotation","scale","_containerInnerSize","x","y","onClick","handler","MouseTracker","element","clickHandler","setTracking","render","_vm","_h","$createElement","_c","_self","attrs","iiifUrl","toJsonObject","xmlJson","staticRenderFns","tags","staticClass","view","scopedSlots","_u","fn","ref","imageInfo","results","_e","on","handleControlEvent","proxy","_t","components","Splitpanes","Pane","computed","mapState","props","type","validator","includes","component","staticStyle","script","isLoading","model","callback","$$v","expression","isAnnotation","_v","$event","setFontSize","layoutIcon","setEditLayout","editor","chain","focus","undo","run","redo","saveContent","_l","selectedTag","tempTag","index","_s","tag","findTagAttributes","attribute","changeContinued","attributes","$set","setAttributes","tagDefs","class","isActive","toggleBold","toggleStrike","toggleUnderline","toggleSub","toggleSuper","definitions","color","label","fontSize","NodeViewWrapper","NodeViewContent","selectable","Node","group","content","addAttributes","lines","default","parseHTML","renderHTML","HTMLAttributes","mergeAttributes","addNodeView","VueNodeViewRenderer","Component","line","onMouseClick","id","onMouseOut","onMouseOver","methods","highlight","$store","dispatch","target","origin","select","urls","image","xml","hashidsSecret","token","transcriptionURL","searchApiBaseUrl","apiBaseUrl","contactEmail","bugEmail","bugtrackerUrl","repo","consentCookie","recordSession","state","selected","highlighted","isError","isReady","xmlModel","parseXML","wasSaved","wasEdited","editLayoutHorizontal","parsePageContent","mutations","update","params","deepEqual","actions","commit","reset","isready","setSelectedTag","setIIIF","console","log","setXmlJson","setXml","json","pageJson","setXmlModel","fetch","fetchPageContent","fetchPageContentXML","freeze","findElementById","stack","pop","elements","forEach","namespaced","xml2js","json2xml","jp","XML2JS","DEFAULT","compact","trim","alwaysArray","alwaysChildren","attributeValueFn","parseAttributeValue","TEST","parsePointsAttribute","string","split","map","parseInt","reverseParsePointsAttribute","values","pointString","point","points","temp","replace","parseCustomAttribute","reduce","indexOf","concat","decodeURIComponent","JSON","parse","Boolean","reverseParseparseCustomAttribute","customString","custom","stringify","replaceAll","reverseParseAttributeValue","imgUrl","getObjects","obj","val","objects","lastIndexOf","replaceLine","textString","customObjArr","elementArr","text","parseEditorOutput","editorJson","globalJson","editorLineArr","lineIndex","contentIndex","undefined","lineContent","marks","markIndex","mark","offset","strikethrough","underlined","subscript","superscript","parseToXML","options","ignoreComment","spaces","sanitize","attributesFn","js","search","PcGts","Page","logOut","$auth","loginWith","fetchSearchResults","term","documents","titles","page","fuzziness","limit","$nuxt","$axios","method","body","collections","collection","headers","CONTENT_TYPE","Accept","res","status","fetchTagDef","collId","fetchDocumentsMeta","docId","nrOfTranscripts","fetchPageInfo","pageNr","title","colTitle","maxPage","NaN","documentInfo","isDocumentReady","isDocumentNotFoundError","pageId","pageNum","pageInfo","pageContentId","tsList","tsKey","isPageReady","isPageContentReady","isPageNotFoundError","isPageContentNotFoundError","requestCount","tagMode","changed","assign","getters","rootState","hasResults","beginRequest","endRequest","routeParams","docid","collectionid","pageid","fetchDocumentInfo","collectionList","colList","find","colId","nrOfPages","transcripts","colRole","setCollections","setTagDefs","setDocuments","setColTitle","setColRole","Vue","use","Vuex","Store","browse","detail","strict","process","addProseMirrorPlugins","Plugin","handleKeyDown","event","which","deleting","filterTransaction","transaction","mapping","maps","oldStart","oldEnd","newStart","newEnd","doc","nodesBetween","number","pos","parent","addKeyboardShortcuts","Enter","commands","selectParentNode","selection","nodeAt","$head","selectNodeForward","setTextSelection","size","lineId","el","getElementById","scrollIntoView","behavior","store","ArrowDown","ArrowUp","tagExtensions","tagIndex","tagExtensionArr","tempExtension","Highlight","extend","toggleBulletList","addCommands","setTag","setMark","toggleTag","tr","toggleMark","unsetTag","unsetMark","annotationId","getAttribute","backgroundColor","Subscript","Mark","defaultOptions","consuming","getAttrs","setSub","unsetSub","Superscript","setSuper","unsetSuper","groupBy","filters","item","clean","watch","newValue","oldValue","nodes","docView","NodeSelection","deep","setup","contentData","setEditorContentJSON","TextAlign","EditorContent","BubbleMenu","editorContentJson","annotationCounter","lastTag","hasContent","linetemp","mounted","tagArray","that","extensions","Text","Region","Line","StarterKit","Focus","className","nested","Underline","Table","TableRow","TableHeader","TableCell","onSelectionUpdate","onUpdate","continued","continuedTags","findMarkByUid","from","to","uid","found","filter","modelCopy","parsedResult","xmlResult","output","tagObj","tagName","tagColor","contentObj","getAttributes","anchor","$anchor","openToast","message","$buefy","toast","open","duration","loadTagDefs","groupByRow","table","getTagDef","annotations","beforeDestroy","destroy","hasTag","tagContent","setTagContent","editorContent","groupedRows","rowContent","row","cellContent","rowtemp","cell","celltemp","lineObjects","lineObj","regionObj","setContent","getTags","arrText","stringOffset","findTags","tagTemp","textStyles","setTextStyles","textStyle","tagDef","tagMark","bold","textStyleArr","str","indexes","unshift","lineText","tagtext","substr","textStyleClass","classString","$refs","block","inline","required","Layout","ContentTextEdit","onOpen","imageBaseUrl","config","getPaddedRect","padding","getImageInfo","getImageSource","getScaledSource","getThumbnailSource","getContextImageSource","toRect","getRoundedRect","rect","round","getIntersectionRatio","r1","r2","dx","Math","min","max","dy","getScaledRect","rounded","w","getScaledPoints","test","i18n","messages","$nextTick","translate","_options","tileSources","zoomPerClick","addOnceHandler","resolve","_keys","_cursor","panTo","immediate","applyConstraints","fitBoundsWithConstraints","fitBounds","addOverlay","location","mixins","overlays","selectedOverlayIndex","layoutElements","selectedLayoutElement","highlightedLayoutElement","selectLayoutElement","prefixUrl","maxZoomLevel","showZoomControl","showHomeControl","showFullPageControl","visibilityRatio","destroyed","openseadragon","svgNode","innerHTML","fitToWidth","renderLayout","newBounds","setHome","isAnimated","delta","activeNode","selectWithPan","svg","geometry","pointsTemp","coords","highlightLayoutElement","classList","contains","renderPolygon","append","attr","createOverlays","d3","clear","remove","sanitizeScore","score","increaseZoom","decreaseZoom","fullscreen","$emit","home","$fullscreen","toggle","DetailEditLayout","Content","ImageViewer","ImageControls","mapGetters","source","response","toLowerCase","TranscriptionInterfaceLocal","xmlJsonString","escapeSpecialChars","Editor","cleanedString","install","library","add","faSearch","faAngleRight","faAngleLeft","faAngleUp","faAngleDown","faMinusSquare","faPlusSquare","faChevronLeft","faChevronRight","faChevronUp","faChevronDown","faFileAlt","faTimes","faArrowUp","faCompress","faExpand","faArrowDown","faPlus","faMinus","faTrash","faDesktop","faColumns","faImage","faCode","faEye","faPaperPlane","faCheck","faShoppingCart","faDownload","faEyeSlash","faTags","faCaretDown","faCaretUp","faAlignLeft","faImages","faObjectGroup","faQuestion","faQuestionCircle","faExternalLinkAlt","faUndo","faRedo","faBars","faSave","faBold","faStrikethrough","faUnderline","faSubscript","faSuperscript","faTag","FontAwesomeIcon","productionTip","fontawesome","Buefy","defaultIconComponent","defaultIconPack","VueFullscreen","root_element","AppRoot","App","eventBus","propsData","dataset","$root","$on","save","payLoad","$mount","webpackEmptyContext","req","e","code","keys"],"mappings":"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","file":"js/app.9b333d52.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// OpenSeadragon SVG Overlay plugin 0.0.5\n\n(function() {\n\n    var $ = window.OpenSeadragon;\n    \n    if (!$) {\n        $ = require('openseadragon');\n        if (!$) {\n            throw new Error('OpenSeadragon is missing.');\n        }\n    }\n\n    var svgNS = 'http://www.w3.org/2000/svg';\n\n    // ----------\n    $.Viewer.prototype.svgOverlay = function() {\n        if (this._svgOverlayInfo) {\n            return this._svgOverlayInfo;\n        }\n\n        this._svgOverlayInfo = new Overlay(this);\n        return this._svgOverlayInfo;\n    };\n\n    // ----------\n    var Overlay = function(viewer) {\n        var self = this;\n\n        this._viewer = viewer;\n        this._containerWidth = 0;\n        this._containerHeight = 0;\n\n        this._svg = document.createElementNS(svgNS, 'svg');\n        this._svg.style.position = 'absolute';\n        this._svg.style.left = 0;\n        this._svg.style.top = 0;\n        this._svg.style.width = '100%';\n        this._svg.style.height = '100%';\n        this._viewer.canvas.appendChild(this._svg);\n\n        this._node = document.createElementNS(svgNS, 'g');\n        this._svg.appendChild(this._node);\n\n        this._viewer.addHandler('animation', function() {\n            self.resize();\n        });\n\n        this._viewer.addHandler('open', function() {\n            self.resize();\n        });\n\n        this._viewer.addHandler('rotate', function(evt) {\n            self.resize();\n        });\n\n        this._viewer.addHandler('resize', function() {\n            self.resize();\n        });\n\n        this.resize();\n    };\n\n    // ----------\n    Overlay.prototype = {\n        // ----------\n        node: function() {\n            return this._node;\n        },\n\n        // ----------\n        resize: function() {\n            if (this._containerWidth !== this._viewer.container.clientWidth) {\n                this._containerWidth = this._viewer.container.clientWidth;\n                this._svg.setAttribute('width', this._containerWidth);\n            }\n\n            if (this._containerHeight !== this._viewer.container.clientHeight) {\n                this._containerHeight = this._viewer.container.clientHeight;\n                this._svg.setAttribute('height', this._containerHeight);\n            }\n\n            var p = this._viewer.viewport.pixelFromPoint(new $.Point(0, 0), true);\n            var zoom = this._viewer.viewport.getZoom(true);\n            var rotation = this._viewer.viewport.getRotation();\n            // TODO: Expose an accessor for _containerInnerSize in the OSD API so we don't have to use the private variable.\n            var scale = this._viewer.viewport._containerInnerSize.x * zoom;\n            this._node.setAttribute('transform',\n                'translate(' + p.x + ',' + p.y + ') scale(' + scale + ') rotate(' + rotation + ')');\n        },\n\n        // ----------\n        onClick: function(node, handler) {\n            // TODO: Fast click for mobile browsers\n\n            new $.MouseTracker({\n                element: node,\n                clickHandler: handler\n            }).setTracking(true);\n        }\n    };\n\n})();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"transkribusEditor\"}},[(_vm.xmlJsonString)?_c('Editor',{attrs:{\"iiifUrl\":_vm.iiifUrl,\"xmlJson\":_vm.toJsonObject}}):_c('Editor',{attrs:{\"iiifUrl\":_vm.iiifUrl,\"xmlJson\":_vm.xmlJson}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('TranscriptionInterfaceLocal',{attrs:{\"iiifUrl\":_vm.iiifUrl,\"xmlJson\":_vm.xmlJson,\"tags\":_vm.tags}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"hero is-fullheight-with-navbar\"},[_c('DetailEditLayout',{attrs:{\"name\":_vm.view},scopedSlots:_vm._u([{key:\"image\",fn:function(){return [(_vm.imageInfo)?_c('ImageViewer',{ref:\"viewer\",attrs:{\"source\":_vm.iiifUrl,\"width\":_vm.imageInfo.width,\"height\":_vm.imageInfo.height,\"xmlJson\":_vm.xmlJson,\"results\":_vm.results}}):_vm._e(),_c('aside',{staticClass:\"detail-image-controls-wrapper\"},[_c('ImageControls',{on:{\"input\":_vm.handleControlEvent}})],1)]},proxy:true},{key:\"content\",fn:function(){return [_c('Content',{attrs:{\"id\":\"textEditor\",\"xmlJson\":_vm.xmlJson}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"is-covering\"},[(_vm.editLayoutHorizontal)?_c('Splitpanes',{staticClass:\"default-theme\",attrs:{\"horizontal\":\"\"}},[_c('Pane',{attrs:{\"id\":\"imageHorizontal\"}},[_vm._t(\"image\")],2),_c('Pane',{attrs:{\"id\":\"contentHorizontal\"}},[_vm._t(\"content\")],2)],1):_c('Splitpanes',{staticClass:\"default-theme\"},[_c('Pane',{attrs:{\"id\":\"imageVertical\"}},[_vm._t(\"image\")],2),_c('Pane',{attrs:{\"id\":\"contentVertical\"}},[_vm._t(\"content\")],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"is-covering\">\n    <Splitpanes v-if=\"editLayoutHorizontal\" horizontal class=\"default-theme\">\n      <Pane\n        id=\"imageHorizontal\"\n      >\n        <slot name=\"image\"></slot>\n      </Pane>\n      <Pane id=\"contentHorizontal\">\n        <slot name=\"content\"></slot>\n      </Pane>\n    </Splitpanes>\n    <Splitpanes v-else class=\"default-theme\">\n      <Pane id=\"imageVertical\" style=\"\">\n        <slot name=\"image\"></slot>\n      </Pane>\n      <Pane id=\"contentVertical\" style=\"\">\n        <slot name=\"content\"></slot>\n      </Pane>\n    </Splitpanes>\n  </div>\n</template>\n\n<script>\nimport { Splitpanes, Pane } from \"splitpanes\";\nimport \"splitpanes/dist/splitpanes.css\";\n\nimport { mapState } from \"vuex\";\n\nexport default {\n  components: { Splitpanes, Pane },\n  computed: {\n    ...mapState(\"content\", [\"editLayoutHorizontal\"]),\n  },\n  props: {\n    name: {\n      type: String,\n      validator: (value) => {\n        return [\"both\", \"image\", \"content\", \"edit\"].includes(value);\n      },\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEditLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEditLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailEditLayout.vue?vue&type=template&id=35ad93c0&\"\nimport script from \"./DetailEditLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailEditLayout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return undefined},proxy:true},{key:\"footer\",fn:function(){return undefined},proxy:true}])},[[_c('ContentTextEdit',{attrs:{\"xmlJson\":_vm.xmlJson}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"flex\",\"flex-flow\":\"column nowrap\",\"height\":\"100%\",\"overflow\":\"hidden\",\"width\":\"100%\"}},[_c('div',[_vm._t(\"header\")],2),_vm._t(\"default\"),_vm._t(\"footer\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./DetailContentLayout.vue?vue&type=template&id=1d20946a&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.editor)?_c('div',{staticClass:\"editor\"},[_c('b-loading',{attrs:{\"active\":_vm.isLoading,\"is-full-page\":false},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}}),(_vm.editor)?_c('div',{staticClass:\"editor__header\"},[_c('b-navbar',{staticStyle:{\"width\":\"100%\",\"overflow\":\"auto\"},scopedSlots:_vm._u([{key:\"start\",fn:function(){return [_c('b-navbar-item',[_c('b-switch',{model:{value:(_vm.isAnnotation),callback:function ($$v) {_vm.isAnnotation=$$v},expression:\"isAnnotation\"}},[_vm._v(\" Annotation \")])],1)]},proxy:true},{key:\"end\",fn:function(){return [_c('b-navbar-item',[_c('b-button',{attrs:{\"title\":\"Increase font size\",\"icon-left\":\"plus\"},on:{\"click\":function($event){return _vm.setFontSize(0.1)}}}),_c('b-button',{attrs:{\"title\":\"Decrease font size\",\"icon-left\":\"minus\"},on:{\"click\":function($event){return _vm.setFontSize(-0.1)}}})],1),_c('b-navbar-item',[_c('b-button',{attrs:{\"title\":\"Switch view\",\"icon-left\":_vm.layoutIcon()},on:{\"click\":_vm.setEditLayout}}),_c('b-button',{attrs:{\"title\":\"Undo\",\"icon-left\":\"undo\"},on:{\"click\":function($event){_vm.editor.chain().focus().undo().run()}}}),_c('b-button',{attrs:{\"title\":\"Redo\",\"icon-left\":\"redo\"},on:{\"click\":function($event){_vm.editor.chain().focus().redo().run()}}})],1),_c('b-navbar-item',[_c('b-field',[_c('b-button',{attrs:{\"icon-left\":\"save\",\"type\":\"is-success\"},on:{\"click\":_vm.saveContent}},[_vm._v(\"\\n              Save\\n            \")])],1)],1)]},proxy:true}],null,false,916800163)})],1):_vm._e(),_c('div',{staticClass:\"tile editor__content\"},[(_vm.isAnnotation)?_c('div',{staticClass:\"tile is-parent is-vertical is-3\"},[(_vm.selectedTag)?_c('div',{staticClass:\"tile is-child box\"},[_c('div',_vm._l((_vm.selectedTag.marks),function(tempTag,index){return _c('div',{key:index,staticClass:\"tile is-vertical\",staticStyle:{\"width\":\"100%\"}},[(tempTag.attrs.tag)?_c('div',{staticClass:\"tile is-child\"},[_c('b-tag',{style:((\"outline-color: \" + (tempTag.attrs.color) + \" !important; outline: 2px solid; color : \" + (tempTag.attrs.color) + \" !important;margin-top: auto;margin-bottom: auto;\")),attrs:{\"icon-left\":\"tag\"}},[_vm._v(\"\\n                \"+_vm._s(tempTag.attrs.tag.name)+\"\\n              \")])],1):_vm._e(),_vm._l((_vm.findTagAttributes(tempTag)),function(attribute,i){return _c('div',{key:i,staticClass:\"tile is-child\"},[(tempTag.attrs.tag)?_c('b-field',{attrs:{\"label\":attribute,\"label-position\":\"on-border\"}},[_c('b-input',{on:{\"input\":function($event){return _vm.changeContinued(\n                      tempTag,\n                      tempTag.attrs.tag.attributes[attribute],\n                      attribute\n                    )}},model:{value:(tempTag.attrs.tag.attributes[attribute]),callback:function ($$v) {_vm.$set(tempTag.attrs.tag.attributes, attribute, $$v)},expression:\"tempTag.attrs.tag.attributes[attribute]\"}})],1):_vm._e()],1)}),(tempTag.attrs.tag)?_c('div',{staticClass:\"tile is-child\"},[_c('b-button',{attrs:{\"type\":\"is-danger\",\"icon-left\":\"trash\"},on:{\"click\":function($event){return _vm.setAttributes(tempTag)}}},[_vm._v(\"\\n                Delete\\n              \")])],1):_vm._e()],2)}),0)]):_vm._e(),_c('div',{staticClass:\"tile is-child box\"},[(_vm.editor && _vm.isAnnotation && _vm.tagDefs)?_c('div',{staticClass:\"transkribusEditor-bubble-menu\",staticStyle:{\"text-align\":\"center\"}},[_c('b-button',{class:{ 'is-active': _vm.editor.isActive('bold') },attrs:{\"title\":\"Bold\",\"type\":\"is-primary\",\"icon-left\":\"bold\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleBold().run()}}}),_c('b-button',{class:{ 'is-active': _vm.editor.isActive('strike') },attrs:{\"title\":\"Strike\",\"type\":\"is-primary\",\"icon-left\":\"strikethrough\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleStrike().run()}}}),_c('b-button',{class:{ 'is-active': _vm.editor.isActive('underline') },attrs:{\"title\":\"Underline\",\"type\":\"is-primary\",\"icon-left\":\"underline\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleUnderline().run()}}}),_c('b-button',{class:{ 'is-active': _vm.editor.isActive('subscript') },attrs:{\"title\":\"Subscript\",\"type\":\"is-primary\",\"icon-left\":\"subscript\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleSub().run()}}}),_c('b-button',{class:{ 'is-active': _vm.editor.isActive('superscript') },attrs:{\"title\":\"Superscript\",\"type\":\"is-primary\",\"icon-left\":\"superscript\"},on:{\"click\":function($event){_vm.editor.chain().focus().toggleSuper().run()}}}),_c('br'),_vm._l((_vm.tagDefs.definitions.annotations),function(tag,index){return _c('b-button',{key:index,class:{\n              'is-active': _vm.editor.isActive(tag.name, {\n                color: tag.color,\n              }),\n            },style:('background-color:' + tag.color),attrs:{\"icon-left\":\"tag\"},on:{\"click\":function($event){return _vm.setAttributes(tag)}}},[_vm._v(\"\\n            \"+_vm._s(tag.label)+\"\\n          \")])})],2):_vm._e()])]):_vm._e(),_c('div',{staticClass:\"tile is-parent box\"},[_c('editor-content',{staticClass:\"editor__content\",style:({ fontSize: _vm.fontSize + 'rem' }),attrs:{\"editor\":_vm.editor}})],1)])],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('node-view-wrapper',{staticClass:\"region\"},[_c('node-view-content',{staticClass:\"content\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <node-view-wrapper class=\"region\">\n    <!-- <span v-if=\"this.node.attrs.lines.attributes.id\" class=\"label\">Region {{ this.node.attrs.lines.attributes.id }}</span> -->\n    <node-view-content class=\"content\"> </node-view-content>\n  </node-view-wrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent, nodeViewProps } from \"@tiptap/vue-2\";\n\nexport default {\n  components: {\n    NodeViewWrapper,\n    NodeViewContent,\n  },\n\n  props: nodeViewProps,\n\n  selectable: false,\n};\n</script>\n\n<style lang=\"scss\" scoped>\n// .region {\n//   background: #e1ebee;\n//   border: 1px solid #0d0d0d;\n//   border-radius: 0.5rem;\n//   margin: 1rem 0;\n//   position: relative;\n// }\n\n// .label {\n//   margin-left: 1rem;\n//   background-color: #0d0d0d;\n//   font-size: 0.6rem;\n//   letter-spacing: 1px;\n//   font-weight: bold;\n//   text-transform: uppercase;\n//   color: #fff;\n//   position: absolute;\n//   top: 0;\n//   padding: 0.25rem 0.75rem;\n//   border-radius: 0 0 0.5rem 0.5rem;\n// }\n\n// .content {\n//   // margin-top: 1.5rem;\n//   padding: 0.3rem;\n// }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegionNode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegionNode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RegionNode.vue?vue&type=template&id=90ae8d76&scoped=true&\"\nimport script from \"./RegionNode.vue?vue&type=script&lang=js&\"\nexport * from \"./RegionNode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RegionNode.vue?vue&type=style&index=0&id=90ae8d76&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"90ae8d76\",\n  null\n  \n)\n\nexport default component.exports","import { Node, mergeAttributes } from \"@tiptap/core\";\nimport { VueNodeViewRenderer } from \"@tiptap/vue-2\";\nimport Component from \"./RegionNode.vue\";\n\nexport default Node.create({\n  name: \"region\",\n\n  group: \"block\",\n\n  content: \"(line+ | table+)\",\n\n  addAttributes() {\n    return {\n      lines: {\n        default: [],\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: \"div\",\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\"div\", mergeAttributes(HTMLAttributes)];\n  },\n\n  addNodeView() {\n    return VueNodeViewRenderer(Component);\n  },\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (this.node.attrs.line.attributes)?_c('node-view-wrapper',{staticClass:\"line\"},[_c('div',{on:{\"click\":function($event){return _vm.onMouseClick(_vm.node.attrs.line.attributes.id)},\"mouseout\":function($event){return _vm.onMouseOut(_vm.node.attrs.line.attributes.id)},\"mouseover\":function($event){return _vm.onMouseOver(_vm.node.attrs.line.attributes.id)}}},[_c('node-view-content',{attrs:{\"id\":this.node.attrs.line.attributes.id}})],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <node-view-wrapper v-if=\"this.node.attrs.line.attributes\" class=\"line\">\n    <!-- <div\n    @mouseout=\"onMouseOut(node.attrs.line.attributes.id)\" @mouseover=\"onMouseOver(node.attrs.line.attributes.id)\"\n      class=\"drag-handle\"\n      contenteditable=\"false\"\n      draggable=\"true\"\n      data-drag-handle\n    /> -->\n    <div\n      @click=\"onMouseClick(node.attrs.line.attributes.id)\"\n      @mouseout=\"onMouseOut(node.attrs.line.attributes.id)\"\n      @mouseover=\"onMouseOver(node.attrs.line.attributes.id)\"\n    >\n      <node-view-content :id=\"this.node.attrs.line.attributes.id\">\n      </node-view-content>\n    </div>\n  </node-view-wrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent, nodeViewProps } from '@tiptap/vue-2'\nimport { mapState } from 'vuex'\n\nexport default {\n  components: {\n    NodeViewWrapper,\n    NodeViewContent\n  },\n  methods: {\n    highlight(id) {\n      this.$store.dispatch('content/highlight', {\n        target: id,\n        origin: 'content'\n      })\n    },\n    select(id) {\n      this.$store.dispatch('content/select', {\n        target: id,\n        origin: 'content'\n      })\n    },\n    onMouseOver(id) {\n      this.highlight(id)\n    },\n    onMouseOut(id) {\n      this.highlight(id)\n    },\n    onMouseClick(id) {\n      this.select(id)\n    }\n  },\n\n  props: nodeViewProps\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LineNode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LineNode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LineNode.vue?vue&type=template&id=3a71c82c&\"\nimport script from \"./LineNode.vue?vue&type=script&lang=js&\"\nexport * from \"./LineNode.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n  // imageBaseUrl: 'https://dbis-thure.uibk.ac.at/iiif/2',\n  // imageBaseUrl: 'https://files-test.transkribus.eu/iiif/2',\n  urls: {\n    image: \"https://files.transkribus.eu/iiif/2\",\n    xml: \"https://files.transkribus.eu/Get?id=\",\n  },\n  hashidsSecret: \"1234\",\n  token: \"\",\n  transcriptionURL: \"https://transkribus.eu/r/testing/sandbox/application/\",\n  searchApiBaseUrl: \"https://transkribus.eu/r/zQPlDb1ZvVWJuiBU/api/v0\",\n  apiBaseUrl: \"https://transkribus.eu/TrpServerTesting/rest\",\n  contactEmail: \"info@readcoop.eu\",\n  bugEmail: \"bugs@readcoop.eu\",\n  bugtrackerUrl:\n    \"incoming+readcoop-webdev-public-transkribuslite-25175868-issue-@incoming.gitlab.com\",\n  repo: \"https://gitlab.com/readcoop/webdev/public/transkribuslite\",\n  consentCookie: \"cookieaccepted\",\n  recordSession: true,\n};\n","import deepEqual from \"fast-deep-equal\";\nimport { fetchPageContent, fetchPageContentXML } from \"@/utils/api.js\";\nconst json = require(\"../../assets/page1.json\");\nconst xml =\n  '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n<PcGts xmlns=\"http://schema.primaresearch.org/PAGE/gts/pagecontent/2013-07-15\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://schema.primaresearch.org/PAGE/gts/pagecontent/2013-07-15 http://schema.primaresearch.org/PAGE/gts/pagecontent/2013-07-15/pagecontent.xsd\">\\n    <Metadata>\\n        <Creator>prov=University of Rostock/Institute of Mathematics/CITlab|PLANET AI GmbH/Gundram Leifert/gundram.leifert@planet-ai.de:name=1807_Leuv_Pelc-02(htr_id=22371)::::v=2.6.6\\nprov=University of Rostock/Institute of Mathematics/CITlab|PLANET AI GmbH/Tobias Gruening/tobias.gruening@planet-ai.de:name=de.uros.citlab.module.baseline2polygon.B2PSeamMultiOriented:v=2.6.6\\nprov=University of Rostock/Institute of Mathematics/CITlab|PLANET AI GmbH/Tobias Gruening/tobias.gruening@planet-ai.de:name=/net_tf/LA73_249_0mod360.pb:de.uros.citlab.segmentation.CITlab_LA_ML:v=2.6.6\\nTranskribus</Creator>\\n        <Created>2020-03-24T22:27:05.445+01:00</Created>\\n        <LastChange>2020-12-30T17:36:59.486+01:00</LastChange>\\n    </Metadata>\\n    <Page imageFilename=\"1807_Leuv_Pelc_01_00396.jpg\" imageWidth=\"2508\" imageHeight=\"3411\">\\n        <ReadingOrder>\\n            <OrderedGroup id=\"ro_1609346219555\" caption=\"Regions reading order\">\\n                <RegionRefIndexed index=\"0\" regionRef=\"TextRegion_1586368307619_944\"/>\\n            </OrderedGroup>\\n        </ReadingOrder>\\n        <TextRegion orientation=\"0.0\" id=\"TextRegion_1586368307619_944\" custom=\"readingOrder {index:0;}\">\\n            <Coords points=\"249,381 2148,290 2348,290 2348,449 2027,3160 249,3160\"/>\\n            <TextLine id=\"r2l1\" custom=\"readingOrder {index:0;} pagenumber {offset:0; length:3;}\">\\n                <Coords points=\"2140,442 2169,424 2225,430 2246,417 2262,416 2287,431 2312,422 2338,431 2360,426 2357,343 2321,342 2280,362 2255,341 2228,356 2212,349 2192,356 2176,344 2136,354\"/>\\n                <Baseline points=\"2148,398 2173,399 2198,399 2223,398 2248,398 2273,396 2298,393 2323,393 2348,390\"/>\\n                <TextEquiv>\\n                    <Unicode>207    1</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l1\" custom=\"readingOrder {index:1;} datum {offset:0; length:5;} textStyle {offset:0; length:4;underlined:true;}\">\\n                <Coords points=\"236,469 410,429 506,490 630,446 883,512 979,469 1218,531 1376,484 1591,552 1718,525 1722,449 1585,418 1264,392 1034,437 938,385 804,424 621,363 413,400 242,360\"/>\\n                <Baseline points=\"249,419 322,422 395,426 468,431 541,435 614,439 687,444 760,449 833,454 906,459 979,463 1052,468 1125,473 1198,476 1271,480 1344,484 1417,487 1490,489 1563,492 1636,493 1710,494\"/>\\n                <TextEquiv>\\n                    <Unicode>1777 Reglement van syne konenglyke Majesteyt.</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l2\" custom=\"readingOrder {index:2;} datum {offset:8; length:14;}\">\\n                <Coords points=\"1333,587 1433,582 1463,610 1540,588 1583,610 1633,601 1722,646 1806,611 1995,615 1998,557 1894,522 1793,554 1720,512 1588,553 1498,518 1439,551 1383,508 1337,515\"/>\\n                <Baseline points=\"1344,575 1376,575 1408,577 1440,578 1472,579 1504,581 1536,583 1568,585 1600,586 1632,589 1664,591 1696,593 1728,595 1760,597 1792,599 1824,601 1856,602 1888,603 1920,604 1952,605 1985,606\"/>\\n                <TextEquiv>\\n                    <Unicode>Van den 7 Augusti 1702.</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l3\" custom=\"readingOrder {index:3;} persoonsnaam {offset:0; length:9;} locatie {offset:45; length:9;}\">\\n                <Coords points=\"409,648 1257,721 1585,692 1821,748 1980,711 1982,658 1765,633 836,629 412,571\"/>\\n                <Baseline points=\"419,632 496,636 574,641 651,644 729,648 806,652 884,655 961,659 1039,662 1116,665 1194,669 1272,672 1349,675 1427,680 1504,683 1582,687 1659,691 1737,695 1814,700 1892,705 1970,710\"/>\\n                <TextEquiv>\\n                    <Unicode>Philippus Dei gratia Rex Castilli\\u00e6 Leonis et Arragonis</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l4\" custom=\"readingOrder {index:4;} locatie {offset:8; length:30;}\">\\n                <Coords points=\"434,720 778,740 879,793 992,748 1787,819 1967,787 1951,741 1807,758 1750,709 1555,748 1388,699 828,717 781,671 596,704 438,651\"/>\\n                <Baseline points=\"444,713 519,719 595,725 671,729 746,734 822,738 898,741 973,746 1049,748 1125,752 1201,754 1276,756 1352,759 1428,762 1503,765 1579,768 1655,772 1730,777 1806,781 1882,787 1958,792\"/>\\n                <TextEquiv>\\n                    <Unicode>&amp;a. Dux Lotharingi\\u00e6 Brabanti\\u00e6, Limburg, Marchio sacri</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l5\" custom=\"readingOrder {index:5;} locatie {offset:0; length:6;}\">\\n                <Coords points=\"432,850 619,813 1971,889 1975,813 1468,831 997,752 577,783 439,721\"/>\\n                <Baseline points=\"444,800 519,803 595,807 671,809 747,813 823,816 899,820 974,823 1050,827 1126,831 1202,834 1278,838 1354,843 1430,847 1505,852 1581,857 1657,863 1733,869 1809,874 1885,881 1961,888\"/>\\n                <TextEquiv>\\n                    <Unicode>Romani imperii &amp; &amp; omnibus et singulis presentes litteras</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l6\" custom=\"readingOrder {index:6;}\">\\n                <Coords points=\"423,894 2020,1001 2017,909 426,844\"/>\\n                <Baseline points=\"435,879 513,881 592,883 671,885 750,890 829,893 908,897 986,902 1065,906 1144,911 1223,917 1302,922 1381,928 1460,933 1538,939 1617,945 1696,950 1775,954 1854,959 1933,964 2012,968\"/>\\n                <TextEquiv>\\n                    <Unicode>visuris, vel andituris salutem. Volentes finem imponere qui\\u00ac</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l7\" custom=\"readingOrder {index:7;}\">\\n                <Coords points=\"437,1001 874,979 1056,1032 1146,993 1404,1068 1481,1023 1730,1086 1856,1045 1913,1093 2029,1004 442,914\"/>\\n                <Baseline points=\"449,965 527,963 605,963 684,966 762,968 841,972 919,975 998,980 1076,986 1155,991 1233,997 1311,1002 1390,1008 1468,1014 1547,1020 1625,1025 1704,1029 1782,1033 1861,1037 1939,1040 2018,1041\"/>\\n                <TextEquiv>\\n                    <Unicode>busdam difficallatibus, quas inter Regentes et Professores qua\\u00ac</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l8\" custom=\"readingOrder {index:8;} locatie {offset:18; length:32;}\">\\n                <Coords points=\"420,1054 751,1108 992,1062 1548,1093 1863,1159 1978,1088 1479,1023 1406,1067 1239,1005 423,997\"/>\\n                <Baseline points=\"431,1037 507,1038 584,1038 661,1040 738,1043 815,1046 891,1049 968,1053 1045,1058 1122,1062 1199,1067 1275,1072 1352,1079 1429,1083 1506,1089 1583,1094 1659,1100 1736,1105 1813,1110 1890,1116 1967,1121\"/>\\n                <TextEquiv>\\n                    <Unicode>tuor p\\u00e6dagogiorum Universitatis nostra Lovaniensis, ex</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l9\" custom=\"readingOrder {index:9;} locatie {offset:20; length:9;}\">\\n                <Coords points=\"428,1126 1684,1173 2035,1235 2015,1134 432,1058\"/>\\n                <Baseline points=\"438,1115 517,1116 596,1119 676,1121 755,1124 835,1127 914,1131 994,1135 1073,1139 1153,1143 1232,1148 1311,1153 1391,1158 1470,1163 1550,1169 1629,1175 1709,1181 1788,1186 1868,1192 1947,1198 2027,1205\"/>\\n                <TextEquiv>\\n                    <Unicode>litei coram suprimo Brabanti\\u00e6 nostro senatu, inter cos mota,</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l10\" custom=\"readingOrder {index:10;}\">\\n                <Coords points=\"408,1218 1926,1274 1928,1215 1873,1200 412,1144\"/>\\n                <Baseline points=\"420,1193 494,1196 569,1199 644,1200 719,1203 794,1207 868,1209 943,1213 1018,1216 1093,1218 1168,1223 1242,1226 1317,1230 1392,1234 1467,1238 1542,1242 1616,1248 1691,1251 1766,1256 1841,1263 1916,1268\"/>\\n                <TextEquiv>\\n                    <Unicode>et aliunde exortas deprehendimus, habito desuper consilio</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l11\" custom=\"readingOrder {index:11;} locatie {offset:0; length:37;}\">\\n                <Coords points=\"405,1282 1952,1356 1954,1306 1592,1253 407,1233\"/>\\n                <Baseline points=\"416,1266 492,1272 568,1277 645,1280 721,1284 797,1287 874,1289 950,1292 1026,1293 1103,1296 1179,1298 1255,1301 1332,1304 1408,1307 1484,1310 1561,1314 1637,1318 1713,1324 1790,1329 1866,1335 1943,1343\"/>\\n                <TextEquiv>\\n                    <Unicode>Facultatis Artium dict\\u00e6 Universitatis et deliberatione</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l12\" custom=\"readingOrder {index:12;} persoonsnaam {offset:49; length:5; continued:true;}\">\\n                <Coords points=\"431,1364 974,1417 1087,1372 1168,1429 1334,1378 1384,1416 1931,1419 1903,1361 1651,1361 1506,1305 1249,1347 434,1294\"/>\\n                <Baseline points=\"441,1344 515,1349 589,1352 663,1355 737,1358 811,1361 885,1364 959,1367 1033,1369 1107,1371 1181,1374 1255,1377 1329,1379 1403,1382 1477,1385 1551,1388 1625,1391 1699,1395 1773,1400 1847,1404 1922,1409\"/>\\n                <TextEquiv>\\n                    <Unicode>Claressimi et Amantissimi Cognati nostri Isidori De la</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l13\" custom=\"readingOrder {index:13;} persoonsnaam {offset:0; length:18; continued:true;} persoonsnaam {offset:20; length:36;}\">\\n                <Coords points=\"415,1439 1985,1509 1971,1425 980,1421 817,1374 589,1411 418,1366\"/>\\n                <Baseline points=\"426,1424 503,1427 581,1428 658,1430 736,1433 813,1436 891,1437 968,1440 1046,1443 1123,1446 1201,1448 1278,1451 1356,1455 1433,1458 1511,1461 1588,1466 1666,1470 1743,1475 1821,1480 1898,1484 1976,1490\"/>\\n                <TextEquiv>\\n                    <Unicode>Cueba et Bernardes, Marchionis De Bedina Capitanci Cohor\\u00ac</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l14\" custom=\"readingOrder {index:14;}\">\\n                <Coords points=\"415,1511 543,1556 680,1511 1971,1565 1925,1513 1634,1475 418,1453\"/>\\n                <Baseline points=\"426,1499 502,1500 579,1500 656,1502 733,1502 809,1504 886,1506 963,1508 1040,1511 1116,1513 1193,1516 1270,1519 1347,1522 1423,1525 1500,1529 1577,1533 1654,1537 1730,1541 1807,1545 1884,1551 1961,1556\"/>\\n                <TextEquiv>\\n                    <Unicode>tis equitum et calaphractorum, veterum Castill\\u00e6 custodum</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l15\" custom=\"readingOrder {index:15;} locatie {offset:17; length:39;} textStyle {offset:48; length:1;superscript:true;}\">\\n                <Coords points=\"418,1607 1933,1631 1929,1561 726,1520 539,1556 422,1510\"/>\\n                <Baseline points=\"429,1574 503,1576 578,1578 652,1580 727,1581 802,1583 876,1584 951,1586 1026,1587 1100,1589 1175,1590 1250,1593 1324,1596 1399,1598 1474,1602 1548,1606 1623,1610 1698,1614 1772,1619 1847,1625 1922,1631\"/>\\n                <TextEquiv>\\n                    <Unicode>Commendatarii de L\\'orcaio de la Torres Ordinis St jacobi</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l16\" custom=\"readingOrder {index:16;}\">\\n                <Coords points=\"393,1667 1955,1722 1980,1636 802,1585 395,1623\"/>\\n                <Baseline points=\"405,1646 483,1647 561,1648 639,1649 717,1650 795,1653 873,1655 951,1658 1029,1659 1107,1662 1186,1665 1264,1668 1342,1672 1420,1675 1498,1679 1576,1684 1654,1688 1732,1692 1810,1698 1888,1702 1967,1709\"/>\\n                <TextEquiv>\\n                    <Unicode>nobis a cubilibus, et Belgii Commendatoris Generalis statui\\u00ac</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l17\" custom=\"readingOrder {index:17;}\">\\n                <Coords points=\"415,1740 537,1767 658,1735 694,1770 863,1729 1022,1777 1176,1744 1308,1794 1413,1755 1575,1783 1577,1714 1482,1679 1402,1715 1143,1673 1040,1702 999,1671 417,1666\"/>\\n                <Baseline points=\"426,1718 485,1718 545,1719 605,1719 665,1721 725,1721 785,1722 845,1724 905,1724 965,1727 1025,1728 1085,1730 1145,1731 1205,1734 1265,1736 1325,1739 1385,1742 1445,1745 1505,1748 1565,1752\"/>\\n                <TextEquiv>\\n                    <Unicode>mus, pr\\u00e6cipimus et mandamus sequentia.</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l18\" custom=\"readingOrder {index:18;}\">\\n                <Coords points=\"1119,1796 1139,1798 1150,1808 1162,1811 1168,1809 1172,1812 1176,1808 1188,1811 1194,1752 1182,1751 1177,1744 1172,1748 1166,1747 1142,1765 1139,1762 1123,1761\"/>\\n                <Baseline points=\"1130,1788 1179,1793\"/>\\n                <TextEquiv>\\n                    <Unicode>1</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l19\" custom=\"readingOrder {index:19;}\">\\n                <Coords points=\"390,1868 567,1853 636,1905 1025,1860 1145,1906 1227,1866 1357,1920 1430,1876 1762,1882 1846,1936 1953,1867 1645,1801 1222,1834 1039,1769 914,1837 392,1795\"/>\\n                <Baseline points=\"401,1845 478,1847 555,1848 632,1850 709,1851 786,1853 863,1854 940,1856 1017,1857 1094,1860 1172,1862 1249,1863 1326,1866 1403,1869 1480,1871 1557,1874 1634,1877 1711,1880 1788,1883 1865,1887 1943,1892\"/>\\n                <TextEquiv>\\n                    <Unicode>Nullus Regentum gaudebet fructu regenti\\u00e6, nisi pro tempore</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l20\" custom=\"readingOrder {index:20;}\">\\n                <Coords points=\"387,1934 1623,1949 1952,2004 1954,1924 1728,1888 1620,1925 1243,1870 389,1868\"/>\\n                <Baseline points=\"398,1920 475,1920 552,1920 629,1920 707,1922 784,1922 861,1922 938,1923 1016,1925 1093,1926 1170,1928 1247,1931 1325,1932 1402,1935 1479,1938 1556,1942 1634,1946 1711,1950 1788,1955 1865,1961 1943,1968\"/>\\n                <TextEquiv>\\n                    <Unicode>admissionis a Facultate et exhibitionis omnium conditionum.</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l21\" custom=\"readingOrder {index:21;}\">\\n                <Coords points=\"395,1990 495,2031 1170,1997 1510,2061 1577,2019 1856,2051 1912,2003 1093,1929 978,1967 396,1944\"/>\\n                <Baseline points=\"405,1985 479,1986 554,1986 629,1988 704,1989 779,1991 853,1991 928,1992 1003,1994 1078,1995 1153,1997 1227,1998 1302,2001 1377,2004 1452,2006 1527,2010 1601,2013 1676,2018 1751,2022 1826,2028 1901,2034\"/>\\n                <TextEquiv>\\n                    <Unicode>sub quibus a Provisoribus fucrit assumptus, qu\\u00e6 ab eadem</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l22\" custom=\"readingOrder {index:22;}\">\\n                <Coords points=\"394,2082 567,2068 709,2107 857,2068 920,2118 1076,2129 1185,2072 1269,2117 1336,2087 1465,2106 1514,2095 1516,2037 395,2009\"/>\\n                <Baseline points=\"404,2058 459,2058 514,2059 569,2060 624,2060 679,2061 734,2061 789,2061 844,2063 899,2063 954,2064 1009,2064 1064,2066 1119,2067 1174,2069 1229,2071 1284,2073 1339,2076 1394,2078 1449,2082 1505,2087\"/>\\n                <TextEquiv>\\n                    <Unicode>Facultate poterunt probari vel improbari.</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l23\" custom=\"readingOrder {index:23;}\">\\n                <Coords points=\"1099,2141 1111,2139 1121,2148 1131,2145 1139,2150 1153,2148 1153,2085 1137,2085 1133,2089 1119,2093 1109,2101 1099,2101\"/>\\n                <Baseline points=\"1110,2130 1143,2130\"/>\\n                <TextEquiv>\\n                    <Unicode>2</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l24\" custom=\"readingOrder {index:24;}\">\\n                <Coords points=\"397,2221 872,2185 977,2241 1154,2199 1820,2237 1935,2221 1937,2154 1064,2173 399,2100\"/>\\n                <Baseline points=\"408,2180 483,2181 559,2183 635,2184 711,2186 787,2189 863,2190 938,2192 1014,2195 1090,2196 1166,2198 1242,2199 1318,2202 1394,2204 1469,2205 1545,2206 1621,2207 1697,2207 1773,2208 1849,2208 1925,2208\"/>\\n                <TextEquiv>\\n                    <Unicode>quilibet Regentum computus suos, singulis annis pr\\u00e6sente</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l25\" custom=\"readingOrder {index:25;}\">\\n                <Coords points=\"383,2251 1856,2324 1956,2297 1958,2222 384,2219\"/>\\n                <Baseline points=\"393,2240 470,2243 548,2247 625,2250 703,2253 781,2256 858,2259 936,2262 1014,2265 1091,2267 1169,2270 1247,2271 1324,2273 1402,2276 1480,2277 1557,2277 1635,2279 1713,2279 1790,2280 1868,2280 1946,2280\"/>\\n                <TextEquiv>\\n                    <Unicode>uno ex neutralibus non provisore a Facultate deputato (absque</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l26\" custom=\"readingOrder {index:26;}\">\\n                <Coords points=\"383,2319 1580,2379 1904,2372 1948,2316 385,2249\"/>\\n                <Baseline points=\"393,2307 470,2310 547,2313 624,2317 701,2321 779,2324 856,2327 933,2330 1010,2332 1087,2334 1165,2337 1242,2340 1319,2342 1396,2345 1473,2346 1551,2348 1628,2351 1705,2352 1782,2354 1859,2355 1937,2355\"/>\\n                <TextEquiv>\\n                    <Unicode>tamen novo p\\u00e6dagogii gravamine) reddet suis Provisoribus, alias</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l27\" custom=\"readingOrder {index:27;}\">\\n                <Coords points=\"372,2430 609,2389 1105,2441 1933,2429 1887,2369 374,2350\"/>\\n                <Baseline points=\"384,2376 460,2380 537,2383 614,2385 691,2388 768,2390 845,2393 922,2395 999,2397 1076,2399 1153,2402 1229,2403 1306,2405 1383,2408 1460,2411 1537,2412 1614,2415 1691,2418 1768,2421 1845,2425 1922,2429\"/>\\n                <TextEquiv>\\n                    <Unicode>quotannis mulitam incurret centum florenorum, si intra tres</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l28\" custom=\"readingOrder {index:28;}\">\\n                <Coords points=\"374,2479 1946,2509 1947,2431 375,2428\"/>\\n                <Baseline points=\"384,2451 461,2454 539,2456 616,2457 694,2459 772,2460 849,2462 927,2463 1005,2465 1082,2466 1160,2467 1238,2469 1315,2471 1393,2472 1471,2474 1548,2476 1626,2478 1704,2481 1781,2484 1859,2487 1937,2490\"/>\\n                <TextEquiv>\\n                    <Unicode>menses post clapsum anniem computus non reddiderit, censebitur</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l29\" custom=\"readingOrder {index:29;}\">\\n                <Coords points=\"388,2537 1624,2551 1826,2609 1955,2582 1957,2504 389,2493\"/>\\n                <Baseline points=\"399,2523 476,2525 553,2526 631,2528 708,2529 785,2531 863,2532 940,2534 1017,2534 1095,2535 1172,2537 1249,2538 1327,2540 1404,2541 1481,2543 1559,2546 1636,2547 1713,2550 1791,2553 1868,2556 1946,2559\"/>\\n                <TextEquiv>\\n                    <Unicode>autem annus exsperare, die annuali recurrente aditus regentux.</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l30\" custom=\"readingOrder {index:30;}\">\\n                <Coords points=\"1081,2608 1091,2609 1099,2616 1105,2615 1113,2607 1122,2606 1129,2613 1145,2612 1151,2551 1139,2550 1124,2558 1118,2554 1087,2553\"/>\\n                <Baseline points=\"1092,2600 1136,2604\"/>\\n                <TextEquiv>\\n                    <Unicode>3</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l31\" custom=\"readingOrder {index:31;}\">\\n                <Coords points=\"373,2690 1798,2702 1933,2682 1934,2638 1729,2598 1649,2639 850,2639 777,2590 374,2585\"/>\\n                <Baseline points=\"384,2657 465,2658 546,2661 627,2663 708,2666 789,2667 870,2669 951,2670 1032,2671 1113,2672 1194,2673 1275,2673 1356,2673 1437,2673 1518,2673 1599,2673 1680,2672 1761,2672 1842,2670 1923,2669\"/>\\n                <TextEquiv>\\n                    <Unicode>item ad singulos computus decebunt de omnibus debilis iam,</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l32\" custom=\"readingOrder {index:32;}\">\\n                <Coords points=\"371,2752 1808,2776 1947,2767 1948,2691 371,2690\"/>\\n                <Baseline points=\"381,2726 458,2727 536,2729 614,2731 692,2733 770,2735 847,2736 925,2738 1003,2738 1081,2739 1159,2741 1236,2741 1314,2742 1392,2742 1470,2742 1548,2742 1625,2741 1703,2741 1781,2739 1859,2738 1937,2736\"/>\\n                <TextEquiv>\\n                    <Unicode>activis quam passivis, qua usque ad tempus redditionis computus</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l33\" custom=\"readingOrder {index:33;}\">\\n                <Coords points=\"376,2822 1807,2841 1918,2831 1919,2757 377,2766\"/>\\n                <Baseline points=\"387,2796 463,2796 539,2798 615,2799 691,2801 767,2802 843,2804 919,2805 995,2807 1071,2809 1147,2810 1223,2811 1299,2813 1375,2814 1451,2814 1527,2816 1603,2816 1679,2816 1755,2816 1831,2814 1908,2813\"/>\\n                <TextEquiv>\\n                    <Unicode>inclusive contracta sunt, sub pana quod pro omni debito arte</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l34\" custom=\"readingOrder {index:34;}\">\\n                <Coords points=\"362,2888 1727,2894 1794,2941 1932,2905 1932,2851 1760,2831 363,2822\"/>\\n                <Baseline points=\"372,2862 449,2863 527,2864 604,2865 682,2867 759,2868 837,2870 914,2873 992,2874 1069,2876 1147,2879 1225,2880 1302,2882 1380,2882 1457,2883 1535,2884 1612,2885 1690,2883 1767,2883 1845,2882 1923,2880\"/>\\n                <TextEquiv>\\n                    <Unicode>contracto, ad onus p\\u00e6dagogii non expresso, sint futuri p\\u00e6dagogio</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l35\" custom=\"readingOrder {index:35;}\">\\n                <Coords points=\"361,2961 988,2947 1323,2988 1325,2902 1275,2893 1110,2927 991,2882 816,2917 612,2872 363,2886\"/>\\n                <Baseline points=\"371,2931 418,2930 465,2930 512,2931 559,2931 606,2933 653,2934 701,2936 748,2937 795,2939 842,2940 889,2942 936,2943 983,2945 1031,2946 1078,2948 1125,2948 1172,2949 1219,2949 1266,2948 1314,2948\"/>\\n                <TextEquiv>\\n                    <Unicode>debitores ad ratam debiti non expressi.</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextLine id=\"r1l36\" custom=\"readingOrder {index:36;} textStyle {offset:0; length:1;underlined:true;}\">\\n                <Coords points=\"1016,3166 1032,3166 1039,3172 1049,3166 1061,3172 1069,3170 1079,3160 1089,3160 1089,3049 1073,3049 1069,3045 1059,3047 1047,3041 1028,3049 1016,3049\"/>\\n                <Baseline points=\"1026,3141 1053,3141 1080,3141\"/>\\n                <TextEquiv>\\n                    <Unicode>4</Unicode>\\n                </TextEquiv>\\n            </TextLine>\\n            <TextEquiv>\\n                <Unicode>208 &amp;\\n1777, Roghement van Syne Koninglyke Majesteyt.\\nVan den 7 Augusti 1702\\nPhelippus Der gratia. Rex Castillia, Lconis et Anagonis\\n&amp;. Dux Lotharingi Brabantia, Lembrag Marchio; Saeri\\nRomani imperie &amp; &amp; omnibus et Singulis presentes litteras\\nvisuris, vel andituris salutem. Vosentes finem imponere qui\\u00ac\\nbeesdam difficallatibus, quas inter Regentes et Professores qur\\u00ac\\ntuor padagogorum Universitatis nostra Lovaniensis, en\\nlitei coram suprimo Brabantia nostro senatu inter cos mota,\\net alrunde exortas deprehendimus,  habito desper consilio\\nFacultatis Artium dicta Universitatis et deliberatione\\nClaressimi et Amantissimi Cognati nostri bedori De la\\nExeba et Bernardes, Marchionis De Bedina Capitanci Cohor\\u00ac\\ntes equilum. et Calaphraetorum veterum Castilla Custodum\\nCommendatarii de Lorcaio de la Torres Ordenis Sr Jacobi\\nnobis a cubilibus, et Belgri Commendatoris Generalss Statui\\u00ac\\nmus, pracipinus et mandamus scquentia.\\n1\\nNullus Regentum gandebet frucu regentia nisi pro lempore\\nEdmissionis a Facultate et exhibitionis omneum conditionun.\\nsub quibus a Provisorobus fucrit assamptus, qua al eadem\\nFacultate poterant probari vel inprobari.\\n2\\nGullibet Regentum computus Secos, Singules annis presente\\nuno ex ncutralibus non provesore a Facullate de pulato (absque\\ntamen novo padagoge gravamine) reddet siis Provisoribus, alias\\nquotannis mulitam incuriet cenlum florenoram, S intra tres\\nmenses post clapsum anniem computus non reddiderit, censebitier\\nceulem annus crsperare, die annuali recurrente aditus regentie\\nB.\\nitem ad Singulos compnters daccbunt de ommmbus delit\\u00e9s lam\\nactivis quam passivis, qua usque ad tlempus redditionis computes\\ninclusive contraeta sunt, sul pana quod pro omni debito arte\\ncontracto ad onus padagoge nan erpresso, sint futuri padagogie\\ndebitores ad ratam debit\\u00e9 von expressi.\\n9</Unicode>\\n            </TextEquiv>\\n        </TextRegion>\\n    </Page>\\n</PcGts>\\n';\n\nimport { parsePageContent, parseXML } from \"@/utils/xml.js\";\n\nexport const state = () => ({\n  id: null,\n  data: null,\n  selected: null,\n  selectedTag: null,\n  highlighted: null,\n  isError: false,\n  isReady: false,\n  isLoading: false,\n  xmlModel: parseXML(xml),\n  wasSaved: false,\n  wasEdited: false,\n  editLayoutHorizontal: true,\n  iiifUrl:\n    \"https://files.transkribus.eu/iiif/2/XITIHIQXRRBAHPZDHDPHWHMP/info.json\",\n  xmlJson: parsePageContent(xml),\n  xml: xml,\n});\n\nexport const mutations = {\n  update(state, params) {\n    for (const key in params)\n      if (!deepEqual(state[key], params[key])) state[key] = params[key];\n  },\n};\n\nexport const actions = {\n  update({ commit }, params) {\n    commit(\"update\", params);\n  },\n  reset({ dispatch }) {\n    dispatch(\"update\", {\n      id: null,\n      data: null,\n      selected: null,\n      selectedTag: null,\n      highlighted: null,\n      isError: false,\n      isready: false,\n      isLoading: false,\n      xmlModel: parseXML(xml),\n      wasSaved: false,\n      wasEdited: false,\n      editLayoutHorizontal: true,\n      iiifUrl:\n        \"https://files.transkribus.eu/iiif/2/XITIHIQXRRBAHPZDHDPHWHMP/info.json\",\n      xmlJson: parsePageContent(xml),\n      xml: xml,\n    });\n  },\n  select({ dispatch, state }, { origin, target }) {\n    dispatch(\"update\", { selected: { origin, target } });\n  },\n  highlight({ dispatch, state }, { origin, target }) {\n    dispatch(\"update\", { highlighted: { origin, target } });\n  },\n  setSelectedTag({ dispatch, state }, { selectedTag }) {\n    dispatch(\"update\", { selectedTag: selectedTag });\n  },\n  setIIIF({ dispatch, state }, { iiifUrl }) {\n    console.log(\"update IIIF url \", iiifUrl);\n    dispatch(\"update\", { iiifUrl: iiifUrl });\n  },\n  setXmlJson({ dispatch, state }, { xmlJson }) {\n    console.log(\"update xmlJson \", xmlJson);\n    dispatch(\"update\", { xmlJson: xmlJson });\n  },\n  setXml({ dispatch, state }, { xml }) {\n    console.log(\"parsePagexml \", xml);\n    let json = parseXML(xml);\n\n    dispatch(\"update\", { xmlModel: json });\n\n    let pageJson = parsePageContent(xml);\n\n    dispatch(\"update\", { xmlJson: pageJson });\n  },\n  setXmlModel({ dispatch, state }, { xmlModel }) {\n    console.log(\"set Xml model\", xmlModel);\n    dispatch(\"update\", { xmlModel: xmlModel });\n  },\n  async fetch({ state, dispatch }, id) {\n    // if (id) dispatch('update', { id })\n    dispatch(\"update\", { isLoading: true, isReady: false });\n    await dispatch(\"fetchPageContent\", id);\n    dispatch(\"update\", { isLoading: false, isReady: true });\n  },\n  async fetchPageContent({ state, dispatch }, id) {\n    if (id) dispatch(\"update\", { id });\n    const data = await fetchPageContentXML(id);\n    if (data === null) dispatch(\"update\", { data: null, isError: true });\n    else {\n      dispatch(\"update\", {\n        data: Object.freeze(data),\n        isError: false,\n      });\n    }\n  },\n  findElementById({ state }, id) {\n    const node = state.xmlJson;\n    const stack = [node];\n    while (stack.length) {\n      const node = stack.pop();\n      if (node.elements) node.elements.forEach((node) => stack.push(node));\n      if (node.attributes && node.attributes.id === id) return node;\n    }\n    return null;\n  },\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n};\n","const { xml2js, json2xml } = require(\"xml-js\");\nconst jp = require(\"jmespath\");\nconst simplify = require(\"simplify-js\");\nimport store from \"../store/content/index.js\";\n\nconst XML2JS = {\n  DEFAULT: {\n    compact: false,\n    trim: false,\n    alwaysArray: true,\n    alwaysChildren: true,\n    attributeValueFn: parseAttributeValue,\n  },\n  TEST: {\n    compact: false,\n    attributeValueFn: parseAttributeValue,\n  },\n};\n\nconst SIMPLIFY_TOLERANCE = 25; // pixels\n\nfunction parsePointsAttribute(string = \"\") {\n  return string\n    .split(/\\s+/)\n    .map((string) => string.split(/\\s*,\\s*/).map((x) => parseInt(x)))\n    .map(([x, y]) => ({ x, y }));\n  // return simplify(\n  //   string\n  //     .split(/\\s+/)\n  //     .map((string) => string.split(/\\s*,\\s*/).map((x) => parseInt(x)))\n  //     .map(([x, y]) => ({ x, y })),\n  //   SIMPLIFY_TOLERANCE\n  // );\n}\n\nfunction reverseParsePointsAttribute(values) {\n  var pointString = \"\";\n  for (var point in values.points) {\n    var temp = values.points[point];\n    pointString += temp.x + \",\" + temp.y + \" \";\n  }\n  values.points = pointString.replace(/\\s*$/, \"\");\n}\n\nfunction parseCustomAttribute(string) {\n  if (string === \"\") return [];\n\n  return string.split(\"} \").reduce((results, string) => {\n    const name = string.split(\" {\")[0];\n    let attrs = string.split(\" {\")[1];\n\n    if (attrs.indexOf(\"}\")) attrs = attrs.replace(\"}\", \"\");\n\n    var key, value;\n\n    return results.concat({\n      name: name.trim(),\n      attributes: attrs.split(\";\").reduce((attrs, string) => {\n        string = string.trim();\n        if (string) {\n          key = string.split(\":\")[0].trim();\n          value = decodeURIComponent(\n            JSON.parse(\n              '\"' + string.split(\":\")[1].trim().replace('\"', '\\\\\"') + '\"'\n            )\n          );\n          if (key === \"index\" || key === \"offset\" || key === \"length\") {\n            attrs[key] = parseInt(value);\n          } else if (\n            key === \"continued\" ||\n            key === \"superscript\" ||\n            key === \"bold\" ||\n            key === \"italic\" ||\n            key === \"subscript\"\n          ) {\n            attrs[key] = Boolean(value);\n          } else attrs[key] = value;\n        }\n        return attrs;\n      }, {}),\n    });\n  }, []);\n}\n\nfunction reverseParseparseCustomAttribute(value) {\n  var customString = \"\";\n  for (var custom in value.custom) {\n    var temp = value.custom[custom];\n    customString +=\n      temp.name +\n      \" \" +\n      JSON.stringify(temp.attributes).replaceAll('\"', \"\").replaceAll(\",\", \";\") +\n      \" \";\n  }\n  value.custom = customString;\n}\n\nfunction parseAttributeValue(value, name) {\n  switch (name) {\n    case \"points\":\n      return parsePointsAttribute(value);\n    case \"custom\":\n      return parseCustomAttribute(value);\n    default:\n      return value;\n  }\n}\n\nfunction reverseParseAttributeValue(values, name) {\n  if (values.points) {\n    reverseParsePointsAttribute(values);\n  }\n  if (values.custom) {\n    reverseParseparseCustomAttribute(values);\n  }\n  if (values.imgUrl) {\n    values.imgUrl = values.imgUrl.replaceAll(\"&\", \"&amp;\");\n  }\n  switch (name) {\n    case \"points\":\n      return reverseParsePointsAttribute(values);\n    case \"custom\":\n      return reverseParseparseCustomAttribute(values);\n    default:\n      return values;\n  }\n}\n\nexport function getObjects(obj, key, val) {\n  var objects = [];\n  for (var i in obj) {\n    if (!obj.hasOwnProperty(i)) continue;\n    if (typeof obj[i] == \"object\") {\n      objects = objects.concat(getObjects(obj[i], key, val));\n    } else if ((i == key && obj[i] == val) || (i == key && val == \"\")) {\n      objects.push(obj);\n    } else if (obj[i] == val && key == \"\") {\n      if (objects.lastIndexOf(obj) == -1) {\n        objects.push(obj);\n      }\n    }\n  }\n  return objects;\n}\n\nfunction replaceLine(obj, key, val, textString, customObjArr) {\n  for (var i in obj) {\n    if (!obj.hasOwnProperty(i)) continue;\n    if (typeof obj[i] == \"object\") {\n      if (obj[i] && obj[i].name == \"TextLine\" && obj[i].attributes) {\n        if (obj[i].attributes.id == val) {\n          obj[i].attributes.custom = customObjArr;\n          var elementArr = {\n            elements: [{ text: \"\", type: \"text\" }],\n            name: \"Unicode\",\n            type: \"element\",\n          };\n          obj[i].elements[2].elements[0] = elementArr;\n          obj[i].elements[2].elements[0].elements[0].text = textString;\n          return obj[i];\n        }\n      }\n      replaceLine(obj[i], key, val, textString, customObjArr);\n    } else if ((i == key && obj[i] == val) || (i == key && val == \" \")) {\n      obj[i].attributes.custom = customObjArr;\n      obj[i].elements[2].elements[0].elements[0].text = textString;\n      return obj[i];\n    }\n  }\n}\n\nexport function getValues(obj, key) {\n  var objects = [];\n  for (var i in obj) {\n    if (!obj.hasOwnProperty(i)) continue;\n    if (typeof obj[i] == \"object\") {\n      objects = objects.concat(getValues(obj[i], key));\n    } else if (i == key) {\n      objects.push(obj[i]);\n    }\n  }\n  return objects;\n}\n\nexport function getKeys(obj, val) {\n  var objects = [];\n  for (var i in obj) {\n    if (!obj.hasOwnProperty(i)) continue;\n    if (typeof obj[i] == \"object\") {\n      objects = objects.concat(getKeys(obj[i], val));\n    } else if (obj[i] == val) {\n      objects.push(i);\n    }\n  }\n  return objects;\n}\n\nexport function parseEditorOutput(editorJson, globalJson) {\n  var editorLineArr = getObjects(editorJson, \"type\", \"line\");\n  for (var lineIndex in editorLineArr) {\n    var line = editorLineArr[lineIndex];\n    var customObjArr = [];\n    customObjArr.push(line.attrs.line.attributes.custom[0]);\n    var textString = \"\";\n    if (line.content == undefined) {\n      replaceLine(\n        globalJson,\n        \"id\",\n        line.attrs.line.attributes.id,\n        \" \",\n        customObjArr\n      );\n    }\n    for (var contentIndex in line.content) {\n      var lineContent = line.content[contentIndex];\n      var text = lineContent.text;\n      if (lineContent.marks) {\n        for (var markIndex in lineContent.marks) {\n          var mark = lineContent.marks[markIndex];\n          var attributes = {};\n          var name = mark.type;\n          var offset = textString.length;\n          var length = text.length;\n          if (mark.attrs) {\n            attributes = mark.attrs.tag.attributes;\n          }\n\n          if (attributes.offset === undefined) {\n            //TODO check for continued\n            attributes.offset = offset;\n            attributes.length = length;\n          }\n\n          switch (name) {\n            case \"strike\":\n              name = \"textStyle\";\n              attributes.strikethrough = true;\n              break;\n            case \"underline\":\n              name = \"textStyle\";\n              attributes.underlined = true;\n              break;\n            case \"subscript\":\n              name = \"textStyle\";\n              attributes.subscript = true;\n              break;\n\n            case \"superscript\":\n              name = \"textStyle\";\n              attributes.superscript = true;\n              break;\n          }\n\n          customObjArr.push({ name: name, attributes: attributes });\n        }\n      }\n      textString += text;\n      replaceLine(\n        globalJson,\n        \"id\",\n        line.attrs.line.attributes.id,\n        textString,\n        customObjArr\n      );\n    }\n  }\n  return globalJson;\n}\n\nexport function parseToXML(json) {\n  var options = {\n    compact: false,\n    ignoreComment: true,\n    spaces: 4,\n    sanitize: false,\n    attributesFn: reverseParseAttributeValue,\n  };\n  var result = json2xml(json, options);\n  return result;\n}\n\nexport function parseJsonContent(json) {\n  const result = jp.search(\n    json,\n    \"{ declaration: declaration,PcGts: elements[?name == 'PcGts'].{type: name,attributes: attributes,Page: elements[?name == 'Page'].{type: name,attributes: attributes,elements: elements[?name == 'TextRegion' || name == 'TableRegion'].{type: name,attributes: attributes,geometry: {coords: elements[?name == 'Coords'].attributes.points | [0]},elements: elements[?name == 'TextLine' || name == 'TableCell'].{type: name,attributes: attributes,geometry: {coords: elements[?name == 'Coords'].attributes.points | [0],baseline: elements[?name == 'Baseline'].attributes.points | [0]},elements: [elements[?name == 'TextEquiv' || name == 'TextLine'].{ elements:[elements[?name == 'Unicode' || name == 'TextEquiv'].[elements[?type == 'text' || name == 'Unicode']] | []], attributes : attributes, geometry: {coords: elements[?name == 'Coords'].attributes.points | [0]}}] | [] | [] | []} | []} } | [0]} | [0]}\"\n  );\n  return result.PcGts.Page;\n}\nexport function parseXML(xml, type = \"DEFAULT\") {\n  const js = xml2js(xml, XML2JS[type]);\n  var json = JSON.parse(JSON.stringify(js));\n  return json;\n}\n\nexport function parsePageContent(xml, type = \"DEFAULT\") {\n  const js = xml2js(xml, XML2JS[type]);\n  var json = JSON.parse(JSON.stringify(js));\n\n  const result = jp.search(\n    js,\n    \"{ declaration: declaration,PcGts: elements[?name == 'PcGts'].{type: name,attributes: attributes,Page: elements[?name == 'Page'].{type: name,attributes: attributes,elements: elements[?name == 'TextRegion' || name == 'TableRegion'].{type: name,attributes: attributes,geometry: {coords: elements[?name == 'Coords'].attributes.points | [0]},elements: elements[?name == 'TextLine' || name == 'TableCell'].{type: name,attributes: attributes,geometry: {coords: elements[?name == 'Coords'].attributes.points | [0],baseline: elements[?name == 'Baseline'].attributes.points | [0]},elements: [elements[?name == 'TextEquiv' || name == 'TextLine'].{ elements:[elements[?name == 'Unicode' || name == 'TextEquiv'].[elements[?type == 'text' || name == 'Unicode']] | []], attributes : attributes, geometry: {coords: elements[?name == 'Coords'].attributes.points | [0]}}] | [] | [] | []} | []} } | [0]} | [0]}\"\n  );\n  return result.PcGts.Page;\n}\n","import config from \"../config\";\nimport { parsePageContent } from \"./xml.js\";\nimport pkg from \"../../package.json\";\n\nconst fetch = require(\"node-fetch\");\n\nconst CONTENT = \"https://transkribus.eu/r/zQPlDb1ZvVWJuiBU/api/v0\";\n\nasync function logOut() {\n  const response = await this.$auth.loginWith(\"keycloak\");\n}\n\nexport function getImageSize(imageUrl) {\n  \n}\n\nexport async function fetchSearchResults(\n  { term, documents, titles, page, fuzziness },\n  { offset = 0, limit = 10 }\n) {\n  const res = await window.$nuxt.$axios(\n    \"https://transkribus.eu/r/search/search\",\n    {\n      method: \"POST\",\n      body: JSON.stringify({\n        term,\n        collections: [collection],\n        documents,\n        titles,\n        page,\n        fuzziness,\n        offset,\n        limit,\n      }),\n      headers: {\n        \"Content-Type\": CONTENT_TYPE,\n        Accept: CONTENT_TYPE,\n      },\n    }\n  );\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchSearchFacets({\n  term,\n  documents,\n  titles,\n  fuzziness,\n}) {\n  const res = await window.$nuxt.$axios(\n    \"https://transkribus.eu/r/search/facets\",\n    {\n      method: \"POST\",\n      body: JSON.stringify({\n        term,\n        collections: [collection],\n        documents,\n        titles,\n        fuzziness,\n      }),\n      headers: {\n        \"Content-Type\": CONTENT_TYPE,\n        Accept: CONTENT_TYPE,\n      },\n    }\n  );\n  const data = await res.json();\n  if (res.status === 401) {\n    logOut();\n  }\n  const { total, facets, params } = data;\n  return {\n    total,\n    facets,\n    params,\n  };\n}\n\nexport async function fetchSearchFulltext({ term, start, rows, filter }) {\n  const res = await window.$nuxt.$axios.get(\"/search/fulltext\", {\n    params: {\n      query: term,\n      type: \"LinesLc\",\n      start: start,\n      rows: rows,\n      filter: filter,\n    },\n  });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function uploadImageJSON({ data, colId }) {\n  const res = await window.$nuxt.$axios(\"/uploads\", {\n    method: \"post\",\n    params: {\n      collId: colId,\n    },\n    data: data,\n  });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function uploadImageData({ uploadId, formData }) {\n  const res = await window.$nuxt.$axios(\"/uploads/\" + uploadId, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n    data: formData,\n    // onUploadProgress: e => {\n    //   // updating progress indicator\n    //   // progress(e.lengthComputable, e.loaded, e.total)\n    // }\n  });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) return this.$auth.loginWith(\"keycloak\");\n  else throw new Error(res);\n}\n\nexport async function uploadPDFData({ collId, formData }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/createDocFromPdf\",\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n      data: formData,\n    }\n  );\n  if (res.status === 200) return res.data;\n  else throw new Error(res);\n}\n\nexport async function fetchCollections({ offset, limit }) {\n  const res = await window.$nuxt.$axios.get(\"/collections/list\", {\n    params: {\n      nValues: limit,\n      index: offset,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchCollectionsForUser({ userid }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + userid + \"/listCols\",\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchUsersForCollection({ collId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/userlist\",\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\n// Get tag def from https://transkribus.eu/r/storage/collections/{colId}\n\nexport async function fetchStorageTagDef({ collId }) {\n  const res = await window.$nuxt.$axios\n    .get(\"https://transkribus.eu/r/storage/collections/\" + collId)\n    .catch(function (error) {\n      console.log(error);\n      throw new Error(res);\n    });\n\n  if (res.status === 200) {\n    return res.data;\n  }\n}\n\nexport async function saveStorageTagDef({ data, collId }) {\n  const res = await window.$nuxt.$axios.post(\n    \"https://transkribus.eu/r/storage/collections/\",\n    {\n      data: data,\n      id: collId,\n    },\n    {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  // if (res.status === 401) {\n  //   logOut()\n  // } else throw new Error(res)\n}\n\nexport async function fetchTagDef({ collId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/listTagDefs\",\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function saveTagDef({ def, collId }) {\n  console.log(\"saveTagdef\");\n  console.log(def);\n  const json = JSON.stringify(def);\n  const res = await window.$nuxt.$axios.post(\n    \"/collections/\" + collId + \"/tagDefs\",\n    json,\n    {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function findUser({ mail, firstName, lastName }) {\n  const res = await window.$nuxt.$axios.get(\"/user/findUser\", {\n    params: {\n      user: mail,\n      firstName: firstName,\n      lastName: lastName,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function addModifyUserCollection({ collId, userId, role }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/addOrModifyUserInCollection\",\n    {\n      method: \"POST\",\n      params: {\n        userid: userId,\n        role: role,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function removeUserCollection({ collId, userId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/removeUserFromCollection\",\n    {\n      method: \"POST\",\n      params: {\n        userid: userId,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function deleteDocument({ collId, docId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/\" + docId,\n    {\n      method: \"DELETE\",\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function removeDocumentCollection({ collId, docId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/removeDocFromCollection\",\n    {\n      method: \"POST\",\n      params: {\n        id: docId,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function addDocumentCollection({ collId, docId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/addDocToCollection\",\n    {\n      method: \"POST\",\n      params: {\n        id: docId,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function fetchCollectionsMeta({ collId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/metadata\",\n    {\n      params: {\n        stats: true,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchDocuments({ collId, offset, limit }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/list\",\n    {\n      params: {\n        nValues: limit,\n        index: offset,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchDocumentsMeta({ collId, docId, limit }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/\" + docId + \"/metadata\",\n    {\n      params: {\n        nrOfTranscripts: limit,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchPages({ collId, docId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/\" + docId + \"/fulldoc\",\n    {\n      params: {\n        nrOfTranscripts: 1,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchPagesString({ collId, docId, offset, limit }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/\" + docId + \"/pages\",\n    {\n      params: {\n        pages: offset + \"-\" + limit,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchPageContent({ id }) {\n  const res = await window.$nuxt.$axios.get(\n    config.searchApiBaseUrl + \"/content/\" + id,\n    {\n      method: \"GET\",\n    }\n  );\n  if (res.status === 200) return res.data.PcGts.Page;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchPageContentXML({ id }) {\n  const res = await fetch(`https://files.transkribus.eu/Get?id=${id}`, {\n    method: \"GET\",\n  });\n  const xml = await res.text();\n  //console.log(xml)\n  if (res.status === 200) {\n    return parsePageContent(xml);\n  }\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function setPageContentXML({\n  collId,\n  id,\n  page,\n  xml,\n  status,\n  parentTranscriptId,\n}) {\n  const res = await window.$nuxt.$axios(\n    `/collections/${collId}/${id}/${page}/text`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"text/xml\" },\n      params: {\n        status: status,\n        // parent: parentTranscriptId,\n        toolName: \"TranskribusLite\" + pkg.version,\n      },\n      data: xml,\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function fetchContent(id) {\n  const res = await fetch(`${CONTENT}/content/${id}`);\n  if (res.status === 200) return res.json();\n  return null;\n}\n\nexport async function fetchImageMeta({ key }) {\n  const res = await window.$nuxt.$axios.get(\n    config.urls.image + \"/\" + key + \"/info.json\",\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchFacets({ ...params } = {}) {\n  const res = await client.get(\"/facets\", { params: params });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchCounts({ type, ...params }) {\n  if (![\"scope\", \"year\"].includes(type)) {\n    console.error(`Unexpected type '${type}'`);\n    return null;\n  }\n\n  const res = await client.get(`/counts/${type}`, { params: params });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchItems({ path, offset, limit, ...others }) {\n  const res = await client.get(`/items`, {\n    params: {\n      path,\n      offset,\n      limit,\n      ...others,\n    },\n  });\n  if (res.status !== 200) throw new Error(res.status);\n  if (res.status === 401) {\n    logOut();\n  }\n  return res.data;\n}\n\nexport async function fetchScopeLabels({ scope, offset, limit, ...others }) {\n  const res = await client.get(`/levels`, {\n    params: {\n      scope,\n      offset,\n      limit,\n      ...others,\n    },\n  });\n  if (res.status === 200)\n    return res.data.map(({ value, count }) => ({\n      label: value,\n      count: count,\n    }));\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchDocumentInfo({ id }) {\n  const res = await window.$nuxt.$axios.get(`/documents/${id}`);\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function fetchPageInfo({ collId, docId, pageNr }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/\" + docId + \"/\" + pageNr,\n    {}\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchPagesForDocument({ id, offset, limit }) {\n  const res = await client.get(\n    config.searchApiBaseUrl + `/documents/${id}/pages`,\n    {\n      params: {\n        offset,\n        limit,\n      },\n    }\n  );\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n\nexport async function getPublicModels() {\n  const res = await window.$nuxt.$axios.get(\n    \"https://readcoop.eu/wp-json/wp/v2/model\",\n    {\n      params: {\n        per_page: 100,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n}\n\nexport async function getHTRModels({ collId }) {\n  const res = await window.$nuxt.$axios.get(`/recognition/${collId}/list`);\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function startHTR({ collId, htrModelId, docId, pageString }) {\n  const res = await window.$nuxt.$axios(\n    \"/recognition/\" + collId + \"/\" + htrModelId + \"/htrCITlab\",\n    {\n      method: \"POST\",\n      params: {\n        id: docId,\n        pages: pageString,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function startPylaia({ collId, modelId, docId, pageString }) {\n  const res = await window.$nuxt.$axios(\n    \"/pylaia/\" + collId + \"/\" + modelId + \"/recognition\",\n    {\n      method: \"POST\",\n      params: {\n        id: docId,\n        pages: pageString,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function createCollection({ collName }) {\n  const res = await window.$nuxt.$axios(\"/collections/createCollection\", {\n    method: \"POST\",\n    params: {\n      collName: collName,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchJob({ jobId }) {\n  const res = await window.$nuxt.$axios.get(\"/jobs/\" + jobId, {\n    params: {\n      nrOfTranscripts: 1,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchCreditCost() {\n  const res = await window.$nuxt.$axios.get(\"/credits/costs\");\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function fetchCreditCalculation({ collId, modelId, pages }) {\n  const res = await window.$nuxt.$axios(\n    \"/recognition/\" + collId + \"/\" + modelId + \"/costs\",\n    {\n      method: \"GET\",\n      params: {\n        nrOfPages: pages,\n      },\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  }\n  // if (res.status === 401) {\n  //   logOut()\n  // } else throw new Error(res)\n}\n\nexport async function fetchCredits() {\n  const res = await window.$nuxt.$axios.get(\"/credits\");\n  if (res.status === 200) {\n    return res.data;\n  }\n  // if(res.status === 401) {\n  //   // logOut()\n  //   var noCredits = {overallBalance: 0}\n  //   return noCredits\n  // }\n  else throw new Error(res);\n}\n\nexport async function fetchCreditsCollection({ collId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/collections/\" + collId + \"/credits\"\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else throw new Error(res);\n}\n\nexport async function fetchCreditsAssigned({ packageId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/credits/\" + packageId + \"/collections\"\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else throw new Error(res);\n}\n\nexport async function fetchCreditsTransactions({ packageId }) {\n  const res = await window.$nuxt.$axios.get(\n    \"/credits/\" + packageId + \"/creditTransactions\"\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else throw new Error(res);\n}\n\nexport async function addCreditsCollection({ collId, packageId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/credits/\" + packageId,\n    {\n      method: \"POST\",\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function removeCreditsCollection({ collId, packageId }) {\n  const res = await window.$nuxt.$axios(\n    \"/collections/\" + collId + \"/credits/\" + packageId,\n    {\n      method: \"DELETE\",\n    }\n  );\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function splitCredits({ packageId, balance }) {\n  balance = parseFloat(balance);\n  const res = await window.$nuxt.$axios(\"/credits/\", {\n    method: \"POST\",\n    params: {\n      sourcePackageId: packageId,\n    },\n    data: {\n      balance,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  } else if (res.status === 304) {\n    throw new Error(\"304\");\n  } else throw new Error(res);\n}\n\nexport async function fetchJobs({ offset, limit }) {\n  const res = await window.$nuxt.$axios.get(\"/jobs/list\", {\n    params: {\n      nValues: limit,\n      index: offset,\n      filterByUser: true,\n    },\n  });\n  if (res.status === 200) {\n    return res.data;\n  }\n  if (res.status === 401) {\n    logOut();\n  } else throw new Error(res);\n}\n\nexport async function getXML({ url }) {\n  const res = await window.$nuxt.$axios.get(url, {\n    headers: {\n      Accept: \"application/xml\",\n    },\n  });\n  if (res.status === 200) return res.data;\n  if (res.status === 401) {\n    logOut();\n  }\n  return null;\n}\n","import {\n  fetchDocumentsMeta,\n  fetchPageInfo,\n  fetchSearchResults\n} from '@/utils/api.js'\n\nconst DEFAULT = {\n  // document\n  docId: null,\n  title: null,\n  colTitle: null,\n  maxPage: NaN,\n  documentInfo: null,\n  isDocumentReady: false,\n  isDocumentNotFoundError: false,\n  // page\n  pageId: null,\n  pageNum: NaN,\n  pageInfo: null,\n  pageContentId: null,\n  tsList: null,\n  tsKey: null,\n  // content: null,\n  image: null,\n  isPageReady: false,\n  isPageContentReady: false,\n  isPageNotFoundError: false,\n  isPageContentNotFoundError: false,\n  // search\n  term: '',\n  results: [],\n  // shared\n  requestCount: 0,\n  // view\n  view: 'both',\n  tagMode: 'hidetags',\n  changed: false\n}\n\nexport const state = () => Object.assign({}, DEFAULT)\n\nexport const getters = {\n  isLoading: (state, getters, rootState) =>\n    state.requestCount > 0 && state.content.isLoading === true,\n  hasResults: state => state.results.length > 0\n}\n\nexport const mutations = {\n  update(state, params) {\n    for (const key in params) {\n      if (state[key] !== params[key]) {\n        state[key] = params[key]\n        state.changed = true\n      }\n    }\n  },\n  beginRequest(state) {\n    state.requestCount += 1\n  },\n  endRequest(state) {\n    if (state.requestCount > 0) state.requestCount -= 1\n  }\n}\n\nexport const actions = {\n  update({ commit, state }, params = {}) {\n    const o = {}\n    for (const key in params) if (key in state) o[key] = params[key]\n    commit('update', o)\n  },\n  async fetch({ dispatch, state }, routeParams) {\n    dispatch('beginRequest')\n    // if (state.view !== view) await dispatch('update', { view })\n    if (routeParams.docid !== state.docId) {\n      // await dispatch('update', { documentId, pageNum, results: [] })\n      await dispatch('fetchDocumentInfo', {\n        collId: routeParams.collectionid,\n        docId: routeParams.docid\n      })\n      await dispatch('fetchPageInfo', {\n        collId: routeParams.collectionid,\n        docId: routeParams.docid,\n        pageNr: routeParams.pageid\n      })\n      //     if (term) {\n      // dispatch('update', { term })\n      // await dispatch('fetchSearchResults')\n      //     }\n    }\n    // else if (pageNum !== state.pageNum) {\n    else {\n      await dispatch('update', { pageNum, results: [] })\n      await dispatch('fetchPageInfo', {\n        collId: routeParams.collectionid,\n        docId: routeParams.docid,\n        pageNr: routeParams.pageid\n      })\n      if (term) {\n        dispatch('update', { term })\n        await dispatch('fetchSearchResults')\n      }\n    }\n    // else  if (term && state.term !== term) {\n    //   dispatch('update', { term })\n    //   await dispatch('fetchSearchResults')\n    // }\n    dispatch('endRequest')\n  },\n  beginRequest({ commit }) {\n    commit('beginRequest')\n  },\n  endRequest({ commit }) {\n    commit('endRequest')\n  },\n  async fetchDocumentInfo({ state, dispatch }, { collId, docId }) {\n    dispatch('beginRequest')\n    const data = await fetchDocumentsMeta({ collId: collId, docId: docId })\n\n    if (data === null) {\n      dispatch('update', {\n        isDocumentNotFoundError: true\n      })\n    } else {\n      const colTitle = data.collectionList.colList.find(\n        element => element.colId == collId\n      )\n      dispatch('update', {\n        docId: data.docId,\n        maxPage: data.nrOfPages,\n        isDocumentReady: true,\n        title: data.title,\n        colTitle: colTitle\n      })\n    }\n    dispatch('endRequest')\n  },\n  async fetchPageInfo({ state, dispatch }, { collId, docId, pageNr }) {\n    dispatch('beginRequest')\n    const data = await fetchPageInfo({\n      collId: collId,\n      docId: docId,\n      pageNr: pageNr\n    })\n    if (data === null)\n      dispatch('update', {\n        image: null,\n        isPageReady: false,\n        isPageNotFoundError: true\n      })\n    else {\n      let image = { id: data.key, width: data.width, height: data.height }\n      dispatch('update', {\n        ...data.id,\n        image: image,\n        pageNum: data.pageNr,\n        isPageReady: true,\n        tsList: data.tsList,\n        tsKey: data.tsList.transcripts[0].key\n      })\n      // dispatch('content/update', { id: data.content.id })\n      dispatch('fetchPageContent', { id: data.tsList.transcripts[0].key })\n    }\n    dispatch('endRequest')\n  },\n  async fetchPageContent({ state, dispatch }, { id }) {\n    dispatch('update', {\n      tsKey: id\n    })\n    await dispatch('content/fetch', { id })\n  },\n  async fetchSearchResults({ state, dispatch }) {\n    dispatch('beginRequest')\n    const data = await fetchSearchResults(\n      {\n        term: state.term,\n        page: state.pageId\n      },\n      { offset: 0, limit: 100 }\n    )\n\n    if (data === null) {\n      dispatch('update', { results: [] })\n    } else {\n      dispatch('update', {\n        results:\n          data.results.length === 0\n            ? Object.freeze([])\n            : Object.freeze(data.results[0].results)\n      })\n    }\n    dispatch('endRequest')\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};","import deepEqual from 'fast-deep-equal'\nconst tags = require('../../assets/tag-config.json');\n\nexport const state = () => ({\n  docId: null,\n  title: null,\n  colTitle: null,\n  colRole: null,\n  collections: [],\n  tagDefs: tags,\n  documents: [],\n})\n\n\nexport const mutations = {\n  update(state, params) {\n    for (const key in params)\n      if (!deepEqual(state[key], params[key])) state[key] = params[key]\n  }\n}\n\nexport const actions = {\n  update({ commit }, params) {\n    commit('update', params)\n  },\n  setCollections({ dispatch, state }, { collections }) {\n    dispatch('update', { collections: collections })\n  },\n  setTagDefs({ dispatch, state }, { tagDefs }) {\n    dispatch('update', { tagDefs: tagDefs })\n  },\n  setDocuments({ dispatch, state }, { documents }) {\n    dispatch('update', { documents: documents })\n  },\n  setColTitle({ dispatch, state }, { colTitle }) {\n    dispatch('update', { colTitle: colTitle })\n  },\n  setColRole({ dispatch, state }, { colRole }) {\n    dispatch('update', { colRole: colRole })\n  }\n}\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n};","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport detail from \"./detail\";\nimport browse from \"./browse\";\nimport content from \"./content\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  modules: {\n    browse,\n    detail,\n    content,\n  },\n  strict: process.env.NODE_ENV !== \"production\",\n  // plugins: debug ? [createLogger()] : []\n});\n","import { Node, mergeAttributes } from \"@tiptap/core\";\nimport { VueNodeViewRenderer } from \"@tiptap/vue-2\";\nimport Component from \"./LineNode.vue\";\nimport { TextSelection } from \"prosemirror-state\";\nimport { Plugin, PluginKey } from \"prosemirror-state\";\nimport store from \"@/store\";\n\nexport default Node.create({\n  name: \"line\",\n\n  group: \"block+\",\n\n  // content: '(inline* | tag*)',\n  content: \"inline* \",\n  addAttributes() {\n    return {\n      line: {\n        default: [],\n      },\n    };\n  },\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        props: {\n          handleKeyDown: (view, event) => {\n            if (event.which === 8 || event.which === 46) {\n              view.state.deleting = true;\n            }\n\n            return false;\n          },\n        },\n\n        filterTransaction: (transaction, state) => {\n          var isDeleting = state.deleting;\n\n          if (!state.deleting) {\n            return true;\n          }\n\n          var result = true;\n\n          transaction.mapping.maps.forEach((map) => {\n            map.forEach((oldStart, oldEnd, newStart, newEnd) => {\n              state.doc.nodesBetween(\n                oldStart,\n                oldEnd,\n                (node, number, pos, parent, index) => {\n                  if (node.type.name === \"line\") {\n                    result = false;\n                  }\n                }\n              );\n            });\n          });\n\n          return result;\n        },\n      }),\n    ];\n  },\n  addKeyboardShortcuts() {\n    return {\n      Enter: (state, dispatch, view) => {\n        this.editor.commands.selectParentNode();\n        var selection = this.editor.view.state.selection;\n        var node = this.editor.view.state.doc.nodeAt(selection.$head.pos);\n        this.editor.chain().selectNodeForward();\n        if (node) {\n          if (node.attrs.line) {\n            this.editor.commands.setTextSelection(\n              this.editor.state.selection.$head.pos + node.content.size + 1\n            );\n            var lineId = node.attrs.line.attributes.id;\n            const el = document.getElementById(lineId);\n            el.scrollIntoView({ behavior: \"smooth\" });\n            store.dispatch(\"content/select\", {\n              target: lineId,\n              origin: \"content\",\n            });\n          }\n        }\n\n        return true;\n      },\n      ArrowDown: (state, dispatch, view) => {\n        this.editor.commands.selectParentNode();\n        var selection = this.editor.view.state.selection;\n        var node = this.editor.view.state.doc.nodeAt(selection.$head.pos);\n        this.editor.chain().selectNodeForward();\n        if (node) {\n          if (node.attrs.line) {\n            this.editor.commands.setTextSelection(\n              this.editor.state.selection.$head.pos + node.content.size + 1\n            );\n            var lineId = node.attrs.line.attributes.id;\n            const el = document.getElementById(lineId);\n            el.scrollIntoView({ behavior: \"smooth\" });\n            store.dispatch(\"content/select\", {\n              target: lineId,\n              origin: \"content\",\n            });\n          }\n        }\n\n        return true;\n      },\n      ArrowUp: (state, dispatch, view) => {\n        this.editor.commands.selectParentNode();\n        var selection = this.editor.view.state.selection;\n        var node = this.editor.view.state.doc.nodeAt(selection.$head.pos);\n        if (node && node.attrs.line) {\n          store.dispatch(\"content/select\", {\n            target: node.attrs.line.attributes.id,\n            origin: \"content\",\n          });\n        }\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: \"div\",\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\"div\", mergeAttributes(HTMLAttributes)];\n  },\n\n  addNodeView() {\n    return VueNodeViewRenderer(Component);\n  },\n});\n","import Highlight from \"@tiptap/extension-highlight\";\n\nimport { Node, mergeAttributes } from \"@tiptap/core\";\n\nexport async function tagExtensions(tagDefs) {\n  var tagExtensionArr = [];\n  for (var tagIndex in tagDefs) {\n    var tag = tagDefs[tagIndex];\n    var tempExtension = Highlight.extend({\n      name: tag.name,\n      addKeyboardShortcuts() {\n        return {\n          \"Mod-l\": () => this.editor.commands.toggleBulletList(),\n        };\n      },\n      addCommands() {\n        return {\n          setTag:\n            () =>\n            ({ commands }) => {\n              return commands.setMark(tag.name);\n            },\n          toggleTag:\n            (attributes) =>\n            ({ commands, tr, state, dispatch }) => {\n              return commands.toggleMark(attributes.name, attributes);\n            },\n          unsetTag:\n            () =>\n            ({ commands }) => {\n              return commands.unsetMark(tag.name);\n            },\n        };\n      },\n      addAttributes() {\n        // Return an object with attribute configuration\n        return {\n          tag: {\n            default: {},\n          },\n          annotationId: {\n            default: null,\n          },\n          color: {\n            default: tag.color,\n            parseHTML: (element) => {\n              return [\n                {\n                  color:\n                    element.getAttribute(\"data-color\") ||\n                    element.style.backgroundColor,\n                },\n                {\n                  tag: tag.name,\n                },\n              ];\n            },\n            renderHTML: (attributes) => {\n              if (!attributes.color) {\n                return {};\n              }\n\n              return {\n                \"data-color\": attributes.color,\n                style: `outline-color: ${attributes.color} !important; outline: 2px solid;`,\n                class: \"tag\",\n              };\n            },\n          },\n        };\n      },\n      // parseHTML() {\n      //   return [{ tag: 'a[href]' }]\n      // },\n\n      renderHTML({ HTMLAttributes }) {\n        return [\n          \"a\",\n          mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\n          0,\n        ];\n      },\n    });\n    tagExtensionArr.push(tempExtension);\n  }\n\n  return tagExtensionArr;\n}\n","import {\n  Command,\n  Mark,\n  markInputRule,\n  markPasteRule,\n  mergeAttributes,\n} from \"@tiptap/core\";\n\nexport const Subscript = Mark.create({\n  name: \"subscript\",\n\n  defaultOptions: {\n    HTMLAttributes: {},\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: \"subscript\",\n      },\n      {\n        tag: \"del\",\n      },\n      {\n        tag: \"subscript\",\n      },\n      {\n        style: \"text-decoration\",\n        consuming: false,\n        getAttrs: (style) => (style.includes(\"line-through\") ? {} : false),\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\n      \"sub\",\n      mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\n      0,\n    ];\n  },\n\n  addCommands() {\n    return {\n      setSub:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(\"subscript\");\n        },\n      toggleSub:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(\"subscript\");\n        },\n      unsetSub:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(\"subscript\");\n        },\n    };\n  },\n});\n","import {\n  Command,\n  Mark,\n  markInputRule,\n  markPasteRule,\n  mergeAttributes,\n} from \"@tiptap/core\";\n\nexport const Superscript = Mark.create({\n  name: \"superscript\",\n\n  defaultOptions: {\n    HTMLAttributes: {},\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: \"superscript\",\n      },\n      {\n        tag: \"del\",\n      },\n      {\n        tag: \"superscript\",\n      },\n      {\n        style: \"text-decoration\",\n        consuming: false,\n        getAttrs: (style) => (style.includes(\"line-through\") ? {} : false),\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\n      \"sup\",\n      mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\n      0,\n    ];\n  },\n\n  addCommands() {\n    return {\n      setSuper:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(\"superscript\");\n        },\n      toggleSuper:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(\"superscript\");\n        },\n      unsetSuper:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(\"superscript\");\n        },\n    };\n  },\n});\n","<template>\n  <div\n    class=\"editor\"\n    v-if=\"editor\"\n    \n  >\n    <b-loading v-model=\"isLoading\" :active=\"isLoading\" :is-full-page=\"false\" />\n    <div class=\"editor__header\" v-if=\"editor\">\n      <b-navbar style=\"width: 100%; overflow: auto\">\n        <template #start>\n          <b-navbar-item>\n            <b-switch v-model=\"isAnnotation\"> Annotation </b-switch>\n          </b-navbar-item>\n        </template>\n\n        <template #end>\n          <b-navbar-item>\n            <b-button\n              title=\"Increase font size\"\n              icon-left=\"plus\"\n              @click=\"setFontSize(0.1)\"\n            >\n            </b-button>\n            <b-button\n              title=\"Decrease font size\"\n              icon-left=\"minus\"\n              @click=\"setFontSize(-0.1)\"\n            >\n            </b-button>\n          </b-navbar-item>\n          <b-navbar-item>\n            <b-button\n              title=\"Switch view\"\n              :icon-left=\"layoutIcon()\"\n              @click=\"setEditLayout\"\n            >\n            </b-button>\n\n            <b-button\n              title=\"Undo\"\n              icon-left=\"undo\"\n              @click=\"editor.chain().focus().undo().run()\"\n            >\n            </b-button>\n            <b-button\n              title=\"Redo\"\n              icon-left=\"redo\"\n              @click=\"editor.chain().focus().redo().run()\"\n            >\n            </b-button>\n          </b-navbar-item>\n          <b-navbar-item>\n            <b-field>\n              <b-button @click=\"saveContent\" icon-left=\"save\" type=\"is-success\">\n                Save\n              </b-button>\n            </b-field>\n          </b-navbar-item>\n          <!-- <b-navbar-item>\n            <b-button\n              title=\"Advanced\"\n              type=\"is-light\"\n              icon-left=\"toolbox\"\n              @click=\"openAdvancedModal\"\n            />\n          </b-navbar-item> -->\n        </template>\n      </b-navbar>\n    </div>\n    <div class=\"tile editor__content\">\n      <div v-if=\"isAnnotation\" class=\"tile is-parent is-vertical is-3\">\n        <div v-if=\"selectedTag\" class=\"tile is-child box\">\n          <div>\n            <div\n              class=\"tile is-vertical\"\n              style=\"width: 100%\"\n              v-for=\"(tempTag, index) in selectedTag.marks\"\n              :key=\"index\"\n            >\n              <div class=\"tile is-child\" v-if=\"tempTag.attrs.tag\">\n                <b-tag\n                  :style=\"`outline-color: ${tempTag.attrs.color} !important; outline: 2px solid; color : ${tempTag.attrs.color} !important;margin-top: auto;margin-bottom: auto;`\"\n                  icon-left=\"tag\"\n                >\n                  {{ tempTag.attrs.tag.name }}\n                </b-tag>\n              </div>\n              <div\n                class=\"tile is-child\"\n                v-for=\"(attribute, i) in findTagAttributes(tempTag)\"\n                :key=\"i\"\n              >\n                <b-field\n                  v-if=\"tempTag.attrs.tag\"\n                  :label=\"attribute\"\n                  label-position=\"on-border\"\n                >\n                  <b-input\n                    @input=\"\n                      changeContinued(\n                        tempTag,\n                        tempTag.attrs.tag.attributes[attribute],\n                        attribute\n                      )\n                    \"\n                    v-model=\"tempTag.attrs.tag.attributes[attribute]\"\n                  ></b-input>\n                </b-field>\n              </div>\n              <div class=\"tile is-child\" v-if=\"tempTag.attrs.tag\">\n                <b-button\n                  type=\"is-danger\"\n                  icon-left=\"trash\"\n                  @click=\"setAttributes(tempTag)\"\n                >\n                  Delete\n                </b-button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"tile is-child box\">\n          <div\n            class=\"transkribusEditor-bubble-menu\"\n            style=\"text-align: center\"\n            v-if=\"editor && isAnnotation && tagDefs\"\n          >\n            <b-button\n              title=\"Bold\"\n              type=\"is-primary\"\n              icon-left=\"bold\"\n              @click=\"editor.chain().focus().toggleBold().run()\"\n              :class=\"{ 'is-active': editor.isActive('bold') }\"\n            >\n            </b-button>\n            <b-button\n              title=\"Strike\"\n              type=\"is-primary\"\n              icon-left=\"strikethrough\"\n              @click=\"editor.chain().focus().toggleStrike().run()\"\n              :class=\"{ 'is-active': editor.isActive('strike') }\"\n            >\n            </b-button>\n            <b-button\n              title=\"Underline\"\n              type=\"is-primary\"\n              icon-left=\"underline\"\n              @click=\"editor.chain().focus().toggleUnderline().run()\"\n              :class=\"{ 'is-active': editor.isActive('underline') }\"\n            >\n            </b-button>\n            <b-button\n              title=\"Subscript\"\n              type=\"is-primary\"\n              icon-left=\"subscript\"\n              @click=\"editor.chain().focus().toggleSub().run()\"\n              :class=\"{ 'is-active': editor.isActive('subscript') }\"\n            >\n            </b-button>\n            <b-button\n              title=\"Superscript\"\n              type=\"is-primary\"\n              icon-left=\"superscript\"\n              @click=\"editor.chain().focus().toggleSuper().run()\"\n              :class=\"{ 'is-active': editor.isActive('superscript') }\"\n            >\n            </b-button>\n            <br />\n            <b-button\n              v-for=\"(tag, index) in tagDefs.definitions.annotations\"\n              :key=\"index\"\n              icon-left=\"tag\"\n              :style=\"'background-color:' + tag.color\"\n              @click=\"setAttributes(tag)\"\n              :class=\"{\n                'is-active': editor.isActive(tag.name, {\n                  color: tag.color,\n                }),\n              }\"\n            >\n              {{ tag.label }}\n            </b-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"tile is-parent box\">\n        <editor-content\n          class=\"editor__content\"\n          v-bind:style=\"{ fontSize: fontSize + 'rem' }\"\n          :editor=\"editor\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//  http://localhost:5000/collection/62267/doc/425931/detail/1?view=edit\n// http://localhost:5000/collection/100402/doc/512221/detail/2\n//  http://localhost:5000/collection/100402/doc/642576/detail/3\n\n//TODO adding continued tag and set attributes to continued tags\nimport {\n  generateHTML,\n  Editor,\n  EditorContent,\n  NodeViewWrapper,\n  NodeViewContent,\n  BubbleMenu,\n} from \"@tiptap/vue-2\";\nimport { defaultExtensions } from \"@tiptap/starter-kit\";\nimport TextAlign from \"@tiptap/extension-text-align\";\nimport StarterKit from '@tiptap/starter-kit'\nimport Focus from \"@tiptap/extension-focus\";\nimport Text from \"@tiptap/extension-text\";\nimport Region from \"../Editor/RegionExtension.js\";\nimport Line from \"../Editor/LineExtension.js\";\nimport Table from \"@tiptap/extension-table\";\nimport TableRow from \"@tiptap/extension-table-row\";\nimport TableCell from \"@tiptap/extension-table-cell\";\nimport TableHeader from \"@tiptap/extension-table-header\";\nimport Underline from \"@tiptap/extension-underline\";\nimport { tagExtensions } from \"../Editor/TagExtension.js\";\n\nimport { Subscript } from \"../Editor/SubscriptExtension.js\";\nimport { Superscript } from \"../Editor/SuperscriptExtension.js\";\n\nimport { NodeSelection } from \"prosemirror-state\";\nimport { Plugin, PluginKey } from \"prosemirror-state\";\n\nimport { mapState } from \"vuex\";\n\nimport { fetchTagDef, setPageContentXML } from \"../../utils/api.js\";\n\nimport { parseToXML, parseEditorOutput } from \"../../utils/xml.js\";\n\nvar groupBy = require(\"json-groupby\");\n\nexport default {\n  filters: {\n    text(item) {\n      return item.elements && item.elements[0] ? item.elements[0].text : \"\";\n    },\n    clean(s) {\n      if (typeof s !== \"string\") return \"\";\n      return s.trim().replace(/¬$/, \"\\u2010\");\n    },\n  },\n  watch: {\n    selected: {\n      handler: function (newValue, oldValue) {\n        if (newValue === null || newValue === oldValue) return;\n        if (newValue.origin === \"image\") {\n          var lineId = newValue.target;\n          var content = this.editor.state.doc.content.content;\n          this.editor.chain().focus();\n          var nodes = this.editor.view.docView.node;\n\n          nodes.descendants((node, pos) => {\n            if (node.attrs.line) {\n              if (node.attrs.line.attributes.id === lineId) {\n                var tr = this.editor.state.tr;\n                const transaction = tr.setSelection(\n                  NodeSelection.create(tr.doc, pos)\n                );\n                this.editor.view.dispatch(transaction);\n                const el = document.getElementById(lineId);\n                el.scrollIntoView({ behavior: \"smooth\" });\n              }\n            }\n          });\n        }\n      },\n      deep: true,\n    },\n    tagDefs: {\n      handler: function (newValue, oldValue) {\n        console.log(\"tagdef changed\");\n        this.setup()\n      },\n      deep: true,\n    },\n     contentData: {\n      handler: function (newValue, oldValue) {\n        console.log(\"content data changed \", oldValue, newValue);\n        this.setEditorContentJSON()\n      },\n      deep: true,\n    },\n  },\n  components: {\n    TextAlign,\n    EditorContent,\n    BubbleMenu,\n  },\n  props: {\n    // xmlJson: {\n    //   type: Object,\n    //   required: true,\n    // },\n  },\n  data() {\n    return {\n      editorContentJson: {},\n      editor: null,\n      isAnnotation: false,\n      selectedTag: null,\n      status: \"IN_PROGRESS\",\n      isLoading: false,\n      annotationCounter: 0,\n      lastTag: {},\n      fontSize: 1,\n    };\n  },\n  computed: {\n    ...mapState(\"content\", [\n      \"data\",\n      \"selected\",\n      \"highlighted\",\n      \"isReady\",\n      \"xmlModel\",\n      \"wasSaved\",\n      \"wasEdited\",\n      \"editLayoutHorizontal\",\n      \"xmlJson\"\n    ]),\n    ...mapState(\"detail\", [\"tagMode\", \"tsKey\"]),\n    ...mapState(\"browse\", [\"tagDefs\"]),\n    hasContent() {\n      return this.content.elements.length !== 0;\n    },\n    contentData() {\n      if (!this.xmlJson || !this.xmlJson.elements) return { elements: [] };\n      else {\n        for (var element in this.xmlJson.elements) {\n          var temp = this.xmlJson.elements[element];\n          for (var line in temp.elements) {\n            var linetemp = temp.elements[line];\n\n            if (linetemp.type == \"TextLine\") {\n              linetemp.hasTag = this.hasTag(linetemp.attributes.custom);\n              linetemp.tags = this.getTags(linetemp.attributes.custom);\n            } else if (linetemp.type == \"TableCell\" && linetemp.elements[0]) {\n              linetemp.hasTag = this.hasTag(\n                linetemp.elements[0].attributes.custom\n              );\n              linetemp.tags = this.getTags(\n                linetemp.elements[0].attributes.custom\n              );\n            }\n          }\n        }\n\n        return this.xmlJson;\n      }\n    },\n  },\n  async mounted() {\n    this.setup();\n  },\n  methods: {\n    async setup() {\n      console.log(this.tagDefs);\n      var tagArray = await tagExtensions(this.tagDefs.definitions.annotations);\n      console.log(tagArray);\n      var that = this;\n      this.editor = new Editor({\n        content: \"\",\n        extensions: [\n          Text,\n          Region,\n          Line,\n          StarterKit,\n          ...tagArray,\n          Focus.configure({\n            className: \"is-selected\",\n            nested: true,\n          }),\n          Underline,\n          Table,\n          TableRow,\n          TableHeader,\n          TableCell,\n          Subscript,\n          Superscript,\n        ],\n        onSelectionUpdate({ editor }) {\n          var selectedLine = editor.getAttributes(\"line\");\n          var head = editor.view.state.selection.$head.pos;\n          var anchor = editor.view.state.selection.$anchor.pos;\n          var node = editor.view.state.doc.nodeAt(head);\n          if (node && anchor == head) {\n            var marks = node.marks;\n            if (marks.length > 0) {\n              that.selectedTag = node;\n            } else {\n              that.selectedTag = null;\n            }\n          } else {\n            that.selectedTag = null;\n          }\n        },\n        onUpdate({ editor }) {\n          that.$store.dispatch(\"content/update\", { wasEdited: true });\n        },\n      });\n      this.setEditorContentJSON();\n    },\n    select(id) {\n      console.log('change select in text editor ', id)\n      this.$store.dispatch(\"content/select\", {\n        target: id,\n        origin: \"content\",\n      });\n    },\n    setEditLayout() {\n      this.$store.dispatch(\"content/update\", {\n        editLayoutHorizontal: !this.editLayoutHorizontal,\n      });\n    },\n    layoutIcon() {\n      if (this.editLayoutHorizontal) {\n        return \"columns\";\n      }\n      return \"bars\";\n    },\n    changeContinued(tag, value, attribute) {\n      if (tag.attrs.tag.attributes.continued) {\n        var continuedTags = this.findMarkByUid(0, 1000, tag.attrs.annotationId);\n        for (var index in continuedTags) {\n          var tempTag = continuedTags[index];\n          tempTag.attrs.tag.attributes[attribute] = value;\n        }\n      }\n    },\n    setFontSize(value) {\n      this.fontSize += value;\n    },\n    findMarkByUid(from, to, uid) {\n      const { doc } = this.editor.state;\n      let found = [];\n      doc.nodesBetween(from, to, (node) => {\n        found.push(\n          node.marks.find((mark) => mark.attrs[\"annotationId\"] === uid)\n        );\n      });\n      return found.filter(Boolean);\n    },\n    findTagAttributes(tag) {\n      var found = {};\n      found = this.tagDefs.definitions.annotations.find(\n        (element) => element.name === tag.type.name\n      );\n      if (found) {\n        return found.attributes;\n      } else {\n        return found;\n      }\n    },\n\n    async saveContent() {\n      console.log(this.editor, this.editor.getJSON())\n      const json = this.editor.getJSON();\n      var js = JSON.parse(JSON.stringify(json));\n\n      var modelCopy = JSON.parse(JSON.stringify(this.xmlModel));\n\n      var parsedResult = parseEditorOutput(js, modelCopy);\n      console.log(parsedResult);\n      var xmlResult = parseToXML(parsedResult);\n      console.log(xmlResult);\n      var output = { xml: xmlResult, xmlJson: parsedResult };\n      this.$root.$emit(\"save\", output);\n    },\n    setAttributes(tag) {\n      var attributes = {};\n      var contentObj = this.editor.state.selection.content();\n\n      if (\n        contentObj.content.content[0] &&\n        contentObj.content.content[0].content.content.length > 1\n      ) {\n        attributes = { continued: true };\n      }\n      var tagObj;\n      var tagName;\n      var tagColor;\n      if (tag.name) {\n        tagObj = { name: tag.name, attributes: attributes };\n        tagName = tag.name;\n        tagColor = tag.color;\n      } else {\n        tagName = tag.attrs.tag.name;\n        tagColor = tag.attrs.color;\n        tagObj = { name: tagName, attributes: attributes };\n      }\n      this.editor\n        .chain()\n        .focus()\n        .toggleTag({ color: tagColor, tag: tagObj, name: tagName })\n        .run();\n\n      var selectedLine = this.editor.getAttributes(\"line\");\n      var anchor = this.editor.state.selection.$anchor.pos;\n      var node = this.editor.state.doc.nodeAt(anchor);\n      if (node && node.marks) {\n        var marks = node.marks;\n        if (marks.length > 0) {\n          this.selectedTag = node;\n        } else {\n          this.selectedTag = null;\n        }\n      } else {\n        this.selectedTag = null;\n      }\n    },\n    openToast(message, type) {\n      this.$buefy.toast.open({\n        duration: 4000,\n        message: message,\n        position: \"is-top\",\n        type: type,\n      });\n    },\n    async loadTagDefs() {\n      let data;\n      try {\n        data = await fetchTagDef({\n          collId: this.$route.params.collectionid,\n        });\n      } catch (err) {\n        console.log(err);\n      }\n      this.$store.dispatch(\"browse/setTagDefs\", { tagDefs: data });\n    },\n    groupByRow(table) {\n      var result = groupBy(table, [\"attributes.row\"]);\n      return result;\n    },\n    getTagDef(tag) {\n      if (tag) {\n        var found = this.tagDefs.definitions.annotations.find(\n          (x) => x.name === tag.name\n        );\n      }\n\n      return found;\n    },\n    beforeDestroy() {\n      if (this.editor) {\n        this.editor.destroy();\n      }\n    },\n    setEditorContentJSON() {\n      let editorContent = {\n        type: \"doc\",\n        content: [],\n      };\n      console.log('contentData')\n      console.log(this.contentData)\n      if (!this.contentData || !this.contentData.elements)\n        return { elements: [] };\n      else {\n        for (var element in this.contentData.elements) {\n          var temp = this.contentData.elements[element];\n          var content = [];\n          if (temp.type == \"TextRegion\") {\n            for (var line in temp.elements) {\n              var linetemp = temp.elements[line];\n              if (linetemp.type == \"TextLine\") {\n                if (linetemp.elements[0]) {\n                  var id = linetemp.attributes.id;\n                  var text = \" \";\n                  if (\n                    linetemp.elements[0].elements[0][0] &&\n                    linetemp.elements[0].elements[0][0][0]\n                  ) {\n                    text = linetemp.elements[0].elements[0][0][0].text;\n                  }\n                  if (linetemp.hasTag) {\n                    var tagContent = this.setTagContent(linetemp, text, false);\n                    content.push({\n                      type: \"line\",\n                      attrs: {\n                        line: linetemp,\n                      },\n                      content: tagContent,\n                    });\n                  } else {\n                    content.push({\n                      type: \"line\",\n                      attrs: {\n                        line: linetemp,\n                      },\n                      content: [\n                        {\n                          type: \"text\",\n                          text: text,\n                        },\n                      ],\n                    });\n                  }\n                }\n              }\n            }\n            editorContent.content.push({\n              type: \"region\",\n              attrs: {\n                lines: temp,\n              },\n              content: content,\n            });\n          } else if (temp.type == \"TableRegion\") {\n            var groupedRows = this.groupByRow(temp.elements);\n            var rowContent = [];\n            for (var row in groupedRows) {\n              var cellContent = [];\n              var rowtemp = groupedRows[row];\n              for (var cell in rowtemp) {\n                var celltemp = rowtemp[cell];\n                var text = \" \";\n                var lineObjects = [];\n                for (line in celltemp.elements) {\n                  var linetemp = celltemp.elements[line];\n                  if (linetemp && linetemp.elements[0][0][0].elements[0]) {\n                    text = linetemp.elements[0][0][0].elements[0].text;\n                  }\n                  var lineContent = [];\n                  if (celltemp.hasTag) {\n                    lineContent = this.setTagContent(celltemp, text, true);\n                  } else {\n                    lineContent.push({\n                      type: \"text\",\n                      text: text,\n                    });\n                  }\n                  var lineObj = {\n                    type: \"line\",\n                    attrs: {\n                      line: linetemp,\n                    },\n                    content: lineContent,\n                  };\n                  lineObjects.push(lineObj);\n                }\n                cellContent.push({\n                  type: \"tableCell\",\n                  content: lineObjects,\n                });\n              }\n              rowContent.push({\n                type: \"tableRow\",\n                content: cellContent,\n              });\n            }\n            var regionObj = {\n              type: \"region\",\n              content: rowContent,\n            };\n\n            editorContent.content.push({\n              type: \"table\",\n              content: [regionObj],\n            });\n          }\n        }\n        this.editorContentJson = editorContent;\n        this.editor.commands.setContent(editorContent);\n      }\n    },\n    getTags(attributes) {\n      var tags = [];\n      for (var i = 0; i < attributes.length; i++) {\n        if (\n          \"offset\" in attributes[i].attributes &&\n          \"length\" in attributes[i].attributes\n        ) {\n          tags.push(attributes[i]);\n        }\n      }\n      return tags;\n    },\n    hasTag(attributes) {\n      for (var i = 0; i < attributes.length; i++) {\n        if (\n          \"offset\" in attributes[i].attributes &&\n          \"length\" in attributes[i].attributes\n        ) {\n          return true;\n        }\n      }\n      return false;\n    },\n    setTagContent(linetemp, text, table) {\n      var tagContent = [];\n      var arrText = this.stringOffset(text, linetemp.tags);\n      for (var split in arrText) {\n        var marks = [];\n        var text = \" \";\n        if (!arrText[split] == \"\") {\n          text = arrText[split];\n        }\n        var offset = 0;\n        for (var i = 0; i < split; i++) {\n          offset += arrText[i].length;\n        }\n        var tags = this.findTags(linetemp, text, table, offset);\n        if (tags.length > 0) {\n          for (var tagTemp in tags) {\n            var tag = tags[tagTemp];\n            if (tag.name == \"textStyle\") {\n              var textStyles = this.setTextStyles(tag);\n              for (var index in textStyles) {\n                var textStyle = textStyles[index];\n                marks.push(textStyle);\n              }\n            }\n            var tagDef = this.getTagDef(tag);\n            var color = \"#ffff\";\n            var name = \"mark\";\n            if (tagDef) {\n              color = tagDef.color;\n              name = tagDef.name;\n              if (\n                !tag.attributes.continued ||\n                this.lastTag.name !== name ||\n                this.lastTag.continued !== tag.attributes.continued\n              ) {\n                this.annotationCounter++;\n              }\n              var tagMark = {\n                type: name,\n                attrs: {\n                  color: color,\n                  tag: tag,\n                  annotationId: this.annotationCounter,\n                },\n              };\n              this.lastTag = {\n                name: tag.name,\n                lineId: linetemp.attributes.id,\n                tag: tag,\n                continued: tag.attributes.continued,\n              };\n              marks.push(tagMark);\n            }\n          }\n          var obj = {\n            type: \"text\",\n            marks: marks,\n            text: text,\n          };\n          tagContent.push(obj);\n        } else {\n          var obj = {\n            type: \"text\",\n            marks: marks,\n            text: text,\n          };\n          tagContent.push(obj);\n        }\n      }\n      return tagContent;\n    },\n    setTextStyles(tag) {\n      var name = [];\n      if (tag.attributes.strikethrough) {\n        name.push(\"strike\");\n      }\n      if (tag.attributes.subscript) {\n        name.push(\"subscript\");\n      }\n      if (tag.attributes.superscript) {\n        name.push(\"superscript\");\n      }\n      if (tag.attributes.underlined) {\n        name.push(\"underline\");\n      }\n      if (tag.attributes.bold) {\n        name.push(\"bold\");\n      }\n      var textStyleArr = [];\n      for (var i = 0; i < name.length; i++) {\n        textStyleArr.push({\n          type: name[i],\n        });\n      }\n      return textStyleArr;\n    },\n    stringOffset(str, tags) {\n      if (!tags.length) return [];\n\n      const results = [],\n        indexes = [];\n\n      tags.forEach((options) => {\n        indexes.push(\n          options.attributes.offset,\n          options.attributes.offset + options.attributes.length\n        );\n      });\n\n      indexes.sort((i1, i2) => i1 - i2);\n\n      if (indexes.indexOf(0) < 0) indexes.unshift(0);\n\n      if (indexes[indexes.length - 1] < str.length) indexes.push(str.length);\n\n      for (let i = 0, len = indexes.length; i < len - 1; i++) {\n        results.push(str.substring(indexes[i], indexes[i + 1]));\n      }\n\n      return results;\n    },\n    findTags(element, text, table, offset) {\n      var lineText;\n      if (table) {\n        lineText = element.elements[0].elements[0][0][0].elements[0].text;\n      } else {\n        lineText = element.elements[0].elements[0][0][0].text;\n      }\n      if (text == \" \") {\n        return [];\n      }\n      var index = lineText.indexOf(text);\n      return element.tags.filter((x) => {\n        var tagtext = lineText.substr(x.attributes.offset, x.attributes.length);\n        if (\n          tagtext.includes(text) &&\n          offset >= x.attributes.offset &&\n          offset <= x.attributes.offset + x.attributes.length\n        ) {\n          return x;\n        }\n      });\n    },\n    textStyleClass(label) {\n      var classString = \"\";\n      if (label.includes(\"superscript = true\")) {\n        classString += \"is-superscript\";\n      }\n      if (label.includes(\"subscript = true\")) {\n        classString += \"is-subscript\";\n      }\n      if (label.includes(\"italic = true\")) {\n        classString += \"is-italic\";\n      }\n      if (label.includes(\"underlined = true\")) {\n        classString += \"is-underlined\";\n      }\n      if (label.includes(\"strikethrough = true\")) {\n        classString += \"is-strikethrough\";\n      }\n      if (label.includes(\"bold = true\")) {\n        classString += \"is-bold\";\n      }\n\n      return classString;\n    },\n    highlight(id) {\n      this.$store.dispatch(\"content/highlight\", {\n        target: id,\n        origin: \"content\",\n      });\n    },\n    scrollIntoView(id) {\n      if (!this.$refs[id]) return;\n      const [element] = this.$refs[id];\n      if (element)\n        element.scrollIntoView({\n          block: \"center\",\n          inline: \"center\",\n          behavior: \"smooth\",\n        });\n    },\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentTextEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentTextEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailContentTextEdit.vue?vue&type=template&id=50ec4b64&\"\nimport script from \"./DetailContentTextEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailContentTextEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <Layout>\n    <template #header> </template>\n    <template>\n      <ContentTextEdit :xmlJson=\"xmlJson\"/>\n    </template>\n    <template #footer> </template>\n  </Layout>\n</template>\n\n<script>\nimport Layout from \"./DetailContentLayout.vue\";\nimport ContentTextEdit from \"./DetailContentTextEdit.vue\";\n\nimport { mapState } from \"vuex\";\n\nexport default {\n  props: {\n    xmlJson: {\n      type: Object,\n      required: true,\n    },\n  },\n  components: {\n    Layout,\n    ContentTextEdit,\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailContentEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailContentEdit.vue?vue&type=template&id=44433fd0&\"\nimport script from \"./DetailContentEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailContentEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('OpenSeadragon',{key:'penseadragon',ref:\"openseadragon\",staticClass:\"has-background-dark\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"imageViewer\",\"options\":_vm.options},on:{\"open\":_vm.onOpen}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import config from \"../config\";\nimport round from \"lodash/round\";\n\nexport default {\n  data() {\n    return { imageBaseUrl: config.urls.image };\n  },\n  methods: {\n    getPaddedRect({ x, y, width, height }, padding = 5) {\n      return {\n        x: x - padding,\n        y: y - padding,\n        width: width + 2 * padding,\n        height: height + 2 * padding,\n      };\n    },\n    getImageInfo(id) {\n      return `${this.imageBaseUrl}/${id}/info.json`;\n    },\n    getImageSource(id, options = {}) {\n      const { x = 0, y = 0, width = \"\", height = \"\" } = options;\n      if (x === 0 && y === 0 && width === \"\" && height === \"\") {\n        return `${this.imageBaseUrl}/${id}/full/full/0/default.jpg`;\n      }\n      return `${this.imageBaseUrl}/${id}/${x},${y},${width},${height}/full/0/default.jpg`;\n    },\n    getScaledSource(id, { width = \"\", height = \"\" }) {\n      return `${this.imageBaseUrl}/${id}/full/${width},${height}/0/default.jpg`;\n    },\n    getThumbnailSource(id, params) {\n      return this.getScaledSource(id, params);\n    },\n    getContextImageSource(id, { x, y, width, height }, toRect) {\n      return `${this.imageBaseUrl}/${id}/${x},${y},${width},${height}/${toRect.width},${toRect.height}/0/default.jpg`;\n    },\n    getRoundedRect(rect, n = 2) {\n      return {\n        x: round(rect.x, 2),\n        y: round(rect.y, 2),\n        width: round(rect.width, 2),\n        height: round(rect.height, 2),\n      };\n    },\n    getIntersectionRatio(r1, r2) {\n      // https://stackoverflow.com/a/27162334\n      const dx =\n        Math.min(r1.x + r1.width, r2.x + r2.width) - Math.max(r1.x, r2.x);\n      const dy =\n        Math.min(r1.y + r1.height, r2.y + r2.height) - Math.max(r1.y, r2.y);\n      return Math.max(0, dx) * Math.max(0, dy);\n    },\n    getScaledRect({ x, y, width, height }) {\n      const rounded = (x) => Math.round(x * 1000000) / 1000000;\n      const w = this.width;\n      return {\n        x: rounded(x / w),\n        y: rounded(y / w),\n        width: rounded(width / w),\n        height: rounded(height / w),\n      };\n    },\n    getScaledPoints(points, width) {\n    \n      const rounded = (x) => Math.round(x * 1000) / 1000;\n      const w = width;\n      return points.map(({ x, y }) => ({\n        x: rounded(x / w),\n        y: rounded(y / w),\n      }));\n    },\n  \n    getPaddedRect({ x, y, width, height }, padding = 5) {\n      return {\n        x: x - padding,\n        y: y - padding,\n        width: width + 2 * padding,\n        height: height + 2 * padding,\n      };\n    },\n    parseNumber(value) {\n      if (typeof value === \"number\") return value;\n      if (typeof value === \"string\" && /\\d+/.test(value))\n        return parseInt(value);\n      return null;\n    },\n    roundNumber(value, n) {\n      return round(value, n);\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":_vm.id}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ** Based on https://github.com/braceslab/vue-openseadragon */\n\n<template>\n  <div :id=\"id\" />\n</template>\n\n<script>\nimport omit from \"lodash/omit\";\n\nexport default {\n  props: {\n    id: {\n      type: String,\n      default: \"openseadragon-editor\",\n    },\n    options: {\n      type: Object,\n    },\n    i18n: {\n      type: Object,\n    },\n    messages: {\n      type: Object,\n      default: () => ({\n        \"Tooltips.FullPage\": \"\",\n        \"Tooltips.Home\": \"\",\n        \"Tooltips.ZoomIn\": \"\",\n        \"Tooltips.ZoomOut\": \"\",\n        \"Tooltips.NextPage\": \"\",\n        \"Tooltips.PreviousPage\": \"\",\n        \"Tooltips.RotateLeft\": \"\",\n        \"Tooltips.RotateRight\": \"\",\n        \"Errors.Dzc\": \"\",\n        \"Errors.Dzi\": \"\",\n        \"Errors.Xml\": \"\",\n        \"Errors.ImageFormat\": \"\",\n        \"Errors.Security\": \"\",\n        \"Errors.Status\": \"\",\n        \"Errors.OpenFailed\": \"\",\n      }),\n    },\n  },\n  data() {\n    return {\n      viewer: null,\n    };\n  },\n\n  mounted() {\n    this.$nextTick(() => this.setup());\n  },\n  methods: {\n    setup() {\n      if (!this.viewer && this.options) {\n        this.translate();\n        const _options = this.options;\n        const OpenSeadragon = require(\"openseadragon\");\n        _options.id = this.id;\n        this.viewer = OpenSeadragon(omit(_options, \"tileSources\"));\n        this.viewer.open(_options.tileSources);\n        this.viewer.zoomPerClick = 1\n        this.viewer.addOnceHandler(\"open\", () => {\n          this.$emit(\"open\");\n        });\n      }\n    },\n    resolve(object, key) {\n      try {\n        const _keys = key.split(\".\");\n        let _cursor = object;\n        for (const _key of _keys) {\n          _cursor = _cursor[_key];\n        }\n        return _cursor;\n      } catch (e) {\n        return null;\n      }\n    },\n    /**\n\t@see https://openseadragon.github.io/examples/ui-customize-tooltips/\n      */\n    translate() {\n      if (!this.i18n || !this.messages) {\n        return;\n      }\n\n      const _messages = this.i18n.messages[this.i18n.locale];\n      const OpenSeadragon = require(\"openseadragon\");\n      for (const label in this.messages) {\n        OpenSeadragon.setString(\n          label,\n          this.resolve(_messages, this.messages[label])\n        );\n      }\n    },\n    panTo({ x, y }, immediate) {\n      const { Point } = require(\"openseadragon\");\n      this.viewer.viewport\n        .panTo(new Point(x, y), immediate)\n        .applyConstraints(immediate);\n    },\n    fitBoundsWithConstraints({ x, y, width, height }, immediate) {\n      const { Rect } = require(\"openseadragon\");\n      this.viewer.viewport\n        .fitBounds(new Rect(x, y, width, height), immediate)\n        .applyConstraints(immediate);\n    },\n    addOverlay({ element, location }) {\n      const { Overlay } = require(\"openseadragon\");\n      this.viewer.addOverlay(new Overlay({ element, location }));\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vue-openseadragon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vue-openseadragon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./vue-openseadragon.vue?vue&type=template&id=76016373&\"\nimport script from \"./vue-openseadragon.vue?vue&type=script&lang=js&\"\nexport * from \"./vue-openseadragon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <OpenSeadragon\n    id=\"imageViewer\"\n    :key=\"'penseadragon'\"\n    ref=\"openseadragon\"\n    class=\"has-background-dark\"\n    :options=\"options\"\n    style=\"width: 100%; height: 100%\"\n    @open=\"onOpen\"\n  />\n</template>\n\n<script>\n// const svgOverlay = require(\"svg-overlay\");\n\nimport { mapState } from \"vuex\";\n\nimport imageMixin from \"../../mixins/image.js\";\n\nimport OpenSeadragon from \"../vue-openseadragon.vue\";\n\nimport { svgOverlay } from \"../../utils/openseadragon-svg-overlay.js\";\n\nexport default {\n  components: {\n    OpenSeadragon,\n  },\n  mixins: [imageMixin],\n  props: {\n    // source: {\n    //   type: String,\n    //   required: true,\n    // },\n    width: {\n      type: Number,\n      required: true,\n      default: 100,\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n    xmlJson: {\n      type: Object,\n      required: true,\n    },\n    results: {\n      type: Array,\n      required: true,\n    },\n  },\n\n  data: () => ({\n    overlays: null,\n    selectedOverlayIndex: null,\n    layoutElements: {},\n    // width: 0,\n    // height: 0,\n    selectedLayoutElement: null,\n    highlightedLayoutElement: null,\n    selectedOverlayIndex: null,\n  }),\n  watch: {\n    /*\n     ** FIXME: use reactive style everywhere, i.e. change variable in methods,\n     **        then watch this variable, perform action when it has changed\n     */\n    data: {\n      handler: function (newValue, oldValue) {\n        console.log(newValue);\n        // if (newValue) this.layoutElements = this.renderLayout(newValue);\n      },\n      deep: true,\n    },\n    selected: {\n      handler: function (newValue, oldValue) {\n        if (newValue !== null && newValue.origin !== \"image\") {\n          this.selectLayoutElement(newValue.target);\n          this.fitBounds(newValue.target, true);\n        }\n      },\n      deep: true,\n    },\n    highlighted: {\n      handler: function (newValue, oldValue) {\n        if (newValue !== null && newValue.origin !== \"image\")\n          this.highlightLayoutElement(newValue.target);\n      },\n      deep: true,\n    },\n    // iiifUrl: {\n    //   handler: async function (newValue, oldValue) {\n    //   console.log('image changed fit width and height')\n    //   const response = await fetch(newValue);\n    //   const data = await response.json();\n    //   console.log('imageInfo ', data)\n    //   this.height = data.height\n    //   this.width = data.width\n    //   this.onOpen()\n      \n    //   },\n    //   deep: true,\n    // },\n  },\n  computed: {\n    ...mapState(\"content\", [\"data\", \"selected\", \"highlighted\", \"iiifUrl\"]),\n    options() {\n      const baseUrl =\n        \"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.4.0\";\n      return {\n        tileSources: this.iiifUrl,\n        zoomPerClick: 1.2,\n        prefixUrl: `${baseUrl}/images/`,\n        maxZoomLevel: 5,\n        showZoomControl: false,\n        showHomeControl: false,\n        showFullPageControl: false,\n        visibilityRatio: 0.2,\n      };\n    },\n  },\n  destroyed() {\n    // clear svg node's content\n    if (this.$refs.openseadragon) {\n      const viewer = this.$refs.openseadragon.viewer;\n      const overlay = viewer.svgOverlay();\n      const svgNode = overlay.node();\n\n      if (svgNode) svgNode.innerHTML = \"\";\n    }\n  },\n  methods: {\n    onOpen() {\n      this.fitToWidth();\n\n      if (this.xmlJson) this.layoutElements = this.renderLayout(this.xmlJson);\n\n      if (this.overlays === null)\n        this.overlays = Object.freeze(this.createOverlays());\n\n      // const index = this.parseNumber(this.$route.query.result);\n      // if (index !== null && this.results.length > 0)\n      //   this.selectedOverlayIndex = index;\n\n      if (this.selectedOverlayIndex !== null)\n        this.selectWithPan(this.selectedOverlayIndex, false);\n    },\n    fitToWidth() {\n      /*\n       ** as seen on https://github.com/openseadragon/openseadragon/issues/839#issuecomment-181968800\n       */\n      const viewer = this.$refs.openseadragon.viewer;\n      const viewportBounds = viewer.viewport.getBounds();\n      const viewportAspect = viewportBounds.height / viewportBounds.width;\n      const newBounds = viewer.world.getHomeBounds();\n      newBounds.height = newBounds.width * viewportAspect;\n      viewer.viewport.fitBounds(newBounds, false);\n    },\n    setHome() {\n      if (!this.$refs.openseadragon) return;\n      const viewer = this.$refs.openseadragon.viewer;\n      // disables zoom on click\n      viewer.gestureSettingsMouse.clickToZoom = false;\n\n      /*\n       ** as seen on https://github.com/openseadragon/openseadragon/issues/839#issuecomment-181968800\n       */\n      const viewportBounds = viewer.viewport.getBounds();\n      const viewportAspect = viewportBounds.height / viewportBounds.width;\n      const newBounds = viewer.world.getHomeBounds();\n      newBounds.height = newBounds.width * viewportAspect;\n      viewer.viewport.fitBounds(newBounds, true);\n    },\n    panTo(index, isAnimated = false) {\n      if (this.results.length > 0) {\n        const { rect } = this.results[index];\n        const point = {\n          x: (rect.x + rect.width / 2) / this.width,\n          y: (rect.y + rect.height / 2) / this.width,\n        };\n        this.$refs.openseadragon.panTo(point, !isAnimated);\n      }\n    },\n    zoom(delta) {\n      if (!this.$refs.openseadragon) return;\n\n      const viewer = this.$refs.openseadragon.viewer;\n\n      if (delta > 0) {\n        viewer.viewport.zoomBy(1.5);\n      } else {\n        viewer.viewport.zoomBy(1 / 1.5);\n      }\n      viewer.viewport.applyConstraints();\n    },\n    async fitBounds(id, isAnimated = false) {\n      const data = await this.$store.dispatch(\"content/findElementById\", id);\n      if (data === null) return;\n\n      const toRect = (points) => {\n        const x = Math.min.apply(\n          null,\n          data.geometry.coords.map((p) => p.x)\n        );\n        const y = Math.min.apply(\n          null,\n          data.geometry.coords.map((p) => p.y)\n        );\n        const width =\n          Math.max.apply(\n            null,\n            data.geometry.coords.map((p) => p.x)\n          ) - x;\n        const height =\n          Math.max.apply(\n            null,\n            data.geometry.coords.map((p) => p.y)\n          ) - y;\n        return { x, y, width, height };\n      };\n\n      const rect = this.getScaledRect(\n        this.getPaddedRect(toRect(data.geometry.coords), 75)\n      );\n\n      const point = {\n        x: rect.x + rect.width / 2,\n        y: rect.y + rect.height / 2,\n      };\n\n      this.$refs.openseadragon.panTo(point, !isAnimated);\n    },\n    select(index, isAnimated) {\n      if (this.overlays.length === 0) return;\n      if (!(index < this.overlays.length)) return;\n\n      const activeNode =\n        this.selectedOverlayIndex === null\n          ? null\n          : this.overlays[this.selectedOverlayIndex].element;\n\n      const node = this.overlays[index].element;\n\n      if (activeNode && node !== activeNode)\n        activeNode.classList.remove(\"is-selected\");\n\n      node.classList.add(\"is-selected\");\n\n      this.selectedOverlayIndex = index;\n    },\n    selectWithPan(index) {\n      this.select(index, false);\n      this.panTo(index, false);\n    },\n    renderLayout(data) {\n      if (!this.$refs.openseadragon) return [];\n      //  FIXME openseadragon viewer and editor use same refernece -> collision\n      const viewer = this.$refs.openseadragon.viewer;\n      // const svgOverlay = require(\"svg-overlay\");\n\n      const d3 = require(\"d3\");\n      const overlay = viewer.svgOverlay();\n      const svg = d3.select(overlay.node());\n      svg.attr(\"class\", \"layout\");\n\n      const contentGroup = svg.append(\"g\");\n      return data.elements.reduce((m, element) => {\n        if (!element.geometry) return [];\n        const pointsTemp = element.geometry.coords;\n        if (pointsTemp)\n          this.renderPolygon({\n            parent: contentGroup,\n            points: pointsTemp,\n            className: \"content\",\n          });\n\n        const vm = this;\n\n        const elementGroup = contentGroup.append(\"g\");\n\n        return element.elements.reduce((m, element) => {\n          var points = element.geometry.coords;\n          var id = element.attributes.id;\n\n          if (element.type == \"TableCell\") {\n            return element.elements.reduce((m, element) => {\n              var points = element.geometry.coords;\n              var id = element.attributes.id;\n\n              const polygon = this.renderPolygon({\n                parent: elementGroup,\n                points: this.getScaledPoints(points, this.width),\n                className: \"element\",\n              })\n                .on(\"click\", () => {\n                  this.selectLayoutElement(id);\n                  this.$store.dispatch(\"content/select\", {\n                    target: id,\n                    origin: \"image\",\n                  });\n                })\n                .on(\"mouseover\", () => this.highlightLayoutElement(id), true)\n                .on(\"mouseout\", () => this.highlightLayoutElement(id), true)\n                .node();\n              return Object.assign(m, { [id]: polygon });\n            }, m);\n          }\n          const polygon = this.renderPolygon({\n            parent: elementGroup,\n            points: this.getScaledPoints(points, this.width),\n            className: \"element\",\n          })\n            .on(\"click\", () => {\n              this.selectLayoutElement(id);\n              this.$store.dispatch(\"content/select\", {\n                target: id,\n                origin: \"image\",\n              });\n            })\n            .on(\"mouseover\", () => this.highlightLayoutElement(id), true)\n            .on(\"mouseout\", () => this.highlightLayoutElement(id), true)\n            .node();\n          return Object.assign(m, { [id]: polygon });\n        }, m);\n      }, {});\n    },\n    async selectLayoutElement(id) {\n      const element = this.layoutElements[id];\n      if (!element) return;\n\n      if (\n        this.selectedLayoutElement !== null &&\n        element !== this.selectedLayoutElement &&\n        this.selectedLayoutElement.classList.contains(\"is-selected\")\n      )\n        this.selectedLayoutElement.classList.remove(\"is-selected\");\n\n      if (!element.classList.contains(\"is-selected\")) {\n        element.classList.add(\"is-selected\");\n      }\n\n      if (element !== this.selectedLayoutElement)\n        this.selectedLayoutElement = element;\n    },\n    highlightLayoutElement(id) {\n      const element = this.layoutElements[id];\n      if (!element) return;\n      if (this.highlightedLayoutElement === element) {\n        if (element.classList.contains(\"is-highlighted\"))\n          element.classList.remove(\"is-highlighted\");\n      } else {\n        this.highlightedLayoutElement = element;\n\n        if (!element.classList.contains(\"is-highlighted\"))\n          element.classList.add(\"is-highlighted\");\n      }\n\n      this.$store.dispatch(\"content/highlight\", {\n        target: id,\n        origin: \"image\",\n      });\n    },\n    renderPolygon({ parent, points, className }) {\n      return parent\n        .append(\"polygon\")\n        .attr(\n          \"points\",\n          points.map(({ x, y }) => {\n            return `${x},${y}`;\n          })\n        )\n        .attr(\"class\", className)\n        .attr(\"tabindex\", 0);\n    },\n    createOverlays() {\n      if (!this.$refs.openseadragon) return [];\n\n      const viewer = this.$refs.openseadragon.viewer;\n      // const svgOverlay = require(\"svg-overlay\");\n\n      const d3 = require(\"d3\");\n\n      const overlay = viewer.svgOverlay();\n\n      const svg = d3.select(overlay.node());\n\n      return this.results.map(({ score, label, ...result }, index) => {\n        const rect = this.getScaledRect(\n          this.getPaddedRect(result.rect, this.height / 100)\n        );\n\n        const d3Rect = svg\n          .append(\"rect\")\n          .attr(\"x\", rect.x)\n          .attr(\"y\", rect.y)\n          .attr(\"width\", rect.width)\n          .attr(\"height\", rect.height)\n          .attr(\"title\", `${label} (${this.sanitizeScore(score)})`)\n          .attr(\"class\", \"highlight is-primary\")\n          .on(\"click\", () => {\n            this.select(index, true);\n          });\n\n        return {\n          d3: d3Rect,\n          element: d3Rect.node(),\n        };\n      });\n    },\n    clear() {\n      if (this.overlays.length === 0) return;\n      const index = this.selectedOverlayIndex;\n\n      if (!(this.index < this.overlays.length)) return;\n\n      const node = this.overlays[index].element;\n      if (node) node.classList.remove(\"is-selected\");\n      this.selectedOverlayIndex = null;\n      this.setHome();\n    },\n    sanitizeScore(score) {\n      return score === 1 || score === 0\n        ? score + \".0\"\n        : Math.round(score * 100) / 100;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailImageEditViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailImageEditViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailImageEditViewer.vue?vue&type=template&id=8421c93e&\"\nimport script from \"./DetailImageEditViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailImageEditViewer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"has-background-white\",staticStyle:{\"flex-direction\":\"column\"}},[_c('p',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"position\":\"is-left\",\"label\":\"Increase zoom level\"}},[_c('b-button',{on:{\"click\":_vm.increaseZoom}},[_c('b-icon',{attrs:{\"icon\":\"plus\"}})],1)],1)],1),_c('p',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"position\":\"is-left\",\"label\":\"Decrease zoom level\"}},[_c('b-button',{on:{\"click\":_vm.decreaseZoom}},[_c('b-icon',{attrs:{\"icon\":\"minus\"}})],1)],1)],1),_c('p',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"position\":\"is-left\",\"label\":\"Fit to width\"}},[_c('b-button',{on:{\"click\":_vm.fitToWidth}},[_c('b-icon',{attrs:{\"icon\":\"compress\"}})],1)],1)],1),_c('p',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"position\":\"is-left\",\"label\":\"Fullscreen\"}},[_c('b-button',{on:{\"click\":_vm.fullscreen}},[_c('b-icon',{attrs:{\"icon\":\"expand\"}})],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-field class=\"has-background-white\" style=\"flex-direction: column;\">\n    <p class=\"control\">\n      <b-tooltip position=\"is-left\" label=\"Increase zoom level\">\n        <b-button @click=\"increaseZoom\">\n          <b-icon icon=\"plus\"></b-icon>\n        </b-button>\n      </b-tooltip>\n    </p>\n    <p class=\"control\">\n      <b-tooltip position=\"is-left\" label=\"Decrease zoom level\">\n        <b-button @click=\"decreaseZoom\">\n          <b-icon icon=\"minus\"></b-icon>\n        </b-button>\n      </b-tooltip>\n    </p>\n    <p class=\"control\">\n      <b-tooltip position=\"is-left\" label=\"Fit to width\">\n        <b-button @click=\"fitToWidth\">\n          <b-icon  icon=\"compress\"></b-icon>\n        </b-button>\n      </b-tooltip>\n    </p>\n    <p class=\"control\">\n      <b-tooltip position=\"is-left\" label=\"Fullscreen\">\n        <b-button @click=\"fullscreen\">\n          <b-icon  icon=\"expand\"></b-icon>\n        </b-button>\n      </b-tooltip>\n    </p>\n  </b-field>\n</template>\n<style >\n.field.has-addons {\n\tdisplay: flex;\n  justify-content: flex-start;\n\tflex-direction: column;\n}\n\n</style>\n\n<script>\n\nexport default {\n  methods: {\n    increaseZoom() {\n      this.$emit(\"input\", { type: \"zoom\", delta: 1 });\n    },\n    decreaseZoom() {\n      this.$emit(\"input\", { type: \"zoom\", delta: -1 });\n    },\n    home() {\n      this.$emit(\"input\", { type: \"home\" });\n    },\n    fitToWidth() {\n      this.$emit(\"input\", { type: \"fit\" });\n    },\n    fullscreen() {\n      this.$fullscreen.toggle();\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailImageControls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailImageControls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailImageControls.vue?vue&type=template&id=3cee92df&\"\nimport script from \"./DetailImageControls.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailImageControls.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailImageControls.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <section class=\"hero is-fullheight-with-navbar\">\n    <DetailEditLayout :name=\"view\">\n      <template v-slot:image>\n        <ImageViewer\n          v-if=\"imageInfo\"\n          ref=\"viewer\"\n          :source=\"iiifUrl\"\n          :width=\"imageInfo.width\"\n          :height=\"imageInfo.height\"\n          :xmlJson=\"xmlJson\"\n          :results=\"results\"\n        />\n        <aside class=\"detail-image-controls-wrapper\">\n          <ImageControls @input=\"handleControlEvent\" />\n        </aside>\n      </template>\n\n      <template v-slot:content>\n        <Content id=\"textEditor\" :xmlJson=\"xmlJson\" />\n      </template>\n    </DetailEditLayout>\n  </section>\n</template>\n<style lang=\"scss\">\n// .detail-image-controls-wrapper {\n//   position: absolute;\n//   right: 1.25rem;\n//   top: 1.25rem;\n// }\n</style>\n\n<script>\nimport DetailEditLayout from \"./DetailEditLayout.vue\";\nimport Content from \"./DetailContentEdit.vue\";\nimport ImageViewer from \"./DetailImageEditViewer.vue\";\nimport ImageControls from \"./DetailImageControls.vue\";\n\nimport { parseJsonContent } from \"../../utils/xml.js\";\nimport imageMixin from \"../../mixins/image.js\";\nimport { getImageSize } from \"../../utils/api.js\";\n\nimport { mapState, mapGetters } from \"vuex\";\n\nvar WindowObjectReference; // global variable\n\nexport default {\n  components: {\n    DetailEditLayout,\n    Content,\n    ImageViewer,\n    ImageControls,\n  },\n  props: {\n    // iiifUrl: {\n    //   type: String,\n    //   required: true,\n    // },\n    // xmlJson: {\n    //   type: Object,\n    //   required: true,\n    // },\n  },\n  mixins: [imageMixin],\n  data() {\n    return {\n      imageInfo: null,\n    };\n  },\n  computed: {\n    ...mapState(\"detail\", [\n      // document\n      \"docId\",\n      \"title\",\n      \"colTitle\",\n      \"pageNum\",\n      \"maxPage\",\n      \"isDocumentReady\",\n      \"tsList\",\n\n      // page\n      \"image\",\n      \"isPageReady\",\n      \"isPageContentReady\",\n      // search\n      \"results\",\n      \"view\",\n      \"tagMode\",\n    ]),\n    ...mapState(\"content\", [\n      \"data\",\n      \"selected\",\n      \"highlighted\",\n      \"fetchPageContent\",\n      \"iiifUrl\",\n      \"xmlJson\",\n    ]),\n    ...mapGetters(\"detail\", [\"isLoading\"]),\n    source() {\n      return this.getImageInfo(this.image.id);\n    }\n  },\n    watch: {\n      iiifUrl: {\n      handler: async function (newValue, oldValue) {\n        this.imageInfo= null\n      console.log('image changed fit width and height')\n      const response = await fetch(newValue);\n      const data = await response.json();\n      console.log('imageInfo ', data)\n      this.imageInfo= data\n     },\n      deep: true,\n    },\n    },\n  async mounted() {\n    const response = await fetch(this.iiifUrl);\n    const data = await response.json();\n    this.imageInfo = data;\n  },\n  async destroyed() {\n    // reset state\n    this.$store.dispatch(\"content/reset\");\n  },\n  methods: {\n    async update() {\n      await this.$store.dispatch(\"detail/fetch\", this.$route.params);\n    },\n    handleControlEvent(event) {\n      if (event.type.toLowerCase() === \"zoom\") {\n        this.$refs.viewer.zoom(event.delta);\n      }\n      if (event.type.toLowerCase() === \"home\") {\n        this.$refs.viewer.setHome();\n      }\n      if (event.type.toLowerCase() === \"fit\") {\n        this.$refs.viewer.fitToWidth();\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TranscriptionInterfaceLocal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TranscriptionInterfaceLocal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TranscriptionInterfaceLocal.vue?vue&type=template&id=9dbd5fb2&\"\nimport script from \"./TranscriptionInterfaceLocal.vue?vue&type=script&lang=js&\"\nexport * from \"./TranscriptionInterfaceLocal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TranscriptionInterfaceLocal.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <section>\n    <TranscriptionInterfaceLocal\n      :iiifUrl=\"iiifUrl\"\n      :xmlJson=\"xmlJson\"\n      :tags=\"tags\"\n    />\n  </section>\n</template>\n\n<script>\nimport TranscriptionInterfaceLocal from \"../components/DetailView/TranscriptionInterfaceLocal.vue\";\n\nimport { mapState, mapGetters } from \"vuex\";\n\nimport imageMixin from \"../mixins/image.js\";\n\nconst json = require(\"../assets/page1.json\");\n\nexport default {\n  components: {\n    TranscriptionInterfaceLocal,\n  },\n  mixins: [imageMixin],\n  computed: {\n    ...mapState(\"content\", [\"iiifUrl\", \"xmlJson\"]),\n  },\n  props: {\n    // iiifUrl: {\n    //   type: String,\n    //   required: true,\n    // },\n    // xmlJson: {\n    //   type: Object,\n    //   required: true,\n    // },\n  },\n  data() {\n    return {};\n  },\n  methods: {},\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=6106e7d8&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"transkribusEditor\">\n    <Editor v-if=\"xmlJsonString\" :iiifUrl=\"iiifUrl\" :xmlJson=\"toJsonObject\" />\n    <Editor v-else :iiifUrl=\"iiifUrl\" :xmlJson=\"xmlJson\" />\n  </div>\n</template>\n\n<script>\n// Test page : http://localhost:5000/collection/76950/doc/497355/detail/1\n\nimport Editor from \"./views/Editor.vue\";\n\nconst json = require(\"./assets/page1.json\");\n\nexport default {\n  name: \"transkribusEditor\",\n  props: {\n    iiifUrl: {\n      type: String,\n      default: () =>\n        \"https://files.transkribus.eu/iiif/2/XITIHIQXRRBAHPZDHDPHWHMP/info.json\",\n    },\n    xmlJson: {\n      type: Object,\n      default: () => json,\n    },\n    xmlJsonString: {\n      type: String,\n    },\n    xml: {\n      type: String,\n    },\n    tags: {\n      type: String,\n    },\n  },\n  methods: {\n    escapeSpecialChars(string) {\n      return string\n        .replace(/\\\\n/g, \"\\\\n\")\n        .replace(/\\\\'/g, \"\\\\'\")\n        .replace(/\\\\\"/g, '\\\\\"')\n        .replace(/\\\\&/g, \"\\\\&\")\n        .replace(/\\\\r/g, \"\\\\r\")\n        .replace(/\\\\t/g, \"\\\\t\")\n        .replace(/\\\\b/g, \"\\\\b\")\n        .replace(/\\\\f/g, \"\\\\f\");\n    },\n  },\n  components: {\n    Editor,\n  },\n  computed: {\n    toJsonObject() {\n      var cleanedString = this.escapeSpecialChars(this.xmlJsonString);\n      const obj = JSON.parse(cleanedString);\n      return obj;\n    },\n  },\n  mounted() {\n    if (this.iiifUrl) {\n      this.$store.dispatch(\"content/setIIIF\", {\n        iiifUrl: this.iiifUrl,\n      });\n    }\n    if (this.xml) {\n      this.$store.dispatch(\"content/setXml\", {\n        xml: this.xml,\n      });\n    }\n    if (this.xmlJsonString) {\n      this.$store.dispatch(\"content/setXmlJson\", {\n        xmlJson: this.toJsonObject,\n      });\n    }\n    if (this.tags) {\n      var cleanedString = this.escapeSpecialChars(this.tags);\n      const obj = JSON.parse(cleanedString);\n      this.$store.dispatch(\"browse/setTagDefs\", { tagDefs: obj });\n    }\n  },\n};\n</script>\n<style lang=\"scss\">\n@import \"~bulma/sass/utilities/_all\";\n@import \"assets/variables.scss\";\n@import \"assets/styles.scss\";\n\n@import \"bulma\";\n@import \"buefy/src/scss/buefy\";\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=57f2e836&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faSearch,\n  faAngleRight,\n  faAngleLeft,\n  faAngleUp,\n  faAngleDown,\n  faMinusSquare,\n  faPlusSquare,\n  faChevronLeft,\n  faChevronRight,\n  faChevronUp,\n  faChevronDown,\n  faFileAlt,\n  faTimes,\n  faArrowUp,\n  faArrowDown,\n  faPlus,\n  faMinus,\n  faTrash,\n  faDesktop,\n  faColumns,\n  faImage,\n  faCode,\n  faEye,\n  faPaperPlane,\n  faCheck,\n  faShoppingCart,\n  faDownload,\n  faEyeSlash,\n  faTags,\n  faCaretDown,\n  faCaretUp,\n  faImages,\n  faAlignLeft,\n  faObjectGroup,\n  faQuestion,\n  faQuestionCircle,\n  faExternalLinkAlt,\n  faUndo,\n  faRedo,\n  faBars,\n  faSave,\n  faBold,\n  faCompress,\n  faExpand,\n  faStrikethrough,\n  faUnderline,\n  faSubscript,\n  faSuperscript,\n  faTag,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\n\nexport default {\n  install(Vue, options = {}) {\n    library.add(\n      faSearch,\n      faAngleRight,\n      faAngleLeft,\n      faAngleUp,\n      faAngleDown,\n      faMinusSquare,\n      faPlusSquare,\n      faChevronLeft,\n      faChevronRight,\n      faChevronUp,\n      faChevronDown,\n      faFileAlt,\n      faTimes,\n      faArrowUp,\n      faCompress,\n      faExpand,\n      faArrowDown,\n      faPlus,\n      faMinus,\n      faTrash,\n      faDesktop,\n      faColumns,\n      faImage,\n      faCode,\n      faEye,\n      faPaperPlane,\n      faCheck,\n      faShoppingCart,\n      faDownload,\n      faEyeSlash,\n      faTags,\n      faCaretDown,\n      faCaretUp,\n      faAlignLeft,\n      faImages,\n      faObjectGroup,\n      faQuestion,\n      faQuestionCircle,\n      faExternalLinkAlt,\n      faUndo,\n      faRedo,\n      faBars,\n      faSave,\n      faBold,\n      faStrikethrough,\n      faUnderline,\n      faSubscript,\n      faSuperscript,\n      faTag\n    );\n\n    Vue.component(\"font-awesome-icon\", FontAwesomeIcon);\n  },\n};\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport Vuex from \"vuex\";\nimport Buefy from \"buefy\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport fontawesome from \"@/plugins/fontawesome.js\";\nimport VueFullscreen from \"vue-fullscreen\";\nimport banner from \"rollup-plugin-banner\";\nimport store from \"@/store\";\n\nVue.config.productionTip = false;\n\nVue.use(Vuex);\nVue.use(fontawesome);\n\nVue.use(Buefy, {\n  defaultIconComponent: FontAwesomeIcon,\n  defaultIconPack: \"fas\",\n});\nVue.use(VueFullscreen);\n\nconst root_element = document.getElementById(\"transkribusEditor\");\n\nconst AppRoot = Vue.extend(App);\nwindow.eventBus = new AppRoot({\n  store,\n  el: root_element,\n  propsData: { ...root_element.dataset },\n  mounted() {\n    this.$root.$on(\"save\", this.save);\n    const that = this;\n    this.$root.$on(\"change\", function (payLoad) {\n      console.log('change ', payLoad)\n      if (payLoad.iiifUrl) {\n        that.$store.dispatch(\"content/setIIIF\", {\n          iiifUrl: payLoad.iiifUrl,\n        });\n      }\n      if (payLoad.xmlJsonString) {\n        var cleanedString = this.escapeSpecialChars(payLoad.xmlJsonString);\n        const obj = JSON.parse(cleanedString);\n        that.$store.dispatch(\"content/setXmlJson\", {\n          xmlJson: obj,\n        });\n      }\n      if (payLoad.xml) {\n        that.$store.dispatch(\"content/setXml\", {\n          xml: payLoad.xml,\n        });\n      }\n    });\n  },\n  methods: {\n    save(value) {\n      window.output = value;\n      root_element.dataset.output = JSON.stringify(value);\n      window.eventBus.$emit(\"dataSaved\", value);\n    },\n    escapeSpecialChars(string) {\n      return string\n        .replace(/\\\\n/g, \"\\\\n\")\n        .replace(/\\\\'/g, \"\\\\'\")\n        .replace(/\\\\\"/g, '\\\\\"')\n        .replace(/\\\\&/g, \"\\\\&\")\n        .replace(/\\\\r/g, \"\\\\r\")\n        .replace(/\\\\t/g, \"\\\\t\")\n        .replace(/\\\\b/g, \"\\\\b\")\n        .replace(/\\\\f/g, \"\\\\f\");\n    },\n  },\n}).$mount(\"#transkribusEditor\");\n\nexport default AppRoot;\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailImageControls.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TranscriptionInterfaceLocal.vue?vue&type=style&index=0&lang=scss&\"","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"a3ea\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegionNode.vue?vue&type=style&index=0&id=90ae8d76&lang=scss&scoped=true&\""],"sourceRoot":""}